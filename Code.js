"use strict";(()=>{var We=Object.defineProperty;var $e=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var xe=(e,t,s)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Re=(e,t)=>{for(var s in t||(t={}))Ve.call(t,s)&&xe(e,s,t[s]);if($e)for(var s of $e(t))je.call(t,s)&&xe(e,s,t[s]);return e};console.time("Game loaded in");var n={version:"v0.1.0",fileName:"Fundamental, [date] [time], [stage]",separator:["","."],stage:{true:1,current:1,active:1,resets:0,export:86400,input:1},discharge:{energyCur:0,energyMax:0,current:0},vaporization:{clouds:1,input:10},accretion:{rank:0},collapse:{mass:.01235,stars:[0,0,0],show:[],disabled:!1,inputM:4,inputS:2},intervals:{main:100,numbers:100,visual:1,autoSave:60},time:{updated:Date.now(),started:Date.now()},buildings:[[],[{current:3,total:3,trueTotal:3,highest:3},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0}],[{current:.0028,total:.0028,trueTotal:.0028,highest:.0028},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0}],[{current:1e-19,total:1e-19,trueTotal:1e-19,highest:1e-19},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0}],[{current:1,total:1,trueTotal:1,highest:1},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0}],[{current:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0},{current:0,true:0,total:0,trueTotal:0,highest:0}]],strange:[{true:0,total:0}],upgrades:[],researches:[],researchesExtra:[],researchesAuto:[],ASR:[],elements:[],strangeness:[],milestones:[],toggles:{normal:[],buildings:[],auto:[],shop:{howMany:1,input:10,strict:!0}},events:[!1,!1,!1]},a={tab:"stage",subtab:{stageCurrent:"Structures",settingsCurrent:"Settings",researchCurrent:"Researches",strangenessCurrent:"Matter"},tabList:{tabs:["stage","research","strangeness","settings","special"],stageSubtabs:["Structures","Advanced"],settingsSubtabs:["Settings","Stats"],researchSubtabs:["Researches","Elements"],strangenessSubtabs:["Matter","Milestones"]},footer:!0,mobileDevice:!1,screenReader:!1,versionInfo:{changed:!1,log:"Change log:"},timeSpecial:{lastSave:0},stageInfo:{word:["","Microworld","Submerged","Accretion","Interstellar","Intergalactic"],textColor:["","var(--cyan-text-color)","var(--blue-text-color)","var(--gray-text-color)","var(--orange-text-color)","var(--darkorchid-text-color)"],buttonBackgroundColor:["","mediumblue","blue","#291344","#6a3700","#4a008f"],buttonBorderColor:["","darkcyan","#427be1","#404040","#9f6700","#9d0054"],imageBorderColor:["","#008b8b","#1460a8","#5b5b75","#e87400","#b324e2"],priceName:"Energy",activeAll:[1]},automatization:{autoU:[[],[],[],[],[],[]],autoR:[[],[],[],[],[],[]],autoE:[[],[],[],[],[],[]],elements:[]},theme:{stage:1,default:!0},dischargeInfo:{energyType:[0,1,5,20],base:4,step:10,next:1},vaporizationInfo:{get:0},accretionInfo:{rankU:[1,1,2,2,3,3,4,4,4,4,5,5,5],rankR:[1,1,2,2,3,3,4,5],rankE:[2,3,4,5],rankCost:[597e25,1e-7,1e10,1e24,0,0],rankName:["Ocean world","Cosmic dust","Meteoroid","Asteroid","Planet","Jovian planet"],rankImage:["Ocean%20world","Dust","Meteoroids","Asteroid","Planet","Giant"]},collapseInfo:{unlockB:[0,.01235,.23,10,40],unlockG:[0,100,1e3,1e5],unlockU:[.01235,.076,1.3,10],unlockR:[.18,.3,.8,2],newMass:0,starCheck:[0,0,0],trueStars:0},intervalsId:{main:0,numbers:0,visual:0,autoSave:0},buildingsInfo:{name:[[],["Quarks","Particles","Atoms","Molecules"],["Moles","Drops","Puddles","Ponds","Lakes","Seas"],["Mass","Cosmic dust","Planetesimals","Protoplanets","Satellites"],["Elements","Brown dwarfs","Main sequence","Red supergiants","Blue hypergiants"],["Stars","Nebulas","Star clusters","Galaxies"]],type:[[],["","producing","producing","producing"],["","producing","producing","improves","improves","improves"],["","producing","producing","producing","improves"],["","producing","producing","producing","producing"],["","producing","improves","improves"]],cost:[[],[0,3,24,3],[0,.0028,100,1e7,1e18,1e23],[0,1e-19,1e-9,1e21,1e17],[0,1,1e5,1e16,1e31],[0,1e30,1e40,1e60]],startCost:[[],[0,3,24,3],[0,.0028,100,1e7,1e18,1e23],[0,1e-19,1e-9,1e21,1e17],[0,1,1e5,1e16,1e31],[0,1e30,1e40,1e5]],increase:[[],[0,1.4,1.4,1.4],[0,1.2,1.2,1.2,1.2,1.2],[0,1.15,1.15,1.15,10],[0,1.4,1.55,1.7,1.85],[0,2,2,1.1]],producing:[[],[0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0]]},strangeInfo:{stageGain:0,extraGain:0,stageBoost:[null,null,null,null,null,null]},HTMLSpecial:{longestBuilding:6,buildingHTML:[[],[["Particle","Particle"],["Atom","Atom"],["Molecule","Molecule"]],[["Drop","Drop of water"],["Puddle","Puddle"],["Pond","Pond"],["Lake","Lake"],["Sea","Sea"]],[["Cosmic%20dust","Cosmic dust"],["Planetesimal","Planetesimal"],["Protoplanet","Protoplanet"],["Natural%20satellite","Moon"]],[["Brown%20dwarf","Brown dwarf"],["Orange%20dwarf","Orange dwarf"],["Red%20supergiant","Red supergiant"],["Blue%20hypergiant","Blue hypergiant"]],[["Nebula","Nebula"],["Star%20cluster","Star cluster"],["Galaxy","Galaxy"]]],longestUpgrade:13,upgradeHTML:[[],[["Upgrade1","Electron"],["Upgrade2","Proton"],["Upgrade3","Neutron"],["Upgrade4","Superposition"],["Upgrade5","Protium"],["Upgrade6","Deuterium"],["Upgrade7","Tritium"],["Upgrade8","Fusion"]],[["UpgradeW1","Mole"],["UpgradeW2","Vaporization"],["UpgradeW3","Tension"],["UpgradeW4","Stress"],["UpgradeW5","Stream"],["UpgradeW6","River"],["UpgradeW7","Tsunami"]],[["UpgradeA1","Motion"],["UpgradeA2","Gas"],["UpgradeA3","Micrometeoroid"],["UpgradeA4","Instability"],["UpgradeA5","Gravity"],["UpgradeA6","Pile"],["UpgradeA7","Orbit"],["UpgradeA8","Magma"],["UpgradeA9","Equilibrium"],["UpgradeA10","Atmosphere"],["UpgradeA11","Pebble"],["UpgradeA12","Tidal force"],["UpgradeA13","Ring"]],[["UpgradeS1","Collapse"],["UpgradeS2","Reaction"],["UpgradeS3","CNO"],["UpgradeS4","Helium fusion"]],[["UpgradeG1","Instability"],["UpgradeG2","Super cluster"],["UpgradeG3","Quasar"]]],longestResearch:8,researchHTML:[[],[["Research1","Protium+","stage1borderImage"],["Research2","Deuterium+","stage1borderImage"],["Research3","Tritium+","stage1borderImage"],["Research4","Discharge-","stage4borderImage"],["Research5","Discharge+","stage4borderImage"],["Research6","Discharge++","stage4borderImage"]],[["ResearchW1","Moles+","stage2borderImage"],["ResearchW2","Moles++","stage2borderImage"],["ResearchW3","Tension+","stage2borderImage"],["ResearchW4","Stress+","stage2borderImage"],["ResearchW5","Streams+","stage2borderImage"],["ResearchW6","Channel","stage2borderImage"]],[["ResearchA1","Mass+","stage3borderImage"],["ResearchA2","Adhesion","stage2borderImage"],["ResearchA3","Weathering","stage3borderImage"],["ResearchA4","Collision","stage3borderImage"],["ResearchA5","Binary","stage3borderImage"],["ResearchA6","Gravity+","stage1borderImage"],["ResearchA7","Layers","stage7borderImage"],["ResearchA8","Drag","stage1borderImage"]],[["ResearchS1","Orbit","stage5borderImage"],["ResearchS2","2 stars","stage5borderImage"],["ResearchS3","Protodisc","stage7borderImage"],["ResearchS4","Planetary nebula","stage5borderImage"]],[["ResearchG1","Density","stage1borderImage"],["ResearchG2","Frequency","stage6borderImage"]]],longestResearchExtra:4,researchExtraDivHTML:[[],[],["Cloud%20Researches","Cloud researches","stage2borderImage"],["Rank%20Researches","Rank researches","stage6borderImage"],["Star%20Researches","Star researches","stage6borderImage"],[]],researchExtraHTML:[[],[],[["ResearchClouds1","Vaporization+","stage3borderImage"],["ResearchClouds2","Rain","stage2borderImage"],["ResearchClouds3","Storm","stage4borderImage"]],[["ResearchRank1","Ocean","stage3borderImage"],["ResearchRank2","Rank","stage3borderImage"],["ResearchRank3","Weight","stage3borderImage"],["ResearchRank4","Viscosity","stage2borderImage"]],[["ResearchStar1","Supernova","stage6borderImage"],["ResearchStar2","White dwarf","stage1borderImage"]],[]]},upgradesInfo:[{description:[],effectText:[],effect:[],cost:[]},{description:["Bigger electrons. Particles cost decreased.","Stronger protons. Particles produce more.","More neutrons. Increased gain of Particles.","Superposition. Unlocks a new reset tier.","Protium. Basic.","Deuterium. Heavy.","Tritium. Radioactive.","Nuclear fusion. More Energy."],effectText:[["Particle cost is 10 times cheaper."],["Particles produce 10 times more Quarks."],["Atoms produce 5 times more Particles."],["Ability to reset at any time, and if had enough Energy, then production for all structures will also be boosted by "," times."],["Cost scaling is decreased by ","."],["Structures (only self-made one's) boost themselves by "," times."],["Molecules produce Molecules. At a reduced rate. ("," per second)"],["Unspent Energy boost Molecules production of themselves 1 to 1."]],effect:[null,null,null,4,.2,1.01,0,null],cost:[9,12,36,300,800,2e3,8e3,3e4]},{description:["Molecules to Moles. Even more Moles.","Vaporization. Unlock a new reset tier.","Surface tension. Allows for bigger Puddles.","Surface stress. Even bigger Puddles.","Stream. Spreads water around.","River. Spreads even more water.","Tsunami. Spreads water too fast."],effectText:[[`Drops will produce Moles even more for every self-made Drops.
(Self-made amount will decrease, if less than overall amount)`],["Gain ability to convert Drops into Clouds. (Puddles get a boost equal to Cloud amount)"],["Puddles get boost based on Moles. (Equal to Moles ^ ",")"],["Puddles get boost based on Drops. (Equal to Drops ^ ",")"],[`Ponds do not produce Puddles, instead they only improve them.
This upgrade will create extra Puddles for every Pond. (`," extra Puddles per Pond)"],["Lakes now create extra Ponds. ("," extra Ponds per Lake)"],["Each Sea creates 1 extra Lake."]],effect:[null,null,.02,.02,1,1,null],cost:[1e4,1e10,1e3,1e4,2e9,5e20,1e28]},{description:["Brownian motion.","Gas. New substance for Accretion.","Micrometeoroid. Unlock a new structure.","Streaming instability.","Gravitational field. Unlock a new structure.","Rubble pile.","Satellite system.","Magma ocean.","Hydrostatic equilibrium","Atmosphere.","Pebble accretion.","Tidal force.","Ring system."],effectText:[["Through random collisions every self-made Dust speeds up Accretion speed. (By ",")"],["Accretion speed is now quicker based on current Dust amount. ("," boost)"],["Just a small meteoroid, but it will be a good base for what to come. (Also 2x boost to Dust)"],["Small bodies spontaneously concentrate into clumps. (Self-made Planetesimals boost each other by ",")"],["Bodies are now massive enough to affect each other with gravity. (4x boost to Planetesimals)"],["Shattered pieces fall back together. Mass production is now even bigger. (By 3x)"],["Unlocks yet another structure."],["Core melted, Accretion speed increased. (Mass production increased by ",")"],["After reaching equilibrium, Protoplanets will boost themselfs, more with each self-made one."],["Accretion speed increased again (because of drag and escape velocity), by 2."],["Accretion speed greatly increased by ","."],["Satellites scaling cost is now 2 times smaller."],["Satellites effect scales better."]],effect:[1.01,0,null,1.02,null,null,null,2,null,null,10,null,null],cost:[1e-16,1e-13,1e-13,1,1e14,1e17,1e22,1e11,1e22,1e23,1e9,1e26,1e29]},{description:["Gravitational collapse.","Proton-proton chain.","Carbon-Nitrogen-Oxygen cycle.","Helium fusion."],effectText:[["As fuel runs out, each star will boost production in its own special way."],["Fuse with Protium instead of Deuterium. Unlocks a new structure and something else."],["CNO cycle is now a better source of Helium and Energy. Unlocks a new structure and more of something else."],["Through Triple-alpha and then Alpha process, unlock a few more elements."]],effect:[null,null,null,null],cost:[100,1e3,1e9,1e50]},{description:["Jeans instability.","Super star cluster.","Quasar"],effectText:[["Gravitational collapse within Nebulas will increase speed for production of Stars by "," times."],["A very massive Star clusters, that will boost Stars by ","."],["Nickel Element receives super boost of ^","."]],effect:[4,6,1.5],cost:[1e50,1e60,1e100]}],researchesInfo:[{description:[],effectText:[],effect:[],cost:[],scaling:[],max:[]},{description:["Effect of 'Protium' upgrade is stronger.","Effect of 'Deuterium' upgrade is bigger.","Effect of 'Tritium' upgrade is better.","Discharge goal requirements decreased.","Discharge bonus improved.","Radioactive Discharge."],effectText:[["Cost scaling is "," smaller for each level."],["Each self-made structure, boost each other by additional ","."],["Molecules now produce themselves "," times quicker."],["Next goal for Discharge bonus scales by -1 less"],["Discharge is now provides 2 times bigger bonus per reached goal."],["Discharge will boost 'Tritium' upgrade for every reached goal + 1."]],effect:[.01,.01,12,null,null,null],cost:[1e3,3e3,12e3,6e3,1e4,2e4],scaling:[500,2e3,2e3,26e3,0,5e3],max:[9,3,9,2,1,3]},{description:["Better Mole production.","All of it, is still around.","Stronger surface tension.","Stronger surface stress.","More streams.","Distributary channel."],effectText:[["Drops produce 3 times more Moles."],["Bonus to structures is now based on total produced, rather than on hands. Level 1 for Drops, level 2 for Moles."],["Surface tension upgrade is now +"," stronger."],["Surface stress upgrade is now +"," stronger."],["With more streams, can have even more extra Puddles. (+1 extra Puddles per Pond)"],["Rivers can split now, that allows even more Ponds per Lake. (+1 per)"]],effect:[null,null,.02,.03,null,null],cost:[20,1e12,1e5,1e6,1e14,1e22],scaling:[1.2,1e3,1e3,1e4,1e3,100],max:[9,2,3,3,2,2]},{description:["More massive bodies.","Adhesion.","Space weathering.","Inelastic collisions.","Contact binary.","Gravity.","Planetary differentiation.","Aerodynamic drag."],effectText:[["Dust production is increased by 3."],["Dust particles cling to each other. (+"," to 'Brownian motion')"],["Planetesimals produce more Dust. (3 times more)"],["Slow encounter velocities will result in a more efficient growth, so this research will make bodies lose more energy with each deflection. Mass production increased by 2."],["Some Planetesimals instead of shattering form a contact binary or even trinary. Planetesimals production boosted by 5x."],[`Planetesimals attract other bodies with own gravity. Planetesimals get boost to production based on unspent Mass.
(Total boost: `,")"],["'Magma Ocean' upgrade is stronger now. (","x times)"],["Accretion speed for 'Pebble accretion' increased again, by 3."]],effect:[null,.01,null,null,null,0,1.5,null],cost:[1e-14,1e-15,1e-5,1e5,1e10,1e15,1e13,1e12],scaling:[11,111,22,10,100,10,1e5,1e3],max:[7,3,9,4,2,5,3,3]},{description:["Planetary system.","Star system.","Protoplanetary disk.","Planetary nebula."],effectText:[["From Planetesimals to Planets, will get ","x boost to all Stars."],["Each Star boost another Star. (Total to each Star is ","x)"],["Improve effect of 'Planetary system', as well increases its max level by +3."],["Matter expelled from Red giants, but get 10x boost to Main-sequence stars anyway."]],effect:[1.1,1,null,null],cost:[1e3,5e4,1e8,1e12],scaling:[10,200,1e12,0],max:[3,2,1,1]},{description:["Higher density.","Type frequency."],effectText:[[`Higher density of Nebulas, will allow them to produce higher tier of Stars, but each tier is 4 times slower than previous one.
Next tier will be `,"."],[`More types of Stars are found within Star cluster. Increasing effect by 3, but also boosting lower tier of Stars. (3 times less than higher one)
Next tier will be `,"."]],effect:["Main sequence","Red supergiants"],cost:[1e40,1e55],scaling:[1e20,1e15],max:[3,3]}],researchesExtraInfo:[{description:[],effectText:[],effect:[],cost:[],scaling:[],max:[]},{description:[],effectText:[],effect:[],cost:[],scaling:[],max:[]},{description:["Natural vaporization.","Rain Clouds.","Storm Clouds."],effectText:[["Clouds will now use total produced Drops instead, when formed."],["Some Clouds will start pouring Drops themselves. ("," per second)"],["Seas get a boost based on amount of Clouds. (Equal to ",")"]],effect:[null,0,0],cost:[1e16,1e13,1e26],scaling:[0,100,0],max:[1,4,1]},{description:["Rank, can now boost Dust production.","Efficient growth.","Weight.","Viscosity."],effectText:[["Dust production is increased by another ","."],["Accretion speed is even quicker. Multiplied by current rank. (Total boost to Dust: ",")"],["'Gravitational field' upgrade will boost Protoplanets now as well. (Only half of effect)"],["'Gas' upgrade is now stronger."]],effect:[0,0,null,null],cost:[1e-18,1e-16,1e26,1e-12],scaling:[10,100,0,100],max:[12,5,1,20]},{description:["At the end of Star life.","White dwarfs."],effectText:[[""," Stars are now creating something new, upon collapse reset."],["Red giants are turning into White dwarfs, which caused Main-sequence to produce quicker. (Times square root of Red giants)"]],effect:["Main sequence",null],cost:[1e6,1e50],scaling:[1e12,0],max:[3,1]},{description:[],effectText:[],effect:[],cost:[],scaling:[],max:[]}],researchesAutoInfo:{description:["Make toggles.","Increased max offline time.","Automatic upgrades."],effectText:[["Unlock ability to make multiple structures at same time."],["Research this to make max offline timer +4 hours longer."],["This is going to create all upgrades automatically. Each level increases highest type of upgrades to create."]],effect:[null,null,null],cost:[300,1e9,1],scaling:[3e4,2e4,1e10],max:[1,1,0],autoStage:[1,2,3]},ASRInfo:{cost:[0,4e3,1e10,1e-7,1e6,1],costRange:[[],[4e3,12e3,2e4],[1e10,1e13,1e16,1e24,1e28],[1e-7,1e10,5e29,2e30],[1e6,1e17,1e28,1e39],[1,1,1]],max:[0,3,5,4,4,0]},elementsInfo:{description:["[0] Placeholder.","[1] Hydrogen.","[2] Helium.","[3] Lithium.","[4] Beryllium.","[5] Boron.","[6] Carbon.","[7] Nitrogen.","[8] Oxygen.","[9] Fluorine.","[10] Neon.","[11] Sodium.","[12] Magnesium.","[13] Aluminium.","[14] Silicon.","[15] Phosphorus.","[16] Sulfur.","[17] Chlorine.","[18] Argon.","[19] Potassium.","[20] Calcium.","[21] Scandium.","[22] Titanium.","[23] Vanadium.","[24] Chromium.","[25] Manganese.","[26] Iron.","[27] Cobalt.","[28] Nickel."],effectText:[["Placeholder"],["Most basic element, increases Brown dwarf production by 2."],["Fusion reaction by product, makes everything scale "," less."],["First metal, Mass per Brown dwarf lightly increased."],["Brittle earth metal, so is brittle increase to production. (","x to all Stars)"],["A new color, and a new boost to Mass gain that is based on current Dwarf Stars."],["Base for organics, boost from Red giants is now increased to the power of ",`.
Did you knew that Red giants are boosting Main-sequence Stars?`],["Most abundant uncombined Element in atmosphere of some Planets, also allows to have 2 extra levels of 'Star system'."],["An oxidizing agent, that will make everything scale even slower. ("," less)"],["Highly toxic and reactive, +12 to max level of 'Planetary system'."],["A noble 2x boost to Mass gain."],["Through leaching, get 1 extra level of 'Protoplanetary disk'."],[`Stars are inside you, as well Neutrons stars strength is now increased to the decimal logarithm.
That will make Neutron stars boost all Stars even better.`],["Has a great affinity towards oxygen and to decrease cost of all Stars by ","."],["Number is 14, group is 14, melts at 1414\xB0C and so is Mass gain increased by ","."],["One of the fundamentals of life and to make all of Stars boost Mass."],[`From hot area, to increase max level of 'Star system' by 1.
Research softcapped past 1e10.`],["Extremely reactive to extend max level of 'Planetary system', by another 27 levels."],[`Less noble boost, but Black holes effect scales a little better.
That will surely increase Main-sequence mass gain.`],["Don't forget about it and get a 3x boost to all Stars."],[`Get stronger with 1 extra level of 'Star system'.
Effect is weaker, after 5 levels.`],["A new color and a rare bonus of ^"," to Mass effect."],["New alloy allowing Red giants to be added into effective amount of Neutron stars."],["Catalyst for production of Elements. Black holes boost all Stars to the decimal logarithm."],["No corrosion, only ^"," boost to all Stars based on unspent Elements."],["Brittle element, but not the bonus - 1 more level in 'Star system'."],["Any further fusion will be an endothermic process. Gain 2x boost to all Stars, but what next?"],["While new Elements won't produce much Energy, this one can create 2 extra Strange quark for this Stage reset."],[`Slow to react, but gain extra Strange quarks for every new digit anyway.
(+`," for this reset)"]],effect:[null,null,.1,null,1.1,null,1.5,null,.05,null,null,null,null,1e3,1.4,null,null,null,null,null,null,1.1,null,null,.01,null,null,null,0],cost:[1e308,1e3,4e3,2e4,1e5,1e8,1e10,4e11,2e13,1e14,1e16,1e20,1e24,1e25,14e26,1e30,1e31,5e31,5e33,1e35,1e36,1e38,2e39,3e41,4e42,1e45,1e50,1e52,1e55]},strangenessInfo:[{description:[],effectText:[],effect:[],cost:[],scaling:[],max:[]},{description:["Stronger Discharge.","Cheaper Discharge.","Free Discharge.","Automatic Discarge.","More Particle Energy.","Better 'Tritium' effect.","Keep auto Structures.","More toggles.","Strange boost."],effectText:[["Base Discharge effect is now +1."],["Discharge goal scales slower. (-1)"],["Always have +1 bonus Discharge."],["Automatically Discharge upon spending upgrades or if reached next goal."],["Gain more Energy from creating Particles, +1."],["Research for improved 'Tritium' upgrade is now better. (+",")"],["Start with auto for ","."],["Unlock a new toggle. Also keep them on Stage reset."],["Unspend Strange quarks will boost this stage. (Stronger radiation)"]],effect:[null,null,null,null,null,.3,"Particles",null,null],cost:[1,1,2,3,4,1,2,2,8],scaling:[1.5,1,3,0,2,.25,2,3,0],max:[6,4,2,1,2,10,3,1,1]},{description:["More Moles.","Bigger Puddles.","More spread.","Cloud density.","Automatic Vaporization.","Keep auto Structures.","Longer max offline.","Longest max offline.","Strange boost."],effectText:[["Mole production increased by 2x."],["Puddles produce 2 times more."],[`Increase max level of some researches by +1.
Final level will instead unlock a new upgrade.`],["Gain more Clouds from Vaporization. (Affected by softcap)"],["Automatically Vaporize when reach certain amount."],["Start with auto for ","."],["Increase max offline time research level. Also keep them on Stage reset."],["Max offline time is now 2 times longer. (Additive)"],["Unspend Strange quarks will boost this stage. (Puddle production)"]],effect:[null,null,null,null,null,"Drops",null,null,null],cost:[1,2,2,1,3,2,1,8,6],scaling:[.2,.5,1.5,2,0,1,1.75,4,0],max:[9,6,3,3,1,5,4,2,1]},{description:["Accretion speed increase.","Intense weathering.","More levels.","Improved Satellites.","Automatic Rank.","Keep auto Structures.","Automatization for Upgrades.","Strange boost."],effectText:[["Accretion speed is 2 times faster. (Affected by softcap)"],["All Accretion structures that produce another structure now do it 2 times faster."],[`Some Rank researches receive extra Max level.
Final level will instead unlock a new upgrade.`],["Satellites now improve all Accretion structures."],["Automatically increase Rank when available."],["Start with auto for ","."],["Unlock automatization for Upgrades / Researches. Also keep them on Stage reset."],["Unspend Strange quarks will boost this stage. (Cheaper Accretion)"]],effect:[null,null,null,null,null,"Cosmic dust",null,null],cost:[1,1,3,4,3,2,5,6],scaling:[.75,1.5,2.5,0,0,1,3.5,0],max:[8,4,3,1,1,4,3,1]},{description:["Hotter Stars.","Cheaper Stars.","New Upgrade.","Main giants.","Remnants of past.","Automatic Collapse.","Keep auto Structures.","Daily gain.","Max gain.","Strange boost."],effectText:[["All Stars produce "," times more Elements."],["Stars are 2 times cheaper."],[`Unlock a new Upgrade.
First one is extra good.`],["25% of Brown dwarfs will turn into Red giants now."],["Elements will be preserved through Collapse reset."],["Stars will Collapse automatically."],["Start with auto for ","."],["Creates +1 Strange quarks per day, can claim only full one's only with export."],["Unclaimed Strange quarks max storage is now 1 day longer."],["Unspend Strange quarks will boost this stage. (All Stars production)"]],effect:[1.5,null,null,null,null,null,"Brown dwarfs",null,null,null],cost:[1,1,3,2,4,3,3,2,4,8],scaling:[1,1.5,1.5,2,0,0,1,2.5,0,0],max:[8,4,3,2,1,1,4,3,1,1]},{description:["Omnipresent reality.","Strange gain.","Auto Stage.","Bigger Nebulas.","Denser Clusters.","Gravitational bound.","Hypercompact stellar system.","Auto Structures.","New Milestones."],effectText:[["Gain abbility to be inside multiple stages at once. (Next one to always be inside is ",")"],["Gain 2 times more Strange quarks from Stage resets."],["Allows to auto switch Stage, has some special settings."],["Bigger Nebulas, more matter for Accretion. 'Jeans instability' upgrade is 3 times stronger."],["'Super star cluster' is now even bigger. Effect increased by 4."],["Intergalactic is no longer affected by lower Stage reset types."],["With this, a new Structure, can be created. Second level unlocks auto for it."],["Increase current level of auto Structures. It's the only way to do it."],["Unlock intergalactic Milestones."]],effect:["Microworld",null,null,null,null,null,null,null,null],cost:[33,10,100,5,10,50,1e3,75,20],scaling:[33,0,0,5,10,0,200,75,0],max:[3,1,1,9,9,1,2,2,1]}],lastUpgrade:[0,!1],lastResearch:[0,!1,"researches"],lastElement:[0,!1],milestonesInfo:[{description:[],needText:[],need:[],rewardText:[],quarks:[],unlock:[]},{description:["Endless Quarks.","Energized."],needText:[["Discharge with at least "," Quarks at once."],["Have max Energy reach ","."]],need:[[1e220,1e240,1e260,1e280,1e308],[4e4,46e3,52e3,58e3]],rewardText:[`Unknown structure, it doesn't belong to this Universe.
You can view it in stats.`,"Stars produce 1.5 times more Elements."],quarks:[[1,1,1,1,2],[1,1,1,2]],unlock:[5,3]},{description:["A Nebula of Drops.","Just a bigger Puddle."],needText:[["Vaporize "," Drops at once."],["Have at least "," Puddles at same time."]],need:[[1e30,1e35,1e40,1e45,1e50],[3e3,5e3,9e3,18e3]],rewardText:["Unlock a new Structure.",`Unknown structure, it doesn't belong to this Universe.
You can view it in stats.`],quarks:[[1,1,1,1,2],[1,2,2,3]],unlock:[3,4]},{description:["Cluster of Mass.","Satellites of Satellites."],needText:[["Have at least "," Mass at once."],["Have more Satellites than ","."]],need:[[1e30,1e35,1e40,1e46,1e52,1e58],[25,40,55,70,85]],rewardText:["Unlock a new Structure.",`Unknown structure, it doesn't belong to this Universe.
You can view it in stats.`],quarks:[[1,1,1,2,2,3],[1,2,2,3,3]],unlock:[3,5]},{description:["Just more Mass.","Biggest of all."],needText:[["Collapse to at least "," Main-sequence mass."],["Collapse to "," Black holes or more."]],need:[[9e3,15e3,22e3,3e4,4e4,6e4,1e5],[100,150,200,250,300]],rewardText:["Unlock a new Strangeness.",`Unknown structure, it doesn't belong to this Universe.
You can view it in stats.`],quarks:[[1,2,3,4,5,6,10],[1,2,3,4,5]],unlock:[3,5]},{description:["Light in the dark.","Greatest of the walls."],needText:[["Have self-made Stars count reach at least ","."],["Have "," Galaxies or more."]],need:[[1e3,1200,1400,1600,1800,2e3,2500],[1,2,5,10,15,20,25]],rewardText:["Intergalactic is always unlocked with Interstellar.",`Unknown structure, it doesn't belong to this Universe.
You can view it in stats.`],quarks:[[10,10,20,20,20,50,100],[100,100,200,400,400,1e3,1e3]],unlock:[4,7]}]},w=(e,t)=>{let s=[];for(let r=0;r<e;r++)t==="toggle"?s.push(!0):t==="toggleAuto"?s.push(!1):t==="upgrade"&&s.push(0);return s};Object.assign(n,{upgrades:[[],w(a.upgradesInfo[1].cost.length,"upgrade"),w(a.upgradesInfo[2].cost.length,"upgrade"),w(a.upgradesInfo[3].cost.length,"upgrade"),w(a.upgradesInfo[4].cost.length,"upgrade"),w(a.upgradesInfo[5].cost.length,"upgrade")],researches:[[],w(a.researchesInfo[1].cost.length,"upgrade"),w(a.researchesInfo[2].cost.length,"upgrade"),w(a.researchesInfo[3].cost.length,"upgrade"),w(a.researchesInfo[4].cost.length,"upgrade"),w(a.researchesInfo[5].cost.length,"upgrade")],researchesExtra:[[],[],w(a.researchesExtraInfo[2].cost.length,"upgrade"),w(a.researchesExtraInfo[3].cost.length,"upgrade"),w(a.researchesExtraInfo[4].cost.length,"upgrade"),w(a.researchesExtraInfo[5].cost.length,"upgrade")],researchesAuto:w(a.researchesAutoInfo.cost.length,"upgrade"),ASR:w(a.ASRInfo.cost.length,"upgrade"),elements:w(a.elementsInfo.cost.length,"upgrade"),strangeness:[[],w(a.strangenessInfo[1].cost.length,"upgrade"),w(a.strangenessInfo[2].cost.length,"upgrade"),w(a.strangenessInfo[3].cost.length,"upgrade"),w(a.strangenessInfo[4].cost.length,"upgrade"),w(a.strangenessInfo[5].cost.length,"upgrade")],milestones:[[],w(a.milestonesInfo[1].need.length,"upgrade"),w(a.milestonesInfo[2].need.length,"upgrade"),w(a.milestonesInfo[3].need.length,"upgrade"),w(a.milestonesInfo[4].need.length,"upgrade"),w(a.milestonesInfo[5].need.length,"upgrade")]});Object.assign(n.toggles,{normal:w(document.getElementsByClassName("toggle").length,"toggle"),buildings:[[],w(n.buildings[1].length,"toggleAuto"),w(n.buildings[2].length,"toggleAuto"),w(n.buildings[3].length,"toggleAuto"),w(n.buildings[4].length,"toggleAuto"),w(n.buildings[5].length,"toggleAuto")],auto:w(document.getElementsByClassName("toggleAuto").length,"toggleAuto")});var h=structuredClone(n),I=structuredClone(a),Le=()=>{let{stageInfo:e}=a;for(let t of e.activeAll){for(let s=0;s<a.upgradesInfo[t].cost.length;s++)n.upgrades[t][s]>1&&(n.upgrades[t][s]=1,console.warn(`Upgrade (${s+1} of ${t}) had an illegal value`));for(let s=0;s<a.researchesInfo[t].cost.length;s++)n.researches[t][s]>a.researchesInfo[t].max[s]&&(n.researches[t][s]=a.researchesInfo[t].max[s],console.warn(`Research (${s+1} of ${t}) had level above maxium`));if(t!==1)for(let s=0;s<a.researchesExtraInfo[t].cost.length;s++)n.researchesExtra[t][s]>a.researchesExtraInfo[t].max[s]&&(n.researchesExtra[t][s]=a.researchesExtraInfo[t].max[s],console.warn(`Extra research (${s+1} of ${t}) had level above maxium`))}for(let t=0;t<a.researchesAutoInfo.cost.length;t++)n.researchesAuto[t]>a.researchesAutoInfo.max[t]&&(n.researchesAuto[t]=a.researchesAutoInfo.max[t],console.warn(`Research (${t+1}) for automatization had level above maxium`));if(n.stage.true>=4)for(let t=1;t<a.elementsInfo.cost.length;t++)n.elements[t]>1&&(n.elements[t]=1,console.warn(`Element (${t}) had an illegal value`));if(n.stage.true>=5)for(let t=1;t<a.strangenessInfo.length;t++)for(let s=0;s<a.strangenessInfo[t].cost.length;s++)n.strangeness[t][s]>a.strangenessInfo[t].max[s]&&(n.strangeness[t][s]=a.strangenessInfo[t].max[s],console.warn(`Strangeness research (${s+1} of ${t+1}) had level above maxium`))},he=e=>{if(Object.hasOwn(e,"player")&&(e=e.player),!Object.hasOwn(e,"discharge"))throw new ReferenceError("This save file is missing important information and is most likely not from this game");let t=structuredClone(h);for(let s in h)Object.hasOwn(e,s)||(s==="version"?e.version="0.0.0":e[s]=t[s]);for(let s in e)Object.hasOwn(h,s)||delete e[s];if(e.version!==h.version){let{versionInfo:s}=a;if(s.log="Change log:",e.version==="0.0.0"){e.version="v0.0.1",s.log+=`
${e.version} - Stage 2 has properly came out; Structures and Energy has been reset to prevent save file corruption, sorry`;for(let r=1;r<=3;r++)e.buildings[r].true=0;e.discharge.energyCur=0,e.discharge.energyMax=0}if(e.version==="v0.0.1"&&(e.version="v0.0.2",s.log+=`
${e.version} - Added dynamic descriptions for upgrades, stats subtab, early Mobile device support`,e.stage.resets=e.stage.current===2?1:0),e.version==="v0.0.2"&&(e.version="v0.0.3",s.log+=`
${e.version} - Stage 3 is out, Stage 2 extended. Dynamic update for researches, new stats, full reset of toggles (sorry). Also max offline time is now 2 times bigger...`,e.toggles=t.toggles),e.version==="v0.0.3"&&(e.version="v0.0.4",s.log+=`
${e.version} - All Stage's are now quicker (because too many people complain, but there isn't much of a content currently...), save file size decreased, small visual changes`),e.version==="v0.0.4"&&(e.version="v0.0.5",s.log+=`
${e.version} - First part of Stage 4 is out, also small visual changes. Screen reader support updated (I forgot about it since Stage 2...). Also testing new formula for making structures and other minor stuff`),e.version==="v0.0.5"&&(e.version="v0.0.6",s.log+=`
${e.version} - Minor bug fixes, also transition for theme change fixed. Minor QoL, hotkeys, event system reworked, save file names and others`,e.events=[!1]),e.version==="v0.0.6"&&(e.version="v0.0.7",s.log+=`
${e.version} - Stage 1 full rework, Stage 4 finished and early Stage 5 (it will be really slow, until next versions). Mobile device support updated. More hotkeys. Self-made structures are now displayed outside of stat subtab`,e.stage.current===4&&(e.elements[26]=0),e.vaporization.input=10,e.collapse.inputM=4,e.collapse.inputS=2,e.stage.input=1),e.version==="v0.0.7"&&(e.version="v0.0.8",s.log+=`
${e.version} - Minor speed up to other Stage's, also new save file name options (I would recommend 'Fundamental, [stage], [date] [time]')`),e.version==="v0.0.8"){e.version="v0.0.9",s.log+=`
${e.version} - Stage 4 and 5 speed up, second part of Stage 5. Auto toggles reset. Some inside logic changes, also save file size increased... This version might be buggy`,e.stage.active=Math.min(e.stage.current,4);let r=e.stage.active,i=e.buildings;if(e.buildings=t.buildings,e.buildings[r]=i,e.buildings[r].length>h.buildings[r].length)for(let u=e.buildings[r].length;u>h.buildings[r].length;u--)e.buildings[r].splice(u-1,1);let l=e.upgrades;e.upgrades=t.upgrades,e.upgrades[r]=l;let c=e.researches;if(e.researches=t.researches,e.researches[r]=c,r!==1){let u=e.researchesExtra;e.researchesExtra=t.researchesExtra,e.researchesExtra[r]=u}e.strangeness.length<5&&e.strangeness.unshift([]),e.stage.export===void 0?e.stage.export=86400:e.stage.export*=86400,e.ASR[r]=e.researchesAuto.splice(1,1)[0]}if(e.version==="v0.0.9"){e.version="v0.1.0",s.log+=`
${e.version} - Stage 5 finished. As well some small bug fixes\\optimizations\\balances. More in a Discord. Due to balance some endgame upgrades/resources were reset`,e.upgrades[3].length===12&&e.upgrades[3].splice(8,0,0),e.strangeness[5][0]>0&&(e.strangeness[5][0]=0,e.strange[0].true+=3),e.strangeness[5][1]>0&&(e.strangeness[5][1]=0,e.strange[0].true+=24,e.stage.active=e.stage.current),e.strange[0].true>33&&(e.strange[0].total-=e.strange[0].true-33,e.strange[0].true=33);for(let r=1;r<e.buildings.length;r++)for(let i=0;i<e.buildings[r].length;i++)e.buildings[r][i].highest=e.buildings[r][i].current;e.collapse.show=[];for(let r=1;r<e.elements.length;r++)e.elements[r]===1&&e.collapse.show.push(r);e.collapse.disabled=!1}if(e.version!==h.version)throw new ReferenceError("Save file version is higher than game version");s.changed=!0}else a.versionInfo.changed=!1;for(let s=1;s<h.buildings.length;s++)if(!Array.isArray(e.buildings[s]))e.buildings[s]=t.buildings[s];else if(h.buildings[s].length>e.buildings[s].length)for(let r=e.buildings[s].length;r<h.buildings[s].length;r++)e.buildings[s][r]=Re({},h.buildings[s][r]);for(let s=1;s<h.upgrades.length;s++)if(!Array.isArray(e.upgrades[s]))e.upgrades[s]=t.upgrades[s];else if(h.upgrades[s].length>e.upgrades[s].length)for(let r=e.upgrades[s].length;r<h.upgrades[s].length;r++)e.upgrades[s][r]=0;for(let s=1;s<h.researches.length;s++)if(!Array.isArray(e.researches[s]))e.researches[s]=t.researches[s];else if(h.researches[s].length>e.researches[s].length)for(let r=e.researches[s].length;r<h.researches[s].length;r++)e.researches[s][r]=0;for(let s=2;s<h.researchesExtra.length;s++)if(!Array.isArray(e.researchesExtra[s]))e.researchesExtra[s]=t.researchesExtra[s];else if(h.researchesExtra[s].length>e.researchesExtra[s].length)for(let r=e.researchesExtra[s].length;r<h.researchesExtra[s].length;r++)e.researchesExtra[s][r]=0;if(h.researchesAuto.length>e.researchesAuto.length)for(let s=e.researchesAuto.length;s<h.researchesAuto.length;s++)e.researchesAuto[s]=0;if(h.ASR.length>e.ASR.length)for(let s=e.ASR.length;s<h.ASR.length;s++)e.ASR[s]=0;if(h.elements.length>e.elements.length)for(let s=e.elements.length;s<h.elements.length;s++)e.elements[s]=0;for(let s=0;s<h.strangeness.length;s++)if(!Array.isArray(e.strangeness[s]))e.strangeness[s]=t.strangeness[s];else if(h.strangeness[s].length>e.strangeness[s].length)for(let r=e.strangeness[s].length;r<h.strangeness[s].length;r++)e.strangeness[s][r]=0;for(let s=0;s<h.milestones.length;s++)if(!Array.isArray(e.milestones[s]))e.milestones[s]=t.milestones[s];else if(h.milestones[s].length>e.milestones[s].length)for(let r=e.milestones[s].length;r<h.milestones[s].length;r++)e.milestones[s][r]=0;if(h.toggles.normal.length>e.toggles.normal.length)for(let s=e.toggles.normal.length;s<h.toggles.normal.length;s++)e.toggles.normal[s]=h.toggles.normal[s];for(let s=1;s<h.toggles.buildings.length;s++)if(!Array.isArray(e.toggles.buildings[s]))e.toggles.buildings[s]=t.toggles.buildings[s];else if(h.toggles.buildings[s].length>e.toggles.buildings[s].length)for(let r=e.toggles.buildings[s].length;r<h.toggles.buildings[s].length;r++)e.toggles.buildings[s][r]=!1;if(h.toggles.auto.length>e.toggles.auto.length)for(let s=e.toggles.auto.length;s<h.toggles.auto.length;s++)e.toggles.auto[s]=!1;if(h.events.length>e.events.length)for(let s=e.events.length;s<h.events.length;s++)e.events[s]=!1;Object.assign(n,e)};var q=(e,t=null)=>{let s=!1,r=!1;switch(e){case"stage":s=!0,t==="Structures"?r=!0:t==="Advanced"&&(r=n.milestones[1][0]>=5||n.milestones[2][1]>=4||n.milestones[3][1]>=5||n.milestones[4][1]>=5||n.milestones[5][1]>=7);break;case"settings":s=!0,r=!0;break;case"research":(n.stage.true>1||n.discharge.current>=4)&&(s=!0,t==="Researches"?r=!0:t==="Elements"&&(r=(n.stage.active===4||n.stage.active===5)&&n.upgrades[4][1]===1));break;case"strangeness":n.strange[0].total>0&&(s=!0,r=!0);break;case"special":s=a.screenReader}return t!==null?r:s},Pe=(e,t)=>{if(e>=1){if(t===1||t===2)return!0;if(t===3){if(n.accretion.rank===0)return!1;if(e===1)return!0;if(e===2)return n.upgrades[3][2]===1;if(e===3)return n.upgrades[3][4]===1;if(e===4)return n.upgrades[3][6]===1}else if(t===4){if(n.collapse.mass<a.collapseInfo.unlockB[e])return!1;if(e===1||e===4)return!0;if(e===2)return n.upgrades[4][1]===1;if(e===3)return n.upgrades[4][2]===1}else if(t===5){if(n.collapse.mass<a.collapseInfo.unlockG[e])return!1;if(e===1)return n.milestones[2][0]>=3;if(e===2)return n.milestones[3][0]>=3;if(e===3)return n.strangeness[5][6]>=1}}return!1},se=(e,t,s)=>{if(t===3&&n.accretion.rank===0&&s!=="strangeness")return!1;switch(s){case"upgrades":if(t===1)return e>3?n.discharge.current>=3:!0;if(t===2)return!(e===6&&n.strangeness[2][2]<3);if(t===3)return e===8&&n.strangeness[3][2]<3?!1:n.accretion.rank>=a.accretionInfo.rankU[e];if(t===4)return e===3&&n.strangeness[4][2]<1?!1:n.collapse.mass>=a.collapseInfo.unlockU[e];if(t===5)return e===2?n.buildings[5][3].current>=1:!0;break;case"researches":if(t===1)return n.upgrades[1][3]===1;if(t===2)return!0;if(t===3)return n.accretion.rank>=a.accretionInfo.rankR[e];if(t===4)return e===3&&n.strangeness[4][2]<2?!1:n.collapse.mass>=a.collapseInfo.unlockR[e];if(t===5)return!0;break;case"researchesExtra":if(t===2)return!0;if(t===3)return n.accretion.rank>=a.accretionInfo.rankE[e];if(t===4)return!(e===1&&n.strangeness[4][2]<3);break;case"researchesAuto":return t===1&&n.upgrades[1][3]<1?!1:t===a.researchesAutoInfo.autoStage[e];case"ASR":return!(t===1&&n.upgrades[1][3]<1);case"elements":if(!a.stageInfo.activeAll.includes(4))return!1;if(e>=27)return n.upgrades[4][3]===1;if(e>=11)return n.collapse.mass>=10;if(e>=6)return n.upgrades[4][2]===1;if(e>=1)return n.upgrades[4][1]===1;break;case"strangeness":return(t===1||t===4)&&e<8||(t===2||t===3)&&e<7?!0:t===5&&e===6&&n.strangeness[5][5]<1?!1:n.milestones[4][0]>=3}return!1},re=(e,t,s)=>{switch(s){case"structures":if(t===5&&e===3)return!1;break;case"upgrades":if(t===2){if(e===1)return!1}else if(t===4){if(n.strangeness[4][4]>=1||n.collapse.mass>=10||e===0)return!1}else if(t===5&&e===2)return!1;break;case"researchesExtra":if(t===4&&e===0)return!1}return!0},B=(e,t)=>{let s=a.milestonesInfo[t].need[e][n.milestones[t][e]];if(s===void 0||n.strange[0].total<1||t===5&&n.strangeness[5][8]<1)return;let r=!1;t===1?e===0?r=n.buildings[1][0].current>=s:e===1&&(r=n.discharge.energyMax>=s):t===2?e===0?r=n.buildings[2][1].current>=s:e===1&&(r=n.buildings[2][2].current>=s):t===3?e===0?r=n.buildings[3][0].current>=s:e===1&&(r=n.buildings[3][4].current>s):t===4?e===0?r=n.collapse.mass>=s:e===1&&(r=n.collapse.stars[2]>=s):t===5&&(e===0?r=a.collapseInfo.trueStars>=s:e===1&&(r=n.buildings[5][3].current>=s)),r&&(n.strange[0].true+=a.milestonesInfo[t].quarks[e][n.milestones[t][e]],n.strange[0].total+=a.milestonesInfo[t].quarks[e][n.milestones[t][e]],n.milestones[t][e]++,S(e,t,"milestones"))};var pe=(e,t=!1)=>{let{theme:s}=a;t?(s.default=!0,localStorage.removeItem("theme")):(s.default=!1,s.stage=e,localStorage.setItem("theme",`${e}`)),be()},be=()=>{let{stage:e}=n,{stageInfo:t,theme:s}=a,r=document.body.style;s.default?(s.stage=e.active,o("currentTheme").textContent="Default"):o("currentTheme").textContent=t.word[s.stage],r.setProperty("--transition-all","1s"),r.setProperty("--transition-buttons","700ms");for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="",o(`${i}Cost`).style.color="",i!=="upgrade"&&(o(`${i}Text`).style.color="");switch(r.removeProperty("--background-color"),r.removeProperty("--window-color"),r.removeProperty("--window-border"),r.removeProperty("--footer-color"),r.removeProperty("--button-main-color"),r.removeProperty("--button-main-border"),r.removeProperty("--button-main-hover"),r.removeProperty("--building-can-buy"),r.removeProperty("--button-tab-border"),r.removeProperty("--button-tab-active"),r.removeProperty("--button-extra-hover"),r.removeProperty("--button-delete-color"),r.removeProperty("--button-delete-hover"),r.removeProperty("--input-border-color"),r.removeProperty("--input-text-color"),r.removeProperty("--button-text-color"),r.removeProperty("--main-text-color"),r.removeProperty("--white-text-color"),r.removeProperty("--blue-text-color"),r.removeProperty("--orange-text-color"),r.removeProperty("--gray-text-color"),r.removeProperty("--orchid-text-color"),r.removeProperty("--darkorchid-text-color"),r.removeProperty("--darkviolet-text-color"),r.removeProperty("--red-text-color"),r.removeProperty("--green-text-color"),r.removeProperty("--yellow-text-color"),o("dropStat").style.color="",o("waterStat").style.color="",s.stage){case 2:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="var(--green-text-color)",o(`${i}Cost`).style.color="var(--cyan-text-color)";r.setProperty("--background-color","#070026"),r.setProperty("--window-color","#000052"),r.setProperty("--window-border","blue"),r.setProperty("--footer-color","#0000db"),r.setProperty("--button-main-color","blue"),r.setProperty("--button-main-border","#427be1"),r.setProperty("--button-main-hover","#1515cf"),r.setProperty("--button-tab-border","#376ac5"),r.setProperty("--button-tab-active","#990000"),r.setProperty("--button-extra-hover","#2400d7"),r.setProperty("--input-border-color","#4747ff"),r.setProperty("--input-text-color","dodgerblue"),r.setProperty("--main-text-color","dodgerblue"),r.setProperty("--gray-text-color","#9b9b9b"),r.setProperty("--darkorchid-text-color","#c71bff"),r.setProperty("--darkviolet-text-color","#a973ff"),r.setProperty("--green-text-color","#82cb3b"),r.setProperty("--red-text-color","#f70000"),o("dropStat").style.color="#3099ff",o("waterStat").style.color="#3099ff";break;case 3:for(let i of["upgrade","research","element"])o(`${i}Cost`).style.color="var(--green-text-color)",i!=="upgrade"&&(o(`${i}Text`).style.color="var(--orange-text-color)");r.setProperty("--background-color","#000804"),r.setProperty("--window-color","#2e1200"),r.setProperty("--window-border","#31373e"),r.setProperty("--footer-color","#221a00"),r.setProperty("--button-main-color","#291344"),r.setProperty("--button-main-border","#404040"),r.setProperty("--button-main-hover","#361f52"),r.setProperty("--button-tab-border","#484848"),r.setProperty("--button-tab-active","#8d4c00"),r.setProperty("--button-extra-hover","#5a2100"),r.setProperty("--button-delete-color","#891313"),r.setProperty("--button-delete-hover","#a10a0a"),r.setProperty("--input-border-color","#8b4a00"),r.setProperty("--input-text-color","#e77e00"),r.setProperty("--main-text-color","#8f8f8f"),r.setProperty("--white-text-color","#dfdfdf"),r.setProperty("--orange-text-color","#f58600"),r.setProperty("--green-text-color","#00db00"),o("dropStat").style.color="#3099ff",o("waterStat").style.color="#3099ff";break;case 4:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="var(--green-text-color)",o(`${i}Cost`).style.color="var(--cyan-text-color)",i!=="upgrade"&&(o(`${i}Text`).style.color="var(--blue-text-color)");r.setProperty("--background-color","#140e04"),r.setProperty("--window-color","#4e0000"),r.setProperty("--window-border","#894800"),r.setProperty("--footer-color","#4e0505"),r.setProperty("--button-main-color","#6a3700"),r.setProperty("--button-main-border","#9f6700"),r.setProperty("--button-main-hover","#914b00"),r.setProperty("--building-can-buy","#007f95"),r.setProperty("--button-tab-border","#af5d00"),r.setProperty("--button-tab-active","#008297"),r.setProperty("--button-extra-hover","#605100"),r.setProperty("--button-delete-color","#8f0000"),r.setProperty("--button-delete-hover","#ad0000"),r.setProperty("--input-border-color","#008399"),r.setProperty("--input-text-color","#05c3c3"),r.setProperty("--button-text-color","#d9d900"),r.setProperty("--main-text-color","darkorange"),r.setProperty("--white-text-color","#e5e500"),r.setProperty("--blue-text-color","#2694ff"),r.setProperty("--gray-text-color","#8b8b8b"),r.setProperty("--darkorchid-text-color","#c71bff"),r.setProperty("--darkviolet-text-color","#9859ff"),r.setProperty("--red-text-color","red"),r.setProperty("--green-text-color","#00e600"),r.setProperty("--yellow-text-color","var(--green-text-color)");break;case 5:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="var(--green-text-color)",o(`${i}Cost`).style.color="var(--red-text-color)",i!=="upgrade"&&(o(`${i}Text`).style.color="var(--orange-text-color)");r.setProperty("--background-color","#060010"),r.setProperty("--window-color","#001d42"),r.setProperty("--window-border","#35466e"),r.setProperty("--footer-color","#320061"),r.setProperty("--button-main-color","#4a008f"),r.setProperty("--button-main-border","#8a0049"),r.setProperty("--button-main-hover","#6800d6"),r.setProperty("--building-can-buy","#8603ff"),r.setProperty("--button-tab-border","#9d0054"),r.setProperty("--button-tab-active","#8500ff"),r.setProperty("--button-extra-hover","#3b0080"),r.setProperty("--button-delete-color","#800000"),r.setProperty("--button-delete-hover","#9b1212"),r.setProperty("--input-border-color","#3656a1"),r.setProperty("--input-text-color","#6a88cd"),r.setProperty("--button-text-color","#fc9cfc"),r.setProperty("--main-text-color","#c000ff"),r.setProperty("--white-text-color","#ff79ff"),r.setProperty("--orchid-text-color","#ff00f4"),r.setProperty("--darkorchid-text-color","#c000ff"),r.setProperty("--darkviolet-text-color","#9f52ff"),r.setProperty("--yellow-text-color","var(--darkviolet-text-color)")}setTimeout(()=>{r.removeProperty("--transition-all"),r.removeProperty("--transition-buttons")},1e3)},E=e=>{Ke(e)},Ke=async e=>await new Promise(t=>{let s=o("blocker");if(s.style.display===""){console.warn("Wasn't able to show another window (alert)"),t();return}o("alertText").textContent=e;let r=o("confirmBtn");s.style.display="",r.focus();let i=async c=>{(c.key==="Escape"||c.key==="Enter")&&l()},l=()=>{s.style.display="none",document.removeEventListener("keydown",i),r.removeEventListener("click",l),t()};document.addEventListener("keydown",i),r.addEventListener("click",l)}),A=async e=>await new Promise(t=>{let s=o("blocker");if(s.style.display===""){console.warn("Wasn't able to show another window (confirm)"),t(!1);return}o("alertText").textContent=e;let r=o("cancelBtn"),i=o("confirmBtn");s.style.display="",r.style.display="",i.focus();let l=()=>{f(!0)},c=()=>{f(!1)},u=g=>{g.key==="Escape"?c():g.key==="Enter"&&l()},f=g=>{s.style.display="none",r.style.display="none",document.removeEventListener("keydown",u),i.removeEventListener("click",l),r.removeEventListener("click",c),t(g)};document.addEventListener("keydown",u),i.addEventListener("click",l),r.addEventListener("click",c)}),ye=async e=>await new Promise(t=>{let s=o("blocker");if(s.style.display===""){console.warn("Wasn't able to show another window (prompt)"),t(null);return}o("alertText").textContent=e;let r=o("inputArea"),i=o("cancelBtn"),l=o("confirmBtn");r.value="",s.style.display="",i.style.display="",r.style.display="",r.focus();let c=()=>{g(r.value)},u=()=>{g(null)},f=y=>{y.key==="Escape"?u():y.key==="Enter"&&c()},g=y=>{s.style.display="none",i.style.display="none",r.style.display="none",document.removeEventListener("keydown",f),l.removeEventListener("click",c),i.removeEventListener("click",u),t(y)};document.addEventListener("keydown",f),l.addEventListener("click",c),i.addEventListener("click",u)}),ne=()=>{let e=o("footer"),t=o("footerColor"),s=o("hideToggle"),r=o("hideText"),i=o("hideArrow");a.footer=!a.footer,s.removeEventListener("click",ne),a.footer?(t.style.display="",i.style.transform="",e.style.animation="hide 1s forwards reverse",i.style.animation="rotate 1s forwards reverse",r.textContent="Hide"):(e.style.animation="hide 1s backwards",i.style.animation="rotate 1s backwards",r.textContent="Show",setTimeout(()=>{t.style.display="none",i.style.transform="rotate(180deg)"},1e3)),setTimeout(()=>{e.style.animation="",i.style.animation="",s.addEventListener("click",ne)},1e3)},ae=(e=!1)=>{var r;let t=Boolean((r=localStorage.getItem("mobile device"))!=null?r:!1),s=o("mobileDeviceToggle");e&&(t=!t),t?(s.textContent="ON",s.style.color="var(--red-text-color)",s.style.borderColor="crimson",localStorage.setItem("mobile device","true"),a.mobileDevice=!0,e&&E(`For full support please refresh the page. This will add on touch start check upgrade and touch end create an upgrade.
(For non mobile device this will cause issues)`)):(s.textContent="OFF",s.style.color="",s.style.borderColor="",localStorage.removeItem("mobile device"),a.mobileDevice=!1)},z=(e=!1,t="toggle",s="building")=>{var r;switch(t){case"toggle":{let i=e,l=Boolean((r=localStorage.getItem("screen reader"))!=null?r:!1),c=o("screenReaderToggle");i&&(l=!l),l?(c.textContent="ON",c.style.color="var(--red-text-color)",c.style.borderColor="crimson",localStorage.setItem("screen reader","true"),a.screenReader=!0,s==="reload"&&(n.toggles.shop.strict=!1),G("soft"),i&&E(`You will get: focus event on upgrades to get description (Refresh page to get it, also I need feedback on it), special tab to check progress and more.
(For non screen readers this will cause issues)`)):(c.textContent="OFF",c.style.color="",c.style.borderColor="",localStorage.removeItem("screen reader"),a.screenReader=!1);break}case"button":{let i=e,l=o("invisibleBought");if(s==="building"){let{buildings:c}=n,{buildingsInfo:u}=a,f=n.stage.active,g=i-1;(f===4||f===5)&&(g=0),i===0?l.textContent=`You have ${d(c[f][0].current)} ${u.name[f][0]}`:l.textContent=`You have ${d(c[f][i].current)} ${u.name[f][i]}${c[f][i].current!==c[f][i].true?`, out of them ${d(c[f][i].true,0)} are self-made ones`:""}, they are ${u.type[f][i]==="producing"?`producing ${d(u.producing[f][i])} ${u.name[f][g]} per second`:`improving production of ${u.name[f][g]} by ${d(u.producing[f][i])}`}${n.ASR[f]>=i?`, auto is ${n.toggles.buildings[f][i]?"on":"off"}`:""}`}else s==="resource"&&(i===1?l.textContent=`You have ${d(n.discharge.energyCur)} Energy${n.upgrades[1][3]===1?`, next discharge goal is ${d(a.dischargeInfo.next)} Energy, you reached goal ${d(n.discharge.current,0)} times`:""}${n.strangeness[1][2]>=1?`, you also have +${d(n.strangeness[1][2],0)} free goals.`:""}`:i===2?l.textContent=`You have ${d(n.vaporization.clouds)} Clouds${a.vaporizationInfo.get>1?`, you can get +${d(a.vaporizationInfo.get)} if you reset now`:""}`:i===4?l.textContent=`You have ${d(n.collapse.mass)} Mass${a.collapseInfo.newMass>=n.collapse.mass?`, you can get +${d(a.collapseInfo.newMass-n.collapse.mass)} if you reset now`:""}${n.researchesExtra[4][0]>=1?`, also ${d(a.collapseInfo.starCheck[0],0)} Red giants`:""}${n.researchesExtra[4][0]>=2?`,  ${d(a.collapseInfo.starCheck[1],0)} Neutron stars`:""}${n.researchesExtra[4][0]>=3?` and also ${d(a.collapseInfo.starCheck[2],0)} Black holes`:""}`:i===0&&(l.textContent=`You have ${d(n.strange[0].true,0)} Strange quarks${a.strangeInfo.stageBoost[n.stage.active]!==null?` they are boosting production of current stage by ${d(a.strangeInfo.stageBoost[n.stage.active])}`:""}, you will gain ${d(a.strangeInfo.stageGain+(n.stage.active>=4&&a.strangeInfo.extraGain,0))} on Stage reset`))}}},te=(e=!1,t=!1)=>{var u;let s=document.body.style,r=o("customFontSize"),i=o("fontSizeToggle"),l=(u=Boolean(localStorage.getItem("enableCustomFontSize")))!=null?u:!1,c=localStorage.getItem("fontSize");e&&(l=!l),l?((c===null||Number(c)<10||Number(c)>32||t)&&(c=`${Math.min(Math.max(Math.trunc(Number(r.value)*10)/10,10),32)}`,localStorage.setItem("fontSize",c)),s.setProperty("--font-size",`${c}px`),r.value=c,localStorage.setItem("enableCustomFontSize","true"),i.textContent="ON",i.style.color="",i.style.borderColor=""):(s.removeProperty("--font-size"),localStorage.removeItem("fontSize"),localStorage.removeItem("enableCustomFontSize"),i.textContent="OFF",i.style.color="var(--red-text-color)",i.style.borderColor="crimson")},ve=e=>{let t=e?o("decimalPoint"):o("thousandSeparator");if(![".",","," ","_","^",'"',"'","`","|"].includes(t.value)||e&&(n.separator[0]===t.value||t.value.length===0)||!e&&n.separator[1]===t.value){t.value=e?".":"";return}e?n.separator[1]=t.value:n.separator[0]=t.value},we=(e=!1)=>{let t=_("statFoot");e&&(localStorage.getItem("textMove")===null?localStorage.setItem("textMove","false"):localStorage.removeItem("textMove"));for(let s of t)s.classList.contains("noMove")?s.classList.remove("noMove"):s.classList.add("noMove")},Y=(e,t)=>{if(o("blocker").style.display!=="")switch(n.events[t]=!0,e){case 0:E(`Since you can't get back Energy that you had spent, you will need to Discharge anytime you spend it.
But for the first time, you can keep your Energy`),n.stage.true===1&&(n.discharge.energyCur+=800);break;case 1:E("Cloud density is too high... Getting more will be harder now");break;case 2:E("Getting more Mass, seems impossible. We need to change our approach, next Rank is going to be Softcapped"),n.accretion.rank===4&&(a.accretionInfo.rankCost[4]=5e29,o("rankReset").textContent="Next rank is 5e29 Mass");break;case 3:E(`Any Collapse reset from now on will give even more rewards, but can't be done, unless can increase any of them.
Rewards effects are unknown, but some of the Elements might reveal information about it.
(Just like Main-sequence mass is provides boost for all Stars)`);break;case 4:E("There doesn't seem to be anything here. Let's try going back to start and find what is missing");break;case 5:E(`Galaxy will boost production of Nebulas and Star clusters, but for the cost of every other structure/upgrade.
Elements are disabled until can afford them again (if you have 'Remnants of past')`)}};var W=(e,t)=>{if(e!=="stage"){let{buildings:s}=n;if(e==="discharge"?n.discharge.energyCur=0:e==="galaxy"&&(n.collapse.disabled=!0,n.collapse.mass=.01235,n.collapse.stars=[0,0,0]),e==="collapse"&&n.strangeness[4][4]<1||e==="galaxy")for(let r=1;r<n.elements.length;r++)n.elements[r]=0,L(r,4,"elements");for(let r of t){e:{s[r][0].current=h.buildings[r][0].current,s[r][0].total=h.buildings[r][0].total;for(let i=1;i<h.buildings[r].length;i++)!re(i,r,"structures")||(s[r][i].current=0,s[r][i].true=0,s[r][i].total=0);if(e==="discharge")break e;for(let i=0;i<h.upgrades[r].length;i++)!re(i,r,"upgrades")||(n.upgrades[r][i]=0,L(i,r,"upgrades"));if(e==="vaporization")break e;for(let i=0;i<h.researches[r].length;i++)n.researches[r][i]=0,L(i,r,"researches");if(e==="rank")break e;for(let i=0;i<h.researchesExtra[r].length;i++)!re(i,r,"researchesExtra")||(n.researchesExtra[r][i]=0,L(i,r,"researchesExtra"))}for(let i=1;i<h.buildings[r].length;i++)R(i,r);if(e!=="discharge"&&(x("upgrades",r),e!=="vaporization")){for(let i=0;i<h.researches[r].length;i++)O(i,r,"researches");if(x("researches",r),e!=="rank"){for(let i=0;i<h.researchesExtra[r].length;i++)O(i,r,"researchesExtra");x("researchesExtra",r)}}}V()}else for(let s of t){for(let r=1;r<h.buildings[s].length;r++)n.buildings[s][r].current=0,n.buildings[s][r].true=0,n.buildings[s][r].total=0,n.buildings[s][r].trueTotal=0;n.buildings[s][0].current=h.buildings[s][0].current,n.buildings[s][0].total=h.buildings[s][0].total,n.buildings[s][0].trueTotal=h.buildings[s][0].trueTotal,n.upgrades[s]=[...h.upgrades[s]],n.researches[s]=[...h.researches[s]],n.researchesExtra[s]=[...h.researchesExtra[s]],s===1?(n.discharge.energyCur=0,n.discharge.energyMax=0,n.discharge.current=0):s===2?n.vaporization.clouds=1:s===3?(n.accretion.rank=0,n.buildings[3][0].current=597e25):s===4&&(n.collapse.mass=.01235,n.collapse.stars=[0,0,0],n.collapse.show=[],n.collapse.disabled=!1,n.elements=[...h.elements]),n.ASR[s]=n.strangeness[s][[6,5,5,6,7][s-1]],s===5&&n.strangeness[5][6]>=2&&n.ASR[5]++,k(0,s,"ASR");for(let r=1;r<h.buildings[s].length;r++)R(r,s);for(let r=0;r<h.researches[s].length;r++)k(r,s,"researches");for(let r=0;r<h.researchesExtra[s].length;r++)k(r,s,"researchesExtra");x("upgrades",s),x("researches",s),x("researchesExtra",s)}U(),F()};var U=()=>{let{stage:e,buildings:t,strange:s,upgrades:r,researches:i,researchesExtra:l,strangeness:c}=n,{buildingsInfo:u,strangeInfo:f,upgradesInfo:g,researchesInfo:y,researchesExtraInfo:m}=a,v=a.stageInfo.activeAll;if(v.includes(1)){let{dischargeInfo:p}=a,{discharge:b}=n;p.base=4+c[1][0],g[1].effect[3]=p.base*2**i[1][4],g[1].effect[5]=Math.round((1.02+.01*i[1][1])*100)/100;let M=g[1].effect[3]**(b.current+c[1][2]);u.producing[1][3]=.3*t[1][3].current*M,r[1][5]===1&&(u.producing[1][3]*=g[1].effect[5]**t[1][3].true),y[1].effect[2]=12+c[1][5]*3/10,f.stageBoost[1]=c[1][8]>=1?(s[0].true+1)**.26:null,u.producing[1][3]>1?(g[1].effect[6]=Math.log(u.producing[1][3])*y[1].effect[2]**i[1][2],r[1][7]===1&&(g[1].effect[6]*=b.energyCur),i[1][5]>=1&&(g[1].effect[6]*=(b.current+c[1][2]+1)*i[1][5]),f.stageBoost[1]!==null&&(g[1].effect[6]*=f.stageBoost[1])):g[1].effect[6]=0,u.producing[1][2]=.4*t[1][2].current*M,r[1][2]===1&&(u.producing[1][2]*=5),r[1][5]===1&&(u.producing[1][2]*=g[1].effect[5]**t[1][2].true),u.producing[1][1]=.5*t[1][1].current*M,r[1][1]===1&&(u.producing[1][1]*=10),r[1][5]===1&&(u.producing[1][1]*=g[1].effect[5]**t[1][1].true),p.step=10-i[1][3]-c[1][1],p.next=Math.round(p.step**n.discharge.current),b.energyMax<b.energyCur&&(b.energyMax=b.energyCur,B(1,1))}if(v.includes(2)){let{vaporizationInfo:p}=a,{vaporization:b}=n;if(u.producing[2][5]=2*t[2][5].current,m[2].effect[2]=b.clouds**.1,l[2][2]>=1&&(u.producing[2][5]*=m[2].effect[2]),r[2][6]===1&&(t[2][4].current=t[2][4].true+t[2][5].current),u.producing[2][4]=2*t[2][4].current,u.producing[2][5]>1&&(u.producing[2][4]*=u.producing[2][5]),g[2].effect[5]=1+i[2][5],r[2][5]===1&&(t[2][3].current=t[2][3].true+t[2][4].current*g[2].effect[5]),u.producing[2][3]=2*t[2][3].current,u.producing[2][4]>1&&(u.producing[2][3]*=u.producing[2][4]),g[2].effect[4]=1+i[2][4],r[2][4]===1&&(t[2][2].current=t[2][2].true+t[2][3].current*g[2].effect[4]),u.producing[2][2]=3*t[2][2].current*b.clouds,g[2].effect[2]=.02+i[2][2]*.02,g[2].effect[3]=.02+i[2][3]*.03,f.stageBoost[2]=c[2][8]>=1?(s[0].true+1)**.32:null,r[2][2]===1&&i[2][1]>=2?u.producing[2][2]*=t[2][0].total**g[2].effect[2]:r[2][2]===1&&(u.producing[2][2]*=t[2][0].current**g[2].effect[2]),r[2][3]===1&&i[2][1]>=1?u.producing[2][2]*=t[2][1].total**g[2].effect[3]:r[2][3]===1&&(u.producing[2][2]*=t[2][1].current**g[2].effect[3]),u.producing[2][3]>1&&(u.producing[2][2]*=u.producing[2][3]),c[2][1]>=1&&(u.producing[2][2]*=2**c[2][1]),f.stageBoost[2]!==null&&(u.producing[2][2]*=f.stageBoost[2]),m[2].effect[1]=10**(l[2][1]-1),t[2][0].current<.0028&&t[2][1].current===0&&(t[2][0].current=.0028),t[2][1].current<t[2][1].true&&(t[2][1].true=Math.trunc(t[2][1].current),R(1,2)),u.producing[2][1]=6e-4*t[2][1].current,i[2][0]>=1&&(u.producing[2][1]*=3**i[2][0]),r[2][0]===1&&(u.producing[2][1]*=1.1**t[2][1].true),c[2][0]>=1&&(u.producing[2][1]*=2**c[2][0]),p.get=(l[2][0]===0?t[2][1].current:t[2][1].total)/1e10,c[2][3]>=1&&(p.get*=3**c[2][3]),p.get>1){let M=p.get**.6+b.clouds,T=M-1e4>0?Math.max(1e4-b.clouds,1):1;p.get=T+(p.get-T)**(M>1e4?.36:.6)}}if(v.includes(3)){let{accretion:p}=n;f.stageBoost[3]=c[3][7]>=1?(s[0].true+1)**1.5:null,u.producing[3][4]=(r[3][12]===1?1.14:1.1)**t[3][4].current,u.producing[3][3]=.1*t[3][3].current,r[3][4]===1&&l[3][2]>0&&(u.producing[3][3]*=2),r[3][8]===1&&(u.producing[3][3]*=1.005**t[3][3].current),u.producing[3][4]>1&&(u.producing[3][3]*=u.producing[3][4]),c[3][1]>=1&&(u.producing[3][3]*=2**c[3][1]),u.producing[3][2]=.1*t[3][2].current,y[3].effect[5]=t[3][0].current**(.025*i[3][5]),r[3][3]===1&&(u.producing[3][2]*=1.02**t[3][2].true),r[3][4]===1&&(u.producing[3][2]*=4),i[3][2]>=1&&(u.producing[3][2]*=3**i[3][2]),i[3][4]>=1&&(u.producing[3][2]*=5**i[3][4]),i[3][5]>=1&&(u.producing[3][2]*=y[3].effect[5]),c[3][1]>=1&&(u.producing[3][2]*=2**c[3][1]),c[3][3]>=1&&(u.producing[3][2]*=u.producing[3][4]),u.producing[3][1]=1e-19*t[3][1].current,g[3].effect[0]=1.01+.01*i[3][1],g[3].effect[1]=t[3][1].current**(.05+.01*l[3][3]),g[3].effect[7]=2*1.5**i[3][6],g[3].effect[10]=10*3**i[3][7],m[3].effect[0]=1.1**l[3][0],m[3].effect[1]=(1+.1*l[3][1])**p.rank,r[3][0]===1&&(u.producing[3][1]*=g[3].effect[0]**t[3][1].true),r[3][1]===1&&(u.producing[3][1]*=g[3].effect[1]),r[3][2]===1&&(u.producing[3][1]*=2),r[3][5]===1&&(u.producing[3][1]*=3),r[3][7]===1&&(u.producing[3][1]*=g[3].effect[7]),r[3][9]===1&&(u.producing[3][1]*=2),r[3][10]===1&&(u.producing[3][1]*=g[3].effect[10]),i[3][0]>=1&&(u.producing[3][1]*=3**i[3][0]),i[3][3]>=1&&(u.producing[3][1]*=2**i[3][3]),l[3][0]>=1&&(u.producing[3][1]*=m[3].effect[0]),l[3][1]>=1&&(u.producing[3][1]*=m[3].effect[1]),c[3][0]>=1&&(u.producing[3][1]*=2**c[3][0]),c[3][3]>=1&&(u.producing[3][1]*=u.producing[3][4]),p.rank>=5&&(u.producing[3][1]**=u.producing[3][1]<1?1.1:.8)}if(v.includes(4)){let{collapse:p,elements:b}=n,{collapseInfo:M}=a;y[4].effect[0]=(1.1+.2*i[4][2])**i[4][0],y[4].effect[1]=(1+.01*Math.min(i[4][1],5)+(i[4][1]>5?.005*(i[4][1]-5):0))**(t[4][1].true+t[4][2].true+t[4][3].true+t[4][4].true),f.stageBoost[4]=c[4][9]>=1?(s[0].true+1)**.3:null,y[4].effect[1]>1e10&&(y[4].effect[1]=1e10+(y[4].effect[1]-1e10)**.7);let T=p.stars[0]+1;b[6]===1&&(T**=1.5);let D=(p.stars[1]+(b[22]===1?p.stars[0]+1:1))**.5;b[12]===1&&p.stars[1]>10&&(D*=Math.log10(p.stars[1]+(b[22]===1?p.stars[0]:0)));let J=p.stars[2]>=1?(p.stars[2]+1)/Math.log10(p.stars[2]+(b[18]===1?9:99)):1,P=p.mass**(b[21]===1?1.1:1)*y[4].effect[0]*y[4].effect[1]*D;b[4]===1&&(P*=1.1),b[19]===1&&(P*=3),b[23]===1&&p.stars[2]>10&&(P*=Math.log10(p.stars[2])),b[24]===1&&(P*=t[4][0].current**.01),b[26]===1&&(P*=2),c[4][0]>=1&&(P*=1.5**c[4][0]),n.milestones[1][1]>=3&&(P*=1.5),f.stageBoost[4]!==null&&(P*=f.stageBoost[4]),u.producing[4][4]=2e9*t[4][4].current*P,u.producing[4][3]=25e6*t[4][3].current*P,u.producing[4][2]=300*t[4][2].current*T*P,i[4][3]>=1&&(u.producing[4][2]*=10),l[4][1]>=1&&(u.producing[4][2]*=(p.stars[0]+1)**.5),u.producing[4][1]=22*t[4][1].current*P,b[1]===1&&(u.producing[4][1]*=2);let ee=.004;b[3]===1&&(ee+=.001),b[5]===1&&(ee+=15e-5*t[4][1].true),b[10]===1&&(ee*=2),b[14]===1&&(ee*=1.4),M.newMass=(t[4][1].true+(b[15]===1?t[4][2].true+t[4][3].true+t[4][4].true:0))*ee*J,M.starCheck[0]=Math.max(t[4][2].true+Math.trunc(t[4][1].true*c[4][3]/4)-p.stars[0],0),M.starCheck[1]=Math.max(t[4][3].true-p.stars[1],0),M.starCheck[2]=Math.max(t[4][4].true-p.stars[2],0)}if(v.includes(5)){u.producing[5][3]=10**t[5][3].current,u.producing[5][2]=1.5*t[5][2].current,g[5].effect[1]=6,c[5][4]>=1&&(g[5].effect[1]*=4**c[5][4]),r[5][1]===1&&(u.producing[5][2]*=g[5].effect[1]),i[5][1]>=1&&(u.producing[5][2]*=3**i[5][1]),u.producing[5][3]>1&&(u.producing[5][2]*=u.producing[5][3]),u.producing[5][1]=1*t[5][1].current,g[5].effect[0]=4,c[5][3]>=1&&(g[5].effect[0]*=3**c[5][3]),r[5][0]===1&&(u.producing[5][1]*=g[5].effect[0]),u.producing[5][3]>1&&(u.producing[5][1]*=u.producing[5][3]);let p=u.producing[5][2];p>1&&(u.producing[4][4]*=p,i[5][1]>=2&&(u.producing[4][3]*=p/3),i[5][1]>=3&&(u.producing[4][2]*=p/9),i[5][1]>=4&&(u.producing[4][1]*=p/27)),a.collapseInfo.trueStars=t[4][1].true+t[4][2].true+t[4][3].true+t[4][4].true,t[5][0].current=t[4][1].current+t[4][2].current+t[4][3].current+t[4][4].current,t[5][0].total=t[4][1].total+t[4][2].total+t[4][3].total+t[4][4].total,t[5][0].trueTotal=t[4][1].trueTotal+t[4][2].trueTotal+t[4][3].trueTotal+t[4][4].trueTotal}if(e.true>=5&&(f.stageGain=1,c[5][1]>=1&&(f.stageGain*=2),f.extraGain=0,e.current>=5)){let{elementsInfo:p}=a,{elements:b}=n;p.effect[28]=Math.max(Math.log10(t[4][0].current)-50,0),r[5][2]===1&&(p.effect[28]**=1.5),p.effect[28]=Math.trunc(p.effect[28]),b[27]===1&&(f.extraGain+=2),b[28]===1&&(f.extraGain+=p.effect[28]),c[5][1]>=1&&(f.extraGain*=2)}for(let p of v)for(let b=0;b<t[p].length;b++)t[p][b].current>t[p][b].highest&&(t[p][b].highest=t[p][b].current)},Q=(e,t=n.stage.active,s=!1)=>{if(!Pe(e,t))return;let{buildingsInfo:r}=a;if(!isFinite(r.cost[t][e])){a.screenReader&&!s&&(o("invisibleBought").textContent=`Coudn't make '${r.name[t][e]}', because cost is infinity`);return}let{buildings:i}=n,l=t===5&&e===3,c=e-1;t===2&&e!==1?c=1:t>=3&&(c=0);let u=t===5?4:t,f;l?f=n.collapse.mass:f=i[u][c].current;let g=2;if((i[t][e].true===0||l||f>1e300)&&(g=1),f/(s?g:1)<r.cost[t][e]){a.screenReader&&!s&&(o("invisibleBought").textContent=`Coudn't make '${r.name[t][e]}', because didn't had enough of '${l?"Main-sequence mass":r.name[u][c]}'`);return}let{shop:y}=n.toggles,m=s?-1:n.researchesAuto[0]===0?1:y.howMany,v=t===1;if(v&&e===1&&(a.dischargeInfo.energyType[e]=I.dischargeInfo.energyType[e]+1*n.strangeness[1][4]),m!==1&&n.researchesAuto[0]>0){let p=f/(s?g:1),b=r.startCost[t][e]*((r.increase[t][e]**i[t][e].true-1)/(r.increase[t][e]-1)),M=Math.trunc(Math.log((b+p)*(r.increase[t][e]-1)/r.startCost[t][e]+1)/Math.log(r.increase[t][e]))-i[t][e].true;if(y.strict&&M<m&&m!==-1)return;let T=m!==-1?Math.min(M,m):M,D=r.startCost[t][e]*((r.increase[t][e]**(T+i[t][e].true)-1)/(r.increase[t][e]-1))-b;if(!isFinite(D)||!isFinite(T)){let J=r.cost[t][e];for(T=0,D=0;p>=J;T++)D+=J,p-=J,J*=r.increase[t][e]}f-=D,i[t][e].current+=T,i[t][e].true+=T,i[t][e].total+=T,i[t][e].trueTotal+=T,v&&(n.discharge.energyCur+=a.dischargeInfo.energyType[e]*T),a.screenReader&&!s&&(o("invisibleBought").textContent=`Maded ${d(T)} '${r.name[t][e]}'${v?`, gained ${d(a.dischargeInfo.energyType[e]*T)} Energy`:""}`)}else f-=r.cost[t][e],i[t][e].current++,i[t][e].true++,i[t][e].total++,i[t][e].trueTotal++,v&&(n.discharge.energyCur+=a.dischargeInfo.energyType[e]),a.screenReader&&(o("invisibleBought").textContent=`Made 1 '${r.name[t][e]}'${v?`, gained ${d(a.dischargeInfo.energyType[e])} Energy`:""}`);l?W("galaxy",[4,5]):(i[u][c].current=f,R(e,t),U(),F()),t===2?e!==1&&B(1,2):t===3?e===4&&B(1,3):t===4?B(0,5):t===5&&e===3&&(B(1,5),n.events[2]||Y(5,2))},R=(e,t)=>{var i;let{buildings:s}=n,{buildingsInfo:r}=a;t===1?(a.upgradesInfo[1].effect[4]=(20+n.researches[1][0])/100,r.increase[1][e]=Math.round((1.4-(n.upgrades[1][4]===1?a.upgradesInfo[1].effect[4]:0))*100)/100,e===1&&(r.startCost[1][1]=I.buildingsInfo.startCost[1][1]/(n.upgrades[1][0]===1?10:1))):t===3?(r.startCost[3][e]=I.buildingsInfo.startCost[3][e]/((i=a.strangeInfo.stageBoost[3])!=null?i:1),e===4&&(r.increase[3][4]=n.upgrades[3][11]===1?5:10)):t===4&&(r.increase[4][e]=Math.round((1.4+.15*(e-1)-(n.elements[2]===1?.1:0)-(n.elements[8]===1?.05:0))*100)/100,r.startCost[4][e]=I.buildingsInfo.startCost[4][e]/(n.elements[13]===1?1e3:1)/2**n.strangeness[4][1]),r.cost[t][e]=r.startCost[t][e]*r.increase[t][e]**s[t][e].true},X=(e,t,s)=>{let{buildings:r}=n,{buildingsInfo:i}=a,l;if(t===1&&e===3?l=a.upgradesInfo[1].effect[6]*s:t===5?l=i.producing[5][1]*s:(l=i.producing[t][e+1]*s,t===2&&e===1&&n.researchesExtra[2][1]>=1&&(l+=s*a.researchesExtraInfo[2].effect[1])),l===0)return;let c=t;t===4?e=0:t===5&&(e>0&&(l/=4*e),c=4,e++);let u=r[c][e].current+l;r[c][e].current=isFinite(u)?u:1e308,u=r[c][e].total+l,r[c][e].total=isFinite(u)?u:1e308,u=r[c][e].trueTotal+l,r[c][e].trueTotal=isFinite(u)?u:1e308,t===3&&(n.accretion.rank<5&&r[3][0].current+l>1e30&&(r[3][0].current=1e30),e===0&&B(0,3))},$=(e,t,s,r=!1)=>{if(t==="auto"&&(t=n.stage.active),s==="ASR"&&(e=t),!r&&!se(e,t,s))return!1;let i;if(s==="strangeness"?i=n.strange[0].true:t===1?i=n.discharge.energyCur:t===2?i=n.buildings[2][1].current:t===3?i=n.buildings[3][0].current:i=n.buildings[4][0].current,s==="upgrades"||s==="researches"||s==="researchesExtra"){let l=s+"Info";if(i<a[l][t].cost[e])return!1;if(s==="upgrades"){if(n[s][t][e]===1)return!1}else if(n[s][t][e]===a[l][t].max[e])return!1;if(n[s][t][e]++,i-=a[l][t].cost[e],s==="upgrades")if(t===1){if(e===0)R(1,1);else if(e===4){n.events[0]||Y(0,0);for(let c=1;c<a.buildingsInfo.name[1].length;c++)R(c,1)}}else t===3&&e===11&&R(4,3);else if(s==="researches")if(t===1&&e===0)for(let c=1;c<a.buildingsInfo.name[1].length;c++)R(c,1);else t===4&&e===2&&k(0,4,"researches");a.screenReader&&!r&&(s==="upgrades"?o("invisibleBought").textContent=`You have created upgrade '${a[l][t].description[e]}'`:o("invisibleBought").textContent=`You have researched '${a[l][t].description[e]}', level is now ${n[s][e]} ${n[s][t][e]===a[l][t].max[e]?"maxed":""}`),s!=="upgrades"&&O(e,t,s)}else if(s==="researchesAuto"||s==="ASR"){let l=s+"Info";if(n[s][e]===a[l].max[e]||i<a[l].cost[e])return!1;n[s][e]++,i-=a[l].cost[e],a.screenReader&&!r&&(o("invisibleBought").textContent=`You have researched '${s==="ASR"?a[l].description:a[l].description[e]}', level is now ${n[s][e]} ${n[s][e]===a[l].max[e]?"maxed":""}`),O(e,t,s)}else if(s==="elements"){let l="elementsInfo";if(n[s][e]===1||i<a[l].cost[e])return!1;if(n[s][e]=1,i-=a[l].cost[e],n.collapse.show.includes(e)||n.collapse.show.push(e),e===2||e===8||e===13)for(let c=1;c<a.buildingsInfo.name[4].length;c++)R(c,4);else e===7||e===16||e===20||e===25?k(1,4,"researches"):e===9||e===17?k(0,4,"researches"):e===11?k(2,4,"researches"):e===26&&n.stage.current===4&&Je();a.screenReader&&!r&&(o("invisibleBought").textContent=`You have obtained element '${a[l].description[e]}'`)}else{let l="strangenessInfo";if(n[s][t][e]===a[l][t].max[e]||i<a[l][t].cost[e])return!1;if(n[s][t][e]++,i-=a[l][t].cost[e],(t===1||t===4)&&e===6||(t===2||t===3)&&e===5||t===5&&(e===7||e===6&&n.strangeness[5][6]===2))n.ASR[t]=Math.max(n.strangeness[t][e],n.ASR[t]),t===5&&n.strangeness[5][6]>=2&&n.ASR[5]++,k(0,t,"ASR");else if(t===1){if(a.stageInfo.activeAll.includes(1)&&e===4)for(let c=1;c<a.buildingsInfo.name[1].length;c++)R(c,1);e===7&&(n.researchesAuto[0]=Math.max(1,n.researchesAuto[0]),k(0,1,"researchesAuto"))}else if(t===2)a.stageInfo.activeAll.includes(2)&&e===2&&(n.strangeness[2][2]<3&&k(4,2,"researches"),n.strangeness[2][2]===2&&k(5,2,"researches")),e===6&&(n.researchesAuto[1]=Math.max(1,n.researchesAuto[1]),k(1,2,"researchesAuto"));else if(t===3){if(a.stageInfo.activeAll.includes(3)){if(e===2)k(0,3,"researchesExtra"),k(1,3,"researchesExtra");else if(e===7){U();for(let c=1;c<a.buildingsInfo.name[3].length;c++)R(c,3)}}e===6&&k(2,3,"researchesAuto")}else if(t===4){if(a.stageInfo.activeAll.includes(4)&&e===1)for(let c=1;c<a.buildingsInfo.name[4].length;c++)R(c,4)}else t===5&&(e===0?a.stageInfo.activeAll.includes(n.strangeness[5][0])||(W("stage",[n.strangeness[5][0]]),G("soft")):e===1&&(n.stage.input*=2));a.screenReader&&(o("invisibleBought").textContent=`You have researched ${a[l][t].description[e]} for ${a.stageInfo.word[t]} stage, level is now ${n[s][t][e]}${n[s][t][e]===a[l][t].max[e]?"maxed":""}`),O(e,t,s)}return s==="strangeness"?n.strange[0].true=i:t===1?n.discharge.energyCur=i:t===2?n.buildings[t][1].current=i:t===3?n.buildings[3][0].current=i:n.buildings[4][0].current=i,F(),(!r||a.lastResearch[2]===s&&a.lastResearch[0]===e)&&S(e,t,s),L(e,t,s),t===1&&n.toggles.auto[1]&&s!=="strangeness"&&s!=="elements"&&le("upgrade"),!0},O=(e,t,s)=>{if(s==="researches"||s==="researchesExtra"){let r=s+"Info";if(n[s][t][e]===a[r][t].max[e])return;if(t===1?a[r][t].cost[e]=I[r][t].cost[e]+a[r][t].scaling[e]*n[s][t][e]:a[r][t].cost[e]=I[r][t].cost[e]*a[r][t].scaling[e]**n[s][t][e],a[r][t].cost[e]<1){let i=-Math.floor(Math.log10(a[r][t].cost[e]));a[r][t].cost[e]=Math.round(a[r][t].cost[e]*10**(i+2))/10**(i+2)}else a[r][t].cost[e]=Math.round(a[r][t].cost[e]*100)/100}else if(s==="researchesAuto"){let r="researchesAutoInfo";if(n[s][e]===a[r].max[e])return;if(t===1?a[r].cost[e]=I[r].cost[e]+a[r].scaling[e]*n[s][e]:a[r].cost[e]=I[r].cost[e]*a[r].scaling[e]**n[s][e],a[r].cost[e]<1){let i=-Math.floor(Math.log10(a[r].cost[e]));a[r].cost[e]=Math.round(a[r].cost[e]*10**(i+2))/10**(i+2)}else a[r].cost[e]=Math.round(a[r].cost[e]*100)/100}else if(s==="ASR"){if(n.ASR[t]===a.ASRInfo.max[t])return;a.ASRInfo.cost[t]=a.ASRInfo.costRange[t][n.ASR[t]]}else if(s==="strangeness"){let r="strangenessInfo";if(n[s][t][e]===a[r][t].max[e])return;a[r][t].cost[e]=Math.trunc(Math.round((I[r][t].cost[e]+a[r][t].scaling[e]*n[s][t][e])*100)/100)}},k=(e,t,s)=>{if(s==="researchesAuto")e===0?a.researchesAutoInfo.max[0]=n.strangeness[1][7]+1:e===1?a.researchesAutoInfo.max[1]=n.strangeness[2][6]+1:e===2&&(a.researchesAutoInfo.max[2]=n.strangeness[3][6]);else if(s==="ASR")t===5&&(a.ASRInfo.max[5]=n.strangeness[5][7],n.strangeness[5][6]>=2&&a.ASRInfo.max[5]++);else if(s==="researches"){if(t===2)e===4?a.researchesInfo[2].max[4]=2+Math.min(n.strangeness[2][2],2):e===5&&(a.researchesInfo[2].max[5]=2,n.strangeness[2][2]>=2&&(a.researchesInfo[2].max[5]+=1));else if(t===4)if(e===0)a.researchesInfo[4].max[0]=3+3*n.researches[4][2],n.elements[9]===1&&(a.researchesInfo[4].max[0]+=12),n.elements[17]===1&&(a.researchesInfo[4].max[0]+=27);else if(e===1){a.researchesInfo[4].max[1]=2,n.elements[7]===1&&(a.researchesInfo[4].max[1]+=2);for(let r of[16,20,25])n.elements[r]===1&&(a.researchesInfo[4].max[1]+=1)}else e===2&&(a.researchesInfo[4].max[2]=n.elements[11]===1?2:1)}else s==="researchesExtra"&&t===3&&(e===0?(a.researchesExtraInfo[3].max[0]=12,n.accretion.rank>=3&&(a.researchesExtraInfo[3].max[0]+=17),n.strangeness[3][2]>=1&&(a.researchesExtraInfo[3].max[0]+=10*Math.min(n.strangeness[3][2],2))):e===1&&(a.researchesExtraInfo[3].max[1]=5,n.strangeness[3][2]>=1&&(a.researchesExtraInfo[3].max[1]+=1*Math.min(n.strangeness[3][2],2))));O(e,t,s),L(e,t,s),(s==="researches"||s==="researchesExtra")&&x(s,[t,e])},Ie=e=>{switch(e){case"upgrades":return!n.toggles.auto[5]||n.researchesAuto[2]<1?null:"autoU";case"researches":return!n.toggles.auto[6]||n.researchesAuto[2]<2?null:"autoR";case"researchesExtra":return!n.toggles.auto[7]||n.researchesAuto[2]<3?null:"autoE"}},x=(e,t="all")=>{let s=Ie(e);if(s===null)return;let{automatization:r}=a,i=e+"Info";if(t==="all")for(let l of a.stageInfo.activeAll){r[s][l]=[];for(let c=0;c<a[i][l].cost.length;c++)n[e][l][c]<(e==="upgrades"?1:a[i][l].max[c])&&r[s][l].push(c);r[s][l].sort((c,u)=>a[i][l].cost[c]-a[i][l].cost[u])}else if(typeof t=="number"){r[s][t]=[];for(let l=0;l<a[i][t].cost.length;l++)n[e][t][l]<(e==="upgrades"?1:a[i][t].max[l])&&r[s][t].push(l);r[s][t].sort((l,c)=>a[i][t].cost[l]-a[i][t].cost[c])}else r[s][t[0]].some(l=>l===t[1])||(r[s][t[0]].push(t[1]),r[s][t[0]].sort((l,c)=>a[i][t[0]].cost[l]-a[i][t[0]].cost[c]))},oe=(e,t)=>{let s=Ie(e);if(s===null)return;let{automatization:r}=a,i=e+"Info",l=!1;for(let c=0;c<r[s][t].length;c++){let u=r[s][t][c];if(!se(u,t,e))continue;let f=$(u,t,e,!0);if(u===r[s][t][c])if(n[e][t][u]===(e==="upgrades"?1:a[i][t].max[u]))r[s][t].splice(c,1);else if(f)c--;else{if(a[i][t].cost[u]>a[i][t].cost[r[s][t][c+1]]){l=!0;continue}break}}l&&r[s][t].sort((c,u)=>a[i][t].cost[c]-a[i][t].cost[u])},Be=()=>{if(!(!n.collapse.disabled||n.strangeness[4][4]<1)){if(a.automatization.elements.length===0){for(let e of n.collapse.show)n.elements[e]===0&&a.automatization.elements.push(e);a.automatization.elements.sort((e,t)=>a.elementsInfo.cost[e]-a.elementsInfo.cost[t])}for(let e=0;e<a.automatization.elements.length;e++){let t=a.automatization.elements[e];if(!se(t,4,"elements"))break;if($(t,4,"elements",!0),n.elements[t]===1)a.automatization.elements.splice(e,1);else break}n.collapse.disabled=a.automatization.elements.length>0}},H=(e,t,s=!1)=>{var c,u,f,g;let{toggles:r}=n,i;if(t==="normal"?i=o(`toggle${e}`):t==="buildings"?i=o(`toggleBuilding${e}`):i=o(`toggleAuto${e}`),s)if(t==="buildings"){let y=n.stage.active;if(r.buildings[y][e]=!r.buildings[y][e],e===0)for(let m=1;m<r.buildings[y].length;m++)r.buildings[y][m]=r.buildings[y][0],H(m,"buildings");else r.buildings[y][0]=r.buildings[y].includes(!0,1),H(0,"buildings")}else r[t][e]=!r[t][e];let l=t==="buildings"?r.buildings[n.stage.active][e]:r[t][e];l?(i.style.color="",i.style.borderColor=""):(i.style.color="var(--red-text-color)",i.style.borderColor="crimson"),t==="normal"?l?(i.textContent="ON",a.screenReader&&(i.ariaLabel=(g=(f=i.ariaLabel)==null?void 0:f.replace(" OFF"," ON"))!=null?g:"")):(i.textContent="OFF",a.screenReader&&(i.ariaLabel=(u=(c=i.ariaLabel)==null?void 0:c.replace(" ON"," OFF"))!=null?u:"")):l?i.textContent=t==="buildings"&&e===0?"All ON":"Auto ON":i.textContent=t==="buildings"&&e===0?"All OFF":"Auto OFF"},j=(e=null)=>{let{shop:t}=n.toggles,s=o("buyAnyInput");switch(e){case"1":t.howMany=1;break;case"max":t.howMany=-1;break;case"any":t.input=Math.max(Math.trunc(Number(s.value)),-1),t.input===0&&(t.input=1),t.howMany=t.input,s.value=d(t.input,0,"input");break;case"strict":t.strict=!t.strict;break;default:s.value=d(t.input,0,"input")}let r=o("buyStrict");r.style.borderColor=t.strict?"":"crimson",r.style.color=t.strict?"":"var(--red-text-color)",o("buy1x").style.backgroundColor=t.howMany===1?"green":"",o("buyAny").style.backgroundColor=Math.abs(t.howMany)!==1?"green":"",o("buyMax").style.backgroundColor=t.howMany===-1?"green":"",F()},Se=(e,t=!1)=>{U();let s=!1;switch(e){case 1:s=n.buildings[1][3].current>=167e19;break;case 2:s=n.buildings[2][1].current>=1194e26;break;case 3:s=n.buildings[3][0].current>=247e29;break;case 4:return!1;case 5:s=n.stage.current>=5}return t&&s&&n.strangeness[5][2]>=1&&(e<5||a.strangeInfo.stageGain+a.strangeInfo.extraGain>=n.stage.input)&&Ue(e),s},ie=async()=>{let{stage:e}=n,t=e.active===4&&e.current===5&&n.events[1]?5:e.active;if(Se(t)){let s=!0;if(n.toggles.normal[1])if(t===e.current)switch(t){case 1:s=await A("Ready to enter next stage? Next one will be harder than current");break;case 2:s=await A("Ready to enter next stage? Next one will be harder than current");break;case 3:s=await A("Ready to enter next stage? Next one will be harder than current");break;case 5:s=n.strange[0].total===0?await A("You will return to first stage. But maybe you will get something in return. Ready?"):await A(`You will return to first stage. In return you will get ${d(a.strangeInfo.stageGain+a.strangeInfo.extraGain,0)} Strange quarks. Ready?`)}else s=await A(`You will reset this stage. In return you will get ${d(a.strangeInfo.stageGain,0)} Strange quarks. Ready?`);s&&Ue(t)}else switch(t){case 1:return E(`You will need enough to form a single Drop of water for next one - ${d(167e19,2)} Molecules`);case 2:return E(`Look's like more Mass expected, need even more Drops, around ${d(1194e26-n.buildings[2][1].current)}`);case 3:return E(`Self sustaining is not yet possible, obtain at least ${d(247e29,2)} Mass`);case 4:return e.true>4?E("Let's reach the limit"):E("Let's see the limit");case 5:return E("'Iron' wasn't obtained yet")}},Ue=e=>{let{stage:t,researchesAuto:s}=n;t.resets++;let r=[],i=e===t.current;if(i?(t.current<5?t.current++:t.current=1+n.strangeness[5][0],t.true=Math.max(t.true,t.current),t.active=t.current,r.push(t.current),t.current===4&&r.push(5),e===5?(n.strangeness[1][7]<1&&(s[0]=0,k(0,0,"researchesAuto")),n.strangeness[2][6]<1&&(s[1]=0,k(1,0,"researchesAuto"))):e===2?s[1]===0&&(s[1]=1,k(1,0,"researchesAuto")):e===1&&s[0]===0&&(s[0]=1,k(0,0,"researchesAuto")),n.events[0]=t.true>t.current):r.push(e),t.true>=5){let l=a.strangeInfo.stageGain;e>=5&&(l+=a.strangeInfo.extraGain),n.strange[0].true+=l,n.strange[0].total+=l}W("stage",r),i?G():(r.includes(n.stage.active)&&V(),r.includes(3)&&de())},Je=()=>{let{stage:e}=n;e.current++,e.true=Math.max(e.current,e.true),G("soft")},He=e=>{n.stage.active===e||!a.stageInfo.activeAll.includes(e)||(n.stage.active=e,G(),!n.events[1]&&n.stage.active===5&&Y(4,1))},De=()=>{let{milestones:e}=n,t=0;return e[1][0]>=5&&t++,e[2][1]>=4&&t++,e[3][1]>=5&&t++,e[4][1]>=5&&t++,e[5][1]>=7&&t++,t<5?E(`Universe is still stable. Vacuum state is false. ${5-t} more`):E("Not yet in game")},le=(e="false")=>{if(U(),n.upgrades[1][3]===1&&n.buildings[1][1].true>0){if(e!=="false"){if(e==="interval"&&n.discharge.energyCur<a.dischargeInfo.next||n.strangeness[1][3]<1)return!1;Ne()}return!0}return!1},ce=async()=>{if(!le()||!a.stageInfo.activeAll.includes(1))return;let e=!0;n.toggles.normal[2]?n.discharge.energyCur<a.dischargeInfo.next?e=await A("This will reset all of your current structures and Energy. You will NOT gain production boost. Continue?"):e=await A("You have enough Energy to gain boost. Continue?"):n.stage.active!==1&&(e=await A(`You are trying to Discarge while inside '${a.stageInfo.word[n.stage.active]}'.
${n.discharge.energyCur<a.dischargeInfo.next?"You haven't reached next goal":"You will gain boost"}, continue?`)),e&&(a.screenReader&&(o("invisibleBought").textContent=n.discharge.energyCur>=a.dischargeInfo.next?"Structures and Energy were reset for some boost":"Structures and Energy were reset, no boost"),Ne())},Ne=()=>{n.discharge.energyCur>=a.dischargeInfo.next&&n.discharge.current++,B(0,1),W("discharge",[1])},ke=(e=!1)=>{if(U(),n.upgrades[2][1]===1&&a.vaporizationInfo.get>=1){if(e){if(a.vaporizationInfo.get<=n.vaporization.clouds*n.vaporization.input||n.strangeness[2][4]<1)return!1;ze()}return!0}return!1},ue=async()=>{if(!ke()||!a.stageInfo.activeAll.includes(2))return;let e=!0;n.toggles.normal[3]?e=await A(`Do you wish to reset structures and upgrades for ${d(a.vaporizationInfo.get)} Clouds?`):n.stage.active!==2&&(e=await A(`You are trying to cause Vaporization while inside '${a.stageInfo.word[n.stage.active]}'.
You will get ${d(a.vaporizationInfo.get)} Clouds, continue?`)),e&&(a.screenReader&&(o("invisibleBought").textContent=`Progress were reset for ${d(a.vaporizationInfo.get)} Clouds`),ze())},ze=()=>{n.vaporization.clouds+=a.vaporizationInfo.get,B(0,2),W("vaporization",[2])},Ee=(e=!1)=>{let t=a.accretionInfo.rankCost[n.accretion.rank];if(n.buildings[3][0].current>=t&&t!==0){if(e){if(n.strangeness[3][4]<1)return!1;Ge()}return!0}return!1},fe=async()=>{if(!Ee()||!a.stageInfo.activeAll.includes(3))return;let e=!0;n.toggles.normal[4]&&n.accretion.rank!==0?e=await A("Increasing Rank will reset structures, upgrades, stage researches. But you will get closer to your goal"):n.stage.active!==3&&(e=await A(`You are trying increase Rank while inside '${a.stageInfo.word[n.stage.active]}'. Continue?`)),e&&(Ge(),a.screenReader&&(o("invisibleBought").textContent=`Rank is now ${a.accretionInfo.rankName[n.accretion.rank]}`))},Ge=()=>{n.accretion.rank++,W("rank",[3]),k(0,3,"researchesExtra"),de()},Me=(e=!1)=>{if(U(),n.upgrades[4][0]===1){let{collapseInfo:t}=a,{collapse:s,researchesExtra:r}=n;if(e){let i=(r[4][0]>=1?s.stars[0]<(s.stars[0]+t.starCheck[0])/s.inputS:!1)||(r[4][0]>=2?s.stars[1]<(s.stars[1]+t.starCheck[1])/s.inputS:!1)||(r[4][0]>=3?s.stars[2]<(s.stars[2]+t.starCheck[2])/s.inputS:!1);return t.newMass<s.mass*s.inputM&&!i||n.strangeness[4][5]<1?!1:(Oe(),!0)}return t.starCheck[0]>0||t.starCheck[1]>0||t.starCheck[2]>0||t.newMass>s.mass}return!1},ge=async()=>{if(!Me()||!a.stageInfo.activeAll.includes(4))return;let{collapse:e,researchesExtra:t}=n,s=!0;if(n.toggles.normal[5]||n.stage.active!==4){let{collapseInfo:r}=a,i=n.stage.active===4?`This will reset all non automization researches and upgrades. ${r.newMass<e.mass?"Your total Mass won't change":`But your total Mass will be now ${d(r.newMass)}`}`:`You are trying to Collapse Stars while inside '${a.stageInfo.word[n.stage.active]}'.
Solar mass will increase by +${d(r.newMass-e.mass)}`;t[4][0]>=1&&(i+=`, also you will get ${d(r.starCheck[0])} Red giants`,t[4][0]>=2&&(i+=`, ${d(r.starCheck[1])} Neutron stars`,t[4][0]>=3&&(i+=` and ${d(r.starCheck[2])} Black holes`))),n.stage.active!==4&&(i+=`.
Continue?`),s=await A(i)}if(s&&(Oe(),a.screenReader)){let r=`Your Mass has increased to ${d(e.mass)}`;t[4][0]>=1&&(r+=`, Red giants to ${d(e.stars[0])}`,t[4][0]>=2&&(r+=`, Neutron stars - ${d(e.stars[1])}`,t[4][0]>=3&&(r+=` and Black holes - ${d(e.stars[2])}`))),o("invisibleBought").textContent=r}},Oe=()=>{let{collapseInfo:e}=a,{collapse:t}=n;e.newMass>t.mass&&(t.mass=e.newMass);for(let s=0;s<n.researchesExtra[4][0];s++)t.stars[s]+=e.starCheck[s];B(0,4),B(1,4),W("collapse",n.strangeness[5][5]>=1?[4]:[4,5]),k(0,4,"researches"),k(1,4,"researches"),k(2,4,"researches")};var C=(e,t=null)=>{if(t===null){let s=a.tab;if(o(`${s}Tab`).style.display="none",o(`${s}TabBtn`).classList.remove("tabActive"),Object.hasOwn(a.subtab,s+"Current"))for(let i of a.tabList[s+"Subtabs"])o(`${s}SubtabBtn${i}`).style.display="none";a.tab=e;let r=0;if(o(`${e}Tab`).style.display="",o(`${e}TabBtn`).classList.add("tabActive"),Object.hasOwn(a.subtab,e+"Current"))for(let i of a.tabList[e+"Subtabs"])q(e,i)?(o(`${e}SubtabBtn${i}`).style.display="",r++):a.subtab[e+"Current"]===i&&C(e,I.subtab[e+"Current"]);o("subtabs").style.display=r>1?"":"none",o("invisibleTab").textContent=`Current tab is ${e} tab${r>1?` and its subtab is ${a.subtab[e+"Current"]}`:""}`}else{let s=a.subtab[e+"Current"];o(`${e}Subtab${s}`).style.display="none",o(`${e}SubtabBtn${s}`).classList.remove("tabActive"),a.subtab[e+"Current"]=t,o(`${e}Subtab${t}`).style.display="",o(`${e}SubtabBtn${t}`).classList.add("tabActive"),a.screenReader&&(o("invisibleTab").textContent=`Current subtab is ${t}, part of ${e} tab`)}V(),F()},K=()=>(14400+14400*n.researchesAuto[1])*_e(),_e=()=>1+n.strangeness[2][7],Fe=()=>86400*(1+n.strangeness[4][8]),me=()=>n.strangeness[4][7],Ce=(e=0)=>{let{time:t,toggles:s}=n,r;if(e===0){let c=Date.now()-t.updated;if(t.updated=Date.now(),c<0)return console.warn("Negative passed time detected.");r=c/1e3,a.timeSpecial.lastSave+=c,n.stage.export=Math.min(n.stage.export+r,Fe())}else r=e;if(r>60){let c=r>3600?900:60,u=K();r>u&&(r=u,console.log(`Offline time was reduced to it's max of ${u/3600} hours.`)),e=r-c,r=c}else e!==0&&(e=0);let{buildingsInfo:i,automatization:l}=a;for(let c of a.stageInfo.activeAll){s.auto[0]&&Se(c,!0),c===4&&s.auto[4]&&Me(!0),c===3&&s.auto[3]&&Ee(!0),c===2&&s.auto[2]&&ke(!0),c===1&&s.auto[1]&&le("interval"),c===4&&Be(),l.autoE[c].length!==0&&oe("researchesExtra",c),l.autoR[c].length!==0&&oe("researches",c),l.autoU[c].length!==0&&oe("upgrades",c),U();for(let u=i.name[c].length-1;u>=1;u--)s.buildings[c][u]&&n.ASR[c]>=u&&Q(u,c,!0),i.type[c][u]==="producing"&&X(u-1,c,r);c===1&&n.upgrades[1][6]===1&&X(3,1,r),c===5&&(n.researches[5][0]>=1&&X(1,5,r),n.researches[5][0]>=2&&X(2,5,r),n.researches[5][0]>=3&&X(3,5,r))}e>0&&Ce(e)},F=()=>{var i;let{buildings:e}=n,{tab:t,subtab:s}=a,r=n.stage.active;if(a.footer&&(r===1?(o("quarks").textContent=d(e[1][0].current),o("energy").textContent=d(n.discharge.energyCur,0)):r===2?(o("water").textContent=d(e[2][0].current),t!=="stage"&&(o("drops").textContent=d(e[2][1].current)),o("clouds").textContent=d(n.vaporization.clouds)):r===3?o("mass").textContent=d(e[3][0].current):(r===4||r===5)&&(o("elements").textContent=d(e[4][0].current),o("solarMass").textContent=d(n.collapse.mass),r===5&&(o("stars").textContent=d(e[5][0].current)))),t==="stage"){let{buildingsInfo:l,collapseInfo:c}=a,{collapse:u}=n,{shop:f}=n.toggles;for(let g=1;g<l.name[r].length;g++){if(o(`building${g}True`).textContent=`[${d(e[r][g].true,0)}]`,o(`building${g}Cur`).textContent=d(e[r][g].current),o(`building${g}Prod`).textContent=d(l.producing[r][g]),r===4&&u.mass<c.unlockB[g]||r===5&&u.mass<c.unlockG[g]){o(`building${g}`).classList.remove("availableBuilding"),o(`building${g}Btn`).textContent=`Unlocked at ${d(c[r===4?"unlockB":"unlockG"][g])} Mass`,o(`building${g}BuyX`).textContent="Locked";continue}let y=r===5&&g===3,m=g-1;r===2&&g!==1?m=1:r>=3&&(m=0);let v=r===5?4:r,p;y?p=n.collapse.mass:p=e[v][m].current;let b,M;if(n.researchesAuto[0]===0||f.howMany===1||l.cost[r][g]>p&&(!f.strict||f.howMany===-1))b=l.cost[r][g],M=1;else{let T=l.startCost[r][g]*((l.increase[r][g]**e[r][g].true-1)/(l.increase[r][g]-1)),D=f.strict&&f.howMany!==-1?1:Math.trunc(Math.log((T+p)*(l.increase[r][g]-1)/l.startCost[r][g]+1)/Math.log(l.increase[r][g]))-e[r][g].true;M=f.howMany===-1?D:f.strict?f.howMany:Math.min(D,f.howMany),b=l.startCost[r][g]*((l.increase[r][g]**(M+e[r][g].true)-1)/(l.increase[r][g]-1))-T}b<=p?(o(`building${g}`).classList.add("availableBuilding"),o(`building${g}Btn`).textContent=`Make for: ${d(b)} ${y?"Mass":l.name[v][m]}`,o(`building${g}BuyX`).textContent=d(M)):(o(`building${g}`).classList.remove("availableBuilding"),o(`building${g}Btn`).textContent=`Need: ${d(b)} ${y?"Mass":l.name[v][m]}`,o(`building${g}BuyX`).textContent=d(M))}if(r===1)o("dischargeReset").textContent=`Next goal is ${d(a.dischargeInfo.next,0)} Energy`,o("dischargeEffect").textContent=d(a.upgradesInfo[1].effect[3],0);else if(r===2)o("vaporizationReset").textContent=`Reset for ${d(a.vaporizationInfo.get)} Clouds`;else if(r===4){o("collapseReset").textContent=`Collapse to ${d(c.newMass)} Mass`;for(let g=1;g<=n.researchesExtra[4][0];g++)o(`starSpecial${g}Cur`).textContent=d(u.stars[g-1],0),o(`starSpecial${g}Get`).textContent=d(c.starCheck[g-1],0)}a.lastUpgrade[1]&&S(a.lastUpgrade[0],"auto","upgrades")}else if(t==="research")s.researchCurrent==="Researches"?a.lastResearch[1]&&S(a.lastResearch[0],"auto",a.lastResearch[2]):s.researchCurrent==="Elements"&&a.lastElement[1]&&S(a.lastElement[0],4,"elements");else if(t==="strangeness")s.strangenessCurrent==="Matter"&&(o("strange0Cur").textContent=d(n.strange[0].true,0),o("strange0Prod").textContent=d((i=a.strangeInfo.stageBoost[Math.min(r)])!=null?i:"none"),o("strange0Gain").textContent=d(a.strangeInfo.stageGain+(r>=4?a.strangeInfo.extraGain:0),0));else if(t==="settings"){if(s.settingsCurrent==="Settings")a.timeSpecial.lastSave>=1e3&&(o("isSaved").textContent=`${d(a.timeSpecial.lastSave,0,"time")} ago`),o("exportGain").textContent=d(n.stage.export*me()/86400);else if(s.settingsCurrent==="Stats"){let{strange:l}=n;o("firstPlay").textContent=`${d(Date.now()-n.time.started,0,"time")} ago`,o("stageResetsCount").textContent=d(n.stage.resets,0),o("maxOfflineStat").textContent=`${d(K()/3600,2)} hours`,o("maxExportStat").textContent=d(Fe()*me()/86400,0);for(let c=0;c<e[r].length;c++)e[r][c].trueTotal!==0&&(o(`building${c}StatTotal`).textContent=d(e[r][c].total),o(`building${c}StatTrueTotal`).textContent=d(e[r][c].trueTotal),o(`building${c}StatHighest`).textContent=d(e[r][c].highest));for(let c=0;c<l.length;c++)l[c].total!==0&&(o(`strange${c}StatTotal`).textContent=d(l[c].total));r===1?(o("maxEnergyStat").textContent=d(n.discharge.energyMax,0),o("dischargeStat").textContent=d(n.discharge.current,0),o("dischargeStatBonus").textContent=`[+${d(n.strangeness[1][2],0)}]`):r===5&&(o("starsStatTrue").textContent=d(a.collapseInfo.trueStars))}}},V=()=>{let{stage:e,buildings:t,upgrades:s,researchesAuto:r,ASR:i,strangeness:l,milestones:c}=n,{tab:u,subtab:f}=a,g=a.stageInfo.activeAll,y=e.active;if(g.includes(1)){let{discharge:m}=n;if(u==="settings"&&f.settingsCurrent==="Settings"&&(o("toggleAuto1").style.display=l[1][3]>=1?"":"none"),y===1)if(o("energyStat").style.display=m.energyMax>=9?"":"none",m.current>=4&&(o("researchTabBtn").style.display=""),u==="stage"){o("building2").style.display=t[1][1].trueTotal>=11?"":"none",o("building3").style.display=t[1][2].trueTotal>=2?"":"none",m.energyMax>=9&&(o("upgrades").style.display=""),o("discharge").style.display=s[1][3]===1?"":"none";for(let v=5;v<=8;v++)o(`upgrade${v}`).style.display=m.current>=3?"":"none";s[1][7]===1&&(o("stage").style.display=""),o("stageReset").textContent=t[1][3].current>=167e19?y===e.current?"Enter next stage":"Reset current stage":"You are not ready"}else u==="settings"?f.settingsCurrent==="Settings"?m.current>=1&&(o("resetToggles").style.display=""):f.settingsCurrent==="Stats"&&(o("energyStats").style.display=m.energyMax>=9?"":"none",o("dischargeStats").style.display=m.current>=1||l[1][2]>=1?"":"none",o("dischargeStatBonus").style.display=l[1][2]>=1?"":"none"):u==="special"&&(o("invisibleGetResource1").style.display=m.energyMax>0?"":"none")}if(g.includes(2)){let{vaporization:m}=n;u==="settings"&&f.settingsCurrent==="Settings"&&(o("vaporizationToggleReset").style.display=e.true>2||m.clouds>1?"":"none",o("toggleAuto2").style.display=l[2][4]>=1?"":"none",o("toggleAuto2Mark").style.display=l[2][4]>=1?"":"none"),y===2&&(o("dropStat").style.display=a.tab!=="stage"?"":"none",o("cloudStat").style.display=s[2][1]===1?"":"none",u==="stage"?(o("vaporization").style.display=s[2][1]===1?"":"none",o("building2").style.display=t[2][1].trueTotal>=300?"":"none",o("building3").style.display=t[2][1].trueTotal>=5e6?"":"none",o("building4").style.display=t[2][1].trueTotal>=5e17?"":"none",o("building5").style.display=t[2][1].trueTotal>=5e22?"":"none",o("upgrade3").style.display=t[2][2].trueTotal>=1?"":"none",o("upgrade4").style.display=t[2][2].trueTotal>=1?"":"none",o("upgrade2").style.display=t[2][3].trueTotal>=1?"":"none",o("upgrade5").style.display=t[2][3].trueTotal>=1?"":"none",o("upgrade6").style.display=t[2][4].trueTotal>=1?"":"none",o("upgrade7").style.display=t[2][5].trueTotal>=1&&l[2][2]>=3?"":"none",o("stageReset").textContent=t[2][1].current>=1194e26?y===e.current?"Enter next stage":"Reset current stage":"You are not ready"):u==="research"?f.researchCurrent==="Researches"&&(o("extraResearch").style.display=m.clouds>1?"":"none",o("research3").style.display=t[2][2].trueTotal>=1?"":"none",o("research4").style.display=t[2][2].trueTotal>=1?"":"none",o("research5").style.display=t[2][3].trueTotal>=1?"":"none",o("research6").style.display=t[2][4].trueTotal>=1?"":"none",o("researchExtra3").style.display=t[2][5].trueTotal>=1?"":"none"):u==="special"&&(o("invisibleGetResource2").style.display=s[2][1]===1?"":"none"),!n.events[0]&&a.vaporizationInfo.get+m.clouds>1e4&&Y(1,0))}if(g.includes(3)){let{accretion:m}=n;if(u==="settings"&&f.settingsCurrent==="Settings"&&(o("rankToggleReset").style.display=e.true>3||m.rank>=2?"":"none",o("toggleAuto3").style.display=l[3][4]>=1?"":"none"),y===3){if(u==="stage")o("buildings").style.display=m.rank>=1?"":"none",o("upgrades").style.display=m.rank>=1?"":"none",o("upgrade3").style.display=m.rank>=2?"":"none",o("upgrade5").style.display=m.rank>=3?"":"none",o("upgrade6").style.display=m.rank>=4||s[3][4]===1?"":"none",o("upgrade7").style.display=m.rank>=4?"":"none",o("upgrade8").style.display=m.rank>=4?"":"none",o("upgrade9").style.display=m.rank>=4&&l[3][2]>=3?"":"none",o("upgrade10").style.display=m.rank>=4?"":"none",o("upgrade11").style.display=m.rank>=5?"":"none",o("upgrade12").style.display=m.rank>=5?"":"none",o("upgrade13").style.display=m.rank>=5?"":"none",o("upgrade4").style.display=t[3][2].trueTotal>=1?"":"none",o("building2").style.display=s[3][2]===1?"":"none",o("building3").style.display=s[3][4]===1?"":"none",o("building4").style.display=s[3][6]===1?"":"none",o("stageReset").textContent=t[3][0].current>=247e29?y===e.current?"Enter next stage":"Reset current stage":"You are not ready";else if(u==="research")f.researchCurrent==="Researches"&&(o("stageResearch").style.display=m.rank>=1?"":"none",o("extraResearch").style.display=m.rank>=2?"":"none",o("researchExtra2").style.display=m.rank>=3?"":"none",o("research5").style.display=m.rank>=3?"":"none",o("research6").style.display=m.rank>=4||s[3][4]===1?"":"none",o("research7").style.display=m.rank>=4?"":"none",o("researchExtra3").style.display=m.rank>=4?"":"none",o("research8").style.display=m.rank>=5?"":"none",o("researchExtra4").style.display=m.rank>=5?"":"none",o("research3").style.display=t[3][2].trueTotal>=1?"":"none",o("research4").style.display=t[3][2].trueTotal>=1?"":"none");else if(u==="settings"&&f.settingsCurrent==="Stats")for(let v=0;v<a.accretionInfo.rankImage.length;v++)o(`rankStat${v}`).style.display=m.rank>=v?"":"none";!n.events[0]&&t[3][0].current>=5e29&&Y(2,0)}}if(g.includes(4)){let{collapse:m,researchesExtra:v}=n;if(u==="stage")y>=4&&(o("stageReset").textContent=n.events[1]&&e.current===5?"Return back to start":"You are not ready");else if(u==="research"){if(f.researchCurrent==="Elements"){let p=o("elementsGrid");p.style.display=s[4][2]===1?"":"flex";for(let b=6;b<=10;b++)o(`element${b}`).style.display=s[4][2]===1?"":"none";s[4][2]===1&&m.mass<10?p.classList.add("Elements10App"):p.classList.remove("Elements10App");for(let b=11;b<=26;b++)o(`element${b}`).style.display=m.mass>=10?"":"none";o("element27").style.display=s[4][3]===1?"":"none",o("element28").style.display=s[4][3]===1?"":"none"}}else u==="settings"&&f.settingsCurrent==="Settings"&&(o("collapseToggleReset").style.display=e.true>4||m.mass>.01235?"":"none",o("toggleAuto4").style.display=l[4][5]>=1?"":"none",o("toggleAuto4Mark").style.display=l[4][5]>=1?"":"none");y===4&&(u==="stage"?(o("starsSpecial").style.display=v[4][0]>=1?"":"none",o("starSpecial2").style.display=v[4][0]>=2?"":"none",o("starSpecial3").style.display=v[4][0]>=3?"":"none",o("collapse").style.display=s[4][0]===1?"":"none",o("building2").style.display=s[4][1]===1?"":"none",o("building3").style.display=s[4][2]===1?"":"none",o("building4").style.display=m.mass>=10?"":"none",o("upgrade4").style.display=l[4][2]>=1?"":"none"):u==="research"?f.researchCurrent==="Researches"&&(o("extraResearch").style.display=t[4][2].trueTotal>0?"":"none",o("research4").style.display=l[4][2]>=2?"":"none",o("researchExtra2").style.display=l[4][2]>=3?"":"none"):u==="special"&&(o("invisibleGetResource4").style.display=s[4][0]===1?"":"none"),!n.events[0]&&v[4][0]>=1&&Y(3,0))}if(g.includes(5)&&y===5){let m=c[2][0]>=3,v=c[3][0]>=3;u==="stage"?(o("buildings").style.display=m||v?"":"none",o("building1").style.display=m?"":"none",o("building2").style.display=v?"":"none",o("building3").style.display=l[5][6]>=1?"":"none",o("upgrades").style.display=m||v?"":"none",o("upgrade1").style.display=m?"":"none",o("upgrade2").style.display=v?"":"none",o("upgrade3").style.display=t[5][3].current>=1?"":"none"):u==="research"&&f.researchCurrent==="Researches"&&(o("stageResearch").style.display=m||v?"":"none",o("research1").style.display=m?"":"none",o("research2").style.display=v?"":"none")}if(e.true>=5)if(u==="stage")o("toggleBuilding0").style.display=i[y]>=1&&r[0]>=2?"":"none";else if(u==="research")f.researchCurrent==="Researches"&&(o("researchAuto3").style.display=l[3][6]>=1?"":"none");else if(u==="strangeness")if(f.strangenessCurrent==="Matter"){let m=c[4][0]>=3,v=c[2][0]>=3,p=c[3][0]>=3;o("strange9Stage1").style.display=m?"":"none",o("strange8Stage2").style.display=m?"":"none",o("strange9Stage2").style.display=m?"":"none",o("strange8Stage3").style.display=m?"":"none",o("strange9Stage4").style.display=m?"":"none",o("strange10Stage4").style.display=m?"":"none",o("strangenessSection5").style.display=m?"":"none",o("strange4Stage5").style.display=v?"":"none",o("strange5Stage5").style.display=p?"":"none",o("strange6Stage5").style.display=v||p?"":"none",o("strange7Stage5").style.display=l[5][5]>=1?"":"none"}else f.strangenessCurrent==="Milestones"&&(o("milestone1Stage5Div").style.display=l[5][8]>=1?"":"none",o("milestone2Stage5Div").style.display=l[5][8]>=1&&l[5][6]>=1?"":"none");else u==="settings"&&(f.settingsCurrent==="Settings"?(o("toggleAuto0").style.display=l[5][2]>=1?"":"none",o("toggleAuto0Mark").style.display=l[5][2]>=1?"":"none",o("autoTogglesUpgrades").style.display=r[2]>=1?"":"none",o("autoToggle6").style.display=r[2]>=2?"":"none",o("autoToggle7").style.display=r[2]>=3?"":"none",o("exportSpecial").style.display=l[4][7]>=1?"":"none"):f.settingsCurrent==="Stats"&&(o("maxExportStats").style.display=l[4][7]>=1?"":"none",o("unknownStructures").style.display=c[1][0]>=5||c[2][1]>=4||c[3][1]>=5||c[4][1]>=5||c[5][1]>=7?"":"none",o("unknownStructure1").style.display=c[1][0]>=5?"":"none",o("unknownStructure2").style.display=c[2][1]>=4?"":"none",o("unknownStructure3").style.display=c[3][1]>=5?"":"none",o("unknownStructure4").style.display=c[4][1]>=5?"":"none",o("unknownStructure5").style.display=c[5][1]>=7?"":"none"));if(u==="stage"){o("toggleBuy").style.display=r[0]>0?"":"none";for(let m=1;m<a.buildingsInfo.name[y].length;m++)o(`building${m}True`).style.display=t[y][m].current!==t[y][m].true?"":"none",o(`toggleBuilding${m}`).style.display=i[y]>=m?"":"none",o(`building${m}BuyDiv`).style.display=r[0]>0?"":"none"}else if(u==="settings"){if(f.settingsCurrent==="Stats")for(let m=1;m<a.buildingsInfo.name[y].length;m++)o(`building${m}Stats`).style.display=t[y][m].trueTotal>0?"":"none"}else if(u==="special")for(let m=1;m<a.buildingsInfo.name[y].length;m++)o(`invisibleGetBuilding${m}`).style.display=t[y][m].trueTotal>0?"":"none"},S=(e,t,s)=>{t==="auto"&&(t=n.stage.active);let{stageInfo:r}=a;if(s==="researches"||s==="researchesExtra"){let i=s+"Info";if(a[i][t].effect[e]===void 0)return;if(a.lastResearch=[e,a[i][t].effect[e]!==null,s],t===4&&s==="researchesExtra"&&e===0){let l=Math.min(n.researchesExtra[4][0]+2,4);a.researchesExtraInfo[4].effect[0]=n.buildings[4][l].trueTotal!==0?a.buildingsInfo.name[4][l]:"(Unknown)"}else if(t===5&&s==="researches"){if(e===0){let l=Math.min(n.researches[5][0]+2,4);a.researchesInfo[5].effect[0]=n.buildings[4][l].trueTotal!==0?a.buildingsInfo.name[4][l]:"(unknown)"}else if(e===1){let l=Math.max(3-n.researches[5][1],1);a.researchesInfo[5].effect[1]=n.buildings[4][l].trueTotal!==0?a.buildingsInfo.name[4][l]:"(unknown)"}}o("researchText").textContent=a[i][t].description[e],o("researchEffect").textContent=a[i][t].effect[e]===null?a[i][t].effectText[e][0]:a[i][t].effectText[e][0]+d(a[i][t].effect[e])+a[i][t].effectText[e][1],o("researchCost").textContent=n[s][t][e]===a[i][t].max[e]?"Maxed.":t===4&&s==="researches"&&a.collapseInfo.unlockR[e]>n.collapse.mass?`Unlocked at ${d(a.collapseInfo.unlockR[e])} Mass.`:`${d(a[i][t].cost[e])} ${r.priceName}.`}else if(s==="researchesAuto"){let i="researchesAutoInfo";a.lastResearch=[e,!1,s],o("researchText").textContent=a[i].description[e],o("researchEffect").textContent=a[i].effectText[e][0],o("researchCost").textContent=n[s][e]===a[i].max[e]?"Maxed.":t!==a.researchesAutoInfo.autoStage[e]?`Can't be created outside of ${r.word[a.researchesAutoInfo.autoStage[e]]} stage.`:`${d(a[i].cost[e])} ${r.priceName}.`}else if(s==="ASR"){let i=Math.min(n.ASR[t]+1,a.ASRInfo.max[t]);a.lastResearch=[e,!1,s],o("researchText").textContent="Automatization for making structures.",o("researchEffect").textContent=`Will automatically make ${d(n.buildings[t][i].trueTotal!==0?a.buildingsInfo.name[t][i]:"(unknown)")}.
(Can make them only when have 2 times of the structure cost)`,o("researchCost").textContent=n.ASR[t]===a.ASRInfo.max[t]?"Maxed.":`${d(a.ASRInfo.cost[t])} ${r.priceName}.`}else if(s==="elements"){let{elementsInfo:i}=a;a.lastElement=[e,i.effect[e]!==null],o("elementText").textContent=i.description[e]+(a.automatization.elements.includes(e)?" (Disabled)":""),o("elementEffect").textContent=n.collapse.show.includes(e)?i.effect[e]===null?i.effectText[e][0]:i.effectText[e][0]+d(i.effect[e])+i.effectText[e][1]:"Effect is not yet known.",o("elementCost").textContent=n.elements[e]===1?"Obtained.":`${d(i.cost[e])} ${r.priceName}.`}else if(s==="upgrades"){let i="upgradesInfo";if(a[i][t].effect[e]===void 0)return;a.lastUpgrade=[e,a[i][t].effect[e]!==null],o("upgradeText").textContent=a[i][t].description[e],o("upgradeEffect").textContent=a[i][t].effect[e]===null?a[i][t].effectText[e][0]:a[i][t].effectText[e][0]+d(a[i][t].effect[e])+a[i][t].effectText[e][1],o("upgradeCost").textContent=n[s][t][e]===1?"Created.":t===4&&a.collapseInfo.unlockU[e]>n.collapse.mass?`Unlocked at ${d(a.collapseInfo.unlockU[e])} Mass.`:`${d(a[i][t].cost[e])} ${r.priceName}.`}else{let i=s+"Info";s==="strangeness"&&((t===1||t===4)&&e===6||(t===2||t===3)&&e===5?a.strangenessInfo[t].effect[e]=a.buildingsInfo.name[t][Math.min(n.strangeness[t][e]+1,a.ASRInfo.max[t])]:t===5&&e===0&&(a.strangenessInfo[t].effect[e]=a.stageInfo.word[Math.min(n.strangeness[t][e]+1,a.stageInfo.word.length-1)]));let l=o(`${s}Stage`);if(l.style.color=r.textColor[t],l.textContent=`${r.word[t]}. `,o(`${s}Text`).textContent=`${a[i][t].description[e]}`,s==="strangeness")o("strangenessEffect").textContent=a[i][t].effect[e]===null?a[i][t].effectText[e][0]:a[i][t].effectText[e][0]+d(a[i][t].effect[e])+a[i][t].effectText[e][1],o("strangenessCost").textContent=n[s][t][e]===a[i][t].max[e]?"Maxed.":`${d(a[i][t].cost[e])} Strange quarks.`;else{let c=n[s][t][e];c<a[i][t].need[e].length?(o("milestonesCost").textContent=a[i][t].needText[e][0]+d(a[i][t].need[e][n[s][t][e]])+a[i][t].needText[e][1],o("milestonesReward").textContent=`You will gain ${d(a[i][t].quarks[e][c],0)} Strange quarks for reaching this milestone.`,o("milestonesCostMain").style.display="",o("milestonesRewardMain").style.display=""):(o("milestonesCostMain").style.display="none",o("milestonesRewardMain").style.display="none"),o("milestonesEffect").textContent=c>=a[i][t].unlock[e]?a[i][t].rewardText[e]:`Next reward unlocked after ${a[i][t].unlock[e]-c} more completions.`}}},L=(e,t,s)=>{if((s==="upgrades"||s==="researches"||s==="researchesExtra"||s==="ASR")&&t!==n.stage.active)return;let r,i,l,c=s+"Info";if(s==="upgrades")i=n[s][t][e]===1,l=o(`upgrade${e+1}`);else if(s==="researches"||s==="researchesExtra"){i=[n[s][t][e],a[c][t].max[e]];let u=s==="researchesExtra"?"Extra":"";l=o(`research${u}${e+1}Level`),r=o(`research${u}${e+1}Max`)}else s==="researchesAuto"?(i=[n[s][e],a[c].max[e]],l=o(`researchAuto${e+1}Level`),r=o(`researchAuto${e+1}Max`)):s==="ASR"?(i=[n[s][t],a[c].max[t]],l=o("ASRLevel"),r=o("ASRMax")):s==="elements"?(i=n[s][e]===1,l=o(`element${e}`)):(i=[n[s][t][e],a[c][t].max[e]],l=o(`strange${e+1}Stage${t}Level`));if(s==="upgrades"||s==="elements"){let u="green";s==="elements"?[1,2,3,4,11,12,19,20].includes(e)?u="#780000":[5,6,7,8,9,10,13,14,15,16,17,18].includes(e)?u="#a55900":u="#0000c1":t===2?u="darkgreen":t===3?u="#0000b1":t===4&&(u="#1f1f8f"),l.style.backgroundColor=i?u:""}else{let u=i[1],f=i[0];r!==void 0&&(r.textContent=`${u}`),l.textContent=`${f}`,f===u?l.style.color="var(--green-text-color)":f===0?l.style.color="":l.style.color="var(--orchid-text-color)"}},de=()=>{let{accretion:e}=n,{accretionInfo:t}=a,s=o("rankImage"),r=o("rankName");t.rankCost[4]=n.events[0]?5e29:0,o("rankMessage").textContent=e.rank===0?"Might need more than just water... You can increase rank with Mass.":"Increase it with Mass. (Return back to Dust, but unlock something new)",o("rankReset").textContent=t.rankCost[e.rank]===0?"Max rank achieved":`Next rank is ${d(t.rankCost[e.rank])} Mass`,s.src=`Used_art/${t.rankImage[e.rank]}.png`,s.alt=t.rankName[e.rank],r.textContent=t.rankName[e.rank],e.rank===0?r.style.color="":e.rank===1?r.style.color="var(--cyan-text-color)":e.rank===5?r.style.color="var(--darkviolet-text-color)":r.style.color="var(--gray-text-color)"},d=(e,t="auto",s="number")=>{if(typeof e!="number")return e;switch(t==="auto"&&(t=e<1e3?e<1?4:2:0),s){case"input":case"number":if(!isFinite(e))return"Infinity";if(e>=1e6||e<.001&&e>0){let r=Math.floor(Math.log10(e)),i=Math.round(e/10**(r-2))/100;return i===10&&(i=1,r+=1),s==="input"?`${i}e${r}`:`${`${i}`.replace(".",n.separator[1])}e${r}`}else if(t>0){let r=Math.round(e*10**t)/10**t;return s==="input"?`${r}`:r>=1e3?`${r}`.replace(/\B(?=(\d{3})+(?!\d))/,n.separator[0]).replace(".",n.separator[1]):`${r}`.replace(".",n.separator[1])}else return s==="input"?`${Math.round(e)}`:`${Math.round(e)}`.replace(/\B(?=(\d{3})+(?!\d))/,n.separator[0]);case"time":return e>=1728e5?`${Math.trunc(e/864e5)} days`:e>=72e5?`${Math.trunc(e/36e5)} hours`:e>=6e5?`${Math.trunc(e/6e4)} minutes`:`${Math.trunc(e/1e3)} seconds`}},G=(e="")=>{let{stage:t}=n,{stageInfo:s,HTMLSpecial:r,buildingsInfo:i}=a;s.activeAll=[t.current],t.current===4?n.milestones[5][0]>=4&&s.activeAll.push(5):t.current===5&&s.activeAll.unshift(4);for(let f=1;f<=n.strangeness[5][0];f++)t.current!==f&&s.activeAll.unshift(f);let l=t.active;if(e!=="soft"){for(let f of["upgrade","research","element"])o(`${f}Text`).textContent="Hover to see.",o(`${f}Effect`).textContent="Hover to see.",o(`${f}Cost`).textContent="Resource.";if(e==="reload"){for(let f of["strangeness","milestones"])o(`${f}Stage`).textContent="",o(`${f}Text`).textContent="Hover to see.",o(`${f}Effect`).textContent="Hover to see.";o("strangenessCost").textContent="Strange quarks.",o("milestonesCost").textContent="Hover to see.",o("milestonesReward").textContent="Strange quarks.",o("milestonesCostMain").style.display="",o("milestonesRewardMain").style.display="",U();for(let f=1;f<a.strangenessInfo.length;f++)for(let g=0;g<a.strangenessInfo[f].cost.length;g++)O(g,f,"strangeness"),L(g,f,"strangeness");x("upgrades"),x("researches"),x("researchesExtra"),a.automatization.elements=[];for(let f of s.activeAll){k(0,f,"ASR");for(let g=1;g<i.name[f].length;g++)R(g,f);for(let g=0;g<a.researchesInfo[f].cost.length;g++)k(g,f,"researches");for(let g=0;g<a.researchesExtraInfo[f].cost.length;g++)k(g,f,"researchesExtra")}for(let f=0;f<a.researchesAutoInfo.cost.length;f++)k(f,0,"researchesAuto")}a.lastUpgrade[1]=!1,a.lastResearch[0]=-1,a.lastResearch[1]=!1,a.lastElement[1]=!1}for(let f=i.name[l].length;f<r.longestBuilding;f++)o(`building${f}Stats`).style.display="none",o(`building${f}`).style.display="none";for(let f=a.upgradesInfo[l].cost.length;f<r.longestUpgrade;f++)o(`upgrade${f+1}`).style.display="none";for(let f=a.researchesInfo[l].cost.length;f<r.longestResearch;f++)o(`research${f+1}`).style.display="none";for(let f=a.researchesExtraInfo[l].cost.length;f<r.longestResearchExtra;f++)o(`researchExtra${f+1}`).style.display="none";for(let f=1;f<=5;f++){for(let g of _(`stage${f}Only`))g.style.display=l===f?"":"none";for(let g of _(`stage${f}Include`))g.style.display=s.activeAll.includes(f)?"":"none";for(let g of _(`stage${f}Unlock`))g.style.display=t.true>=f?"":"none"}if(o("buildings").style.display="",o("building1").style.display="",o("stageResearch").style.display="",o("extraResearch").style.display="none",l===5&&(o("solarMassStat").style.display="",o("elementStat").style.display=""),localStorage.getItem("theme")!==null&&(o("themeArea").style.display=""),t.true>=5){for(let f=2;f<=4;f++)o(`strangenessSection${f}`).style.display=t.resets>=f+3?"":"none";n.strange[0].total<1&&(o("strangenessTabBtn").style.display="none")}s.priceName=["Energy","Drops","Mass","Elements"][Math.min(l-1,3)],s.activeAll.includes(3)&&de();for(let f=1;f<i.name[l].length;f++){o(`building${f}StatName`).textContent=i.name[l][f],o(`building${f}Name`).textContent=i.name[l][f],o(`building${f}Type`).textContent=i.type[l][f];let g=o(`building${f}Image`);g.src=`Used_art/${r.buildingHTML[l][f-1][0]}.png`,g.alt=r.buildingHTML[l][f-1][1],H(f,"buildings")}o("building0StatName").textContent=i.name[l][0],H(0,"buildings");for(let f=0;f<a.upgradesInfo[l].cost.length;f++){o(`upgrade${f+1}`).style.display="";let g=o(`upgrade${f+1}`);g.src=`Used_art/${r.upgradeHTML[l][f][0]}.png`,g.alt=r.upgradeHTML[l][f][1],L(f,l,"upgrades")}for(let f=0;f<a.researchesInfo[l].cost.length;f++){let g=o(`research${f+1}`);g.style.display="",g.className=r.researchHTML[l][f][2];let y=o(`research${f+1}Image`);y.src=`Used_art/${r.researchHTML[l][f][0]}.png`,y.alt=r.researchHTML[l][f][1],L(f,l,"researches")}if(l!==1&&l!==5){for(let g=0;g<a.researchesExtraInfo[l].cost.length;g++){let y=o(`researchExtra${g+1}`);y.style.display="",y.className=r.researchExtraHTML[l][g][2];let m=o(`researchExtra${g+1}Image`);m.src=`Used_art/${r.researchExtraHTML[l][g][0]}.png`,m.alt=r.researchExtraHTML[l][g][1],L(g,l,"researchesExtra")}let f=document.querySelector("#extraResearch > img");f.src=`Used_art/${r.researchExtraDivHTML[l][0]}.png`,f.alt=r.researchExtraDivHTML[l][1],document.querySelector("#extraResearch > div").className=r.researchExtraDivHTML[l][2]}if(L(0,l,"ASR"),l>=4)for(let f=1;f<a.elementsInfo.cost.length;f++)L(f,4,"elements");let c=document.body.style,u=o("stageWord");if(u.textContent=s.word[t.current],u.style.color=s.textColor[t.current],t.current===1?(c.removeProperty("--stage-text-color"),c.removeProperty("--stage-button-color"),c.removeProperty("--stage-button-border"),c.removeProperty("--image-border-main"),c.removeProperty("--image-stage-outer")):(c.setProperty("--stage-text-color",s.textColor[l]),c.setProperty("--stage-button-color",s.buttonBackgroundColor[l]),c.setProperty("--stage-button-border",s.buttonBorderColor[l]),c.setProperty("--image-border-main",`url(Used_art/Stage${l}%20border.png)`),c.setProperty("--image-stage-outer",s.imageBorderColor[l])),o("currentSwitch").textContent=s.word[l],a.screenReader){o("invisibleBought").textContent=`Current stage is '${s.word[l]}'`;for(let f=i.name[l].length;f<r.longestBuilding;f++)o(`invisibleGetBuilding${f}`).style.display="none";for(let f=0;f<i.name[l].length;f++)o(`invisibleGetBuilding${f}`).textContent=`Get information for ${i.name[l][f]}`;o("invisibleGetResource0").style.display=n.strange[0].total>0?"":"none",o("invisibleGetResource1").style.display=l===1?"":"none",o("invisibleGetResource2").style.display=l===2?"":"none",o("invisibleGetResource4").style.display=l===4?"":"none"}C(q(a.tab)?a.tab:"stage"),(a.theme.default||e==="reload")&&be()};var qe=e=>{let t=document.activeElement;if(t.type==="text"||t.type==="number"||(e.code==="Tab"?document.body.classList.add("outlineOnFocus"):document.body.classList.remove("outlineOnFocus"),e.ctrlKey||e.altKey||e.code[0]==="F"))return;let s=e.shiftKey,r=!isNaN(Number(e.code.slice(-1))),i=!n.toggles.normal[6]||r&&s?e.code:e.key;if(r){let l=Number(i.slice(-1));l>0&&l<n.buildings[n.stage.active].length&&!s&&Q(l);return}else if(e.key.length===1){let l=i.slice(-1).toLowerCase();s||(l==="s"?ie():l==="d"?ce():l==="v"?ue():l==="r"?fe():l==="c"&&ge());return}if(!e.repeat){if(i==="ArrowLeft"||i==="ArrowRight"){let{tabs:l}=a.tabList,c=l.indexOf(a.tab);if(c===-1)return console.error(`Tab '${a.tab}' wasn't found in the list`);if(i==="ArrowLeft"){do c===0?c=l.length-1:c--;while(!q(l[c]));C(l[c])}else{do c===l.length-1?c=0:c++;while(!q(l[c]));C(l[c])}}else if(i==="ArrowDown"||i==="ArrowUp"){if(!Object.hasOwn(a.subtab,a.tab+"Current"))return;let l=a.tabList[a.tab+"Subtabs"],c=l.indexOf(a.subtab[a.tab+"Current"]);if(c===-1)return console.error(`Subtab '${a.subtab[a.tab+"Current"]}' wasn't found in the list`);if(i==="ArrowDown"){do c===0?c=l.length-1:c--;while(!q(a.tab,l[c]));C(a.tab,l[c])}else{do c===l.length-1?c=0:c++;while(!q(a.tab,l[c]));C(a.tab,l[c])}}}};var o=e=>{let t=document.getElementById(e);if(t!==null)return t;throw E(`ID of HTML element (${e}), failed to load, game will not work properly, please refresh. If this happens more than once, then please report it`),new ReferenceError(`ID "${e}" not found.`)},_=e=>[...document.getElementsByClassName(e)],Te=async(e=!1)=>{if(e){let t=localStorage.getItem("save"),s=localStorage.getItem("theme");if(t!==null){let r=JSON.parse(atob(t));if(he(r),n.toggles.normal[0]){let i=Date.now()-n.time.updated,l=K();E(`Welcome back, you were away for ${d(i,0,"time")}.${i>l*1e3?` (Max offline time is ${l/3600} hours)`:""}${a.versionInfo.changed?` Game has been updated to ${n.version}, ${a.versionInfo.log}`:`
Current version is ${n.version}`}`)}}else E(`Welcome to 'Fundamental'.
This is a test-project made by awWhy. Should be supported by modern browsers, phones and screen readers (need to turn support ON in settings).
Was inspired by 'Synergism', 'Antimatter Dimensions' and others.
Current version is ${n.version}`);s!==null&&(a.theme.default=!1,a.theme.stage=Number(s)),ae(),z(!1,"toggle","reload"),te(),localStorage.getItem("textMove")!==null&&we()}G("reload"),e&&(o("body").style.display="",o("loading").style.display="none"),Le(),o("saveFileNameInput").value=n.fileName,o("thousandSeparator").value=n.separator[0],o("decimalPoint").value=n.separator[1],o("stageInput").value=`${n.stage.input}`,o("vaporizationInput").value=`${n.vaporization.input}`,o("collapseMassInput").value=`${n.collapse.inputM}`,o("collapseStarsInput").value=`${n.collapse.inputS}`;for(let t=0;t<h.toggles.normal.length;t++)H(t,"normal");for(let t=0;t<h.toggles.auto.length;t++)H(t,"auto");if(j(),e&&!n.toggles.normal[0]){let t=Date.now()-n.time.updated,s=K();await A(`Welcome back, you were away for ${d(t,0,"time")}${t>s*1e3?` (max offline time is ${s/3600} hours)`:""}. Game was set to have offline time disabled. Press confirm to NOT to gain offline time.${a.versionInfo.changed?` Also game has been updated to ${n.version}, ${a.versionInfo.log}`:`
Current version is ${n.version}`}`)&&(a.timeSpecial.lastSave+=t,n.time.updated=Date.now())}N(!1,"all")};Te(!0);{let{mobileDevice:e,screenReader:t}=a;document.addEventListener("keydown",s=>qe(s));for(let s=0;s<h.toggles.normal.length;s++)o(`toggle${s}`).addEventListener("click",()=>H(s,"normal",!0));for(let s=0;s<a.HTMLSpecial.longestBuilding;s++)o(`toggleBuilding${s}`).addEventListener("click",()=>H(s,"buildings",!0));for(let s=0;s<h.toggles.auto.length;s++)o(`toggleAuto${s}`).addEventListener("click",()=>H(s,"auto",!0));for(let s=1;s<a.HTMLSpecial.longestBuilding;s++)o(`building${s}Btn`).addEventListener("click",()=>Q(s));for(let s=0;s<a.HTMLSpecial.longestUpgrade;s++){let r=o(`upgrade${s+1}`);e?(r.addEventListener("touchstart",()=>S(s,"auto","upgrades")),r.addEventListener("touchend",()=>$(s,"auto","upgrades"))):(r.addEventListener("mouseover",()=>S(s,"auto","upgrades")),r.addEventListener("click",()=>$(s,"auto","upgrades"))),t&&r.addEventListener("focus",()=>S(s,"auto","upgrades"))}o("dischargeReset").addEventListener("click",()=>{ce()}),o("vaporizationReset").addEventListener("click",()=>{ue()}),o("rankReset").addEventListener("click",()=>{fe()}),o("stageReset").addEventListener("click",()=>{ie()}),o("collapseReset").addEventListener("click",()=>{ge()}),o("buy1x").addEventListener("click",()=>j("1")),o("buyAny").addEventListener("click",()=>j("any")),o("buyAnyInput").addEventListener("blur",()=>j("any")),o("buyMax").addEventListener("click",()=>j("max")),o("buyStrict").addEventListener("click",()=>j("strict")),o("vacuumSwitch").addEventListener("click",De);for(let s=0;s<a.HTMLSpecial.longestResearch;s++){let r=o(`research${s+1}Image`);e?(r.addEventListener("touchstart",()=>S(s,"auto","researches")),r.addEventListener("touchend",()=>$(s,"auto","researches"))):(r.addEventListener("mouseover",()=>S(s,"auto","researches")),r.addEventListener("click",()=>$(s,"auto","researches"))),t&&r.addEventListener("focus",()=>S(s,"auto","researches"))}for(let s=0;s<a.HTMLSpecial.longestResearchExtra;s++){let r=o(`researchExtra${s+1}Image`);e?(r.addEventListener("touchstart",()=>S(s,"auto","researchesExtra")),r.addEventListener("touchend",()=>$(s,"auto","researchesExtra"))):(r.addEventListener("mouseover",()=>S(s,"auto","researchesExtra")),r.addEventListener("click",()=>$(s,"auto","researchesExtra"))),t&&r.addEventListener("focus",()=>S(s,"auto","researchesExtra"))}for(let s=0;s<a.researchesAutoInfo.cost.length;s++){let r=o(`researchAuto${s+1}Image`);e?(r.addEventListener("touchstart",()=>S(s,"auto","researchesAuto")),r.addEventListener("touchend",()=>$(s,"auto","researchesAuto"))):(r.addEventListener("mouseover",()=>S(s,"auto","researchesAuto")),r.addEventListener("click",()=>$(s,"auto","researchesAuto"))),t&&r.addEventListener("focus",()=>S(s,"auto","researchesAuto"))}{let s=o("ASRImage");e?(s.addEventListener("touchstart",()=>S(0,"auto","ASR")),s.addEventListener("touchend",()=>$(0,"auto","ASR"))):(s.addEventListener("mouseover",()=>S(0,"auto","ASR")),s.addEventListener("click",()=>$(0,"auto","ASR"))),t&&s.addEventListener("focus",()=>S(0,"auto","ASR"))}for(let s=1;s<a.elementsInfo.cost.length;s++){let r=o(`element${s}`);e?(r.addEventListener("touchstart",()=>S(s,4,"elements")),r.addEventListener("touchend",()=>$(s,4,"elements"))):(r.addEventListener("mouseover",()=>S(s,4,"elements")),r.addEventListener("click",()=>$(s,4,"elements"))),t&&r.addEventListener("focus",()=>S(s,4,"elements"))}for(let s=1;s<a.strangenessInfo.length;s++)for(let r=0;r<a.strangenessInfo[s].cost.length;r++){let i=o(`strange${r+1}Stage${s}Image`);e?(i.addEventListener("touchstart",()=>S(r,s,"strangeness")),i.addEventListener("touchend",()=>$(r,s,"strangeness"))):(i.addEventListener("mouseover",()=>S(r,s,"strangeness")),i.addEventListener("click",()=>$(r,s,"strangeness"))),t&&i.addEventListener("focus",()=>S(r,s,"strangeness"))}for(let s=1;s<a.milestonesInfo.length;s++)for(let r=0;r<a.milestonesInfo[s].need.length;r++)o(`milestone${r+1}Stage${s}`).addEventListener("mouseover",()=>S(r,s,"milestones")),t&&o(`milestone${r+1}Stage${s}`).addEventListener("focus",()=>S(r,s,"milestones"));o("vaporizationInput").addEventListener("blur",()=>{let s=o("vaporizationInput");s.value=d(Math.max(Number(s.value),1),"auto","input"),n.vaporization.input=Number(s.value)}),o("collapseMassInput").addEventListener("blur",()=>{let s=o("collapseMassInput");s.value=d(Math.max(Number(s.value),1),"auto","input"),n.collapse.inputM=Number(s.value)}),o("collapseStarsInput").addEventListener("blur",()=>{let s=o("collapseStarsInput");s.value=d(Math.max(Number(s.value),1),"auto","input"),n.collapse.inputS=Number(s.value)}),o("stageInput").addEventListener("blur",()=>{let s=o("stageInput");s.value=d(Math.max(Number(s.value),1),"auto","input"),n.stage.input=Number(s.value)}),o("save").addEventListener("click",()=>{Z("save")}),o("file").addEventListener("change",()=>{Z("load")}),o("export").addEventListener("click",()=>{Z("export")}),o("delete").addEventListener("click",()=>{Z("delete")}),o("switchTheme0").addEventListener("click",()=>pe(0,!0));for(let s=1;s<a.stageInfo.word.length;s++)o(`switchTheme${s}`).addEventListener("click",()=>pe(s));if(o("toggleAuto5").addEventListener("click",()=>{n.toggles.auto[5]&&x("upgrades")}),o("toggleAuto6").addEventListener("click",()=>{n.toggles.auto[6]&&x("researches")}),o("toggleAuto7").addEventListener("click",()=>{n.toggles.auto[7]&&x("researchesExtra")}),o("saveFileNameInput").addEventListener("blur",()=>Qe()),o("saveFileHoverButton").addEventListener("mouseover",()=>{o("saveFileNamePreview").textContent=Ae()}),o("saveFileHoverButton").addEventListener("focus",()=>{o("saveFileNamePreview").textContent=Ae()}),o("mainInterval").addEventListener("blur",()=>N(!1,"main")),o("numbersInterval").addEventListener("blur",()=>N(!1,"numbers")),o("visualInterval").addEventListener("blur",()=>N(!1,"visual")),o("autoSaveInterval").addEventListener("blur",()=>N(!1,"autoSave")),o("thousandSeparator").addEventListener("blur",()=>ve(!1)),o("decimalPoint").addEventListener("blur",()=>ve(!0)),o("pauseGame").addEventListener("click",()=>{Xe()}),o("noMovement").addEventListener("click",()=>we(!0)),o("fontSizeToggle").addEventListener("click",()=>te(!0)),o("customFontSize").addEventListener("blur",()=>te(!1,!0)),o("mobileDeviceToggle").addEventListener("click",()=>ae(!0)),o("screenReaderToggle").addEventListener("click",()=>z(!0)),t){for(let s=0;s<a.HTMLSpecial.longestBuilding;s++)o(`invisibleGetBuilding${s}`).addEventListener("click",()=>z(s,"button","building"));o("invisibleGetResource0").addEventListener("click",()=>z(0,"button","resource")),o("invisibleGetResource1").addEventListener("click",()=>z(1,"button","resource")),o("invisibleGetResource2").addEventListener("click",()=>z(2,"button","resource")),o("invisibleGetResource4").addEventListener("click",()=>z(4,"button","resource"))}o("hideToggle").addEventListener("click",ne),o("stageTabBtn").addEventListener("click",()=>C("stage")),o("researchTabBtn").addEventListener("click",()=>C("research")),o("strangenessTabBtn").addEventListener("click",()=>C("strangeness")),o("settingsTabBtn").addEventListener("click",()=>C("settings")),o("stageSubtabBtnStructures").addEventListener("click",()=>C("stage","Structures")),o("stageSubtabBtnAdvanced").addEventListener("click",()=>C("stage","Advanced")),o("researchSubtabBtnResearches").addEventListener("click",()=>C("research","Researches")),o("researchSubtabBtnElements").addEventListener("click",()=>C("research","Elements")),o("settingsSubtabBtnSettings").addEventListener("click",()=>C("settings","Settings")),o("settingsSubtabBtnStats").addEventListener("click",()=>C("settings","Stats")),o("strangenessSubtabBtnMatter").addEventListener("click",()=>C("strangeness","Matter")),o("strangenessSubtabBtnMilestones").addEventListener("click",()=>C("strangeness","Milestones"));for(let s=1;s<a.stageInfo.word.length;s++)o(`${a.stageInfo.word[s]}Switch`).addEventListener("click",()=>He(s))}console.timeEnd("Game loaded in");function N(e=!1,t=""){let{intervals:s}=n,{intervalsId:r}=a;if(t!==""){let i=o("mainInterval"),l=o("numbersInterval"),c=o("visualInterval"),u=o("autoSaveInterval");t==="main"?(s.main=Math.min(Math.max(Math.trunc(Number(i.value)),20),1e3),s.main>s.numbers&&(s.numbers=s.main)):t==="numbers"?(s.numbers=Math.min(Math.max(Math.trunc(Number(l.value)),20),1e3),s.numbers<s.main&&(s.main=s.numbers)):t==="visual"?s.visual=Math.min(Math.max(Math.trunc(Number(c.value)*10)/10,.2),10):t==="autoSave"&&(s.autoSave=Math.min(Math.max(Math.trunc(Number(u.value)),10),1800)),i.value=`${s.main}`,l.value=`${s.numbers}`,c.value=`${s.visual}`,u.value=`${s.autoSave}`}clearInterval(r.main),clearInterval(r.numbers),clearInterval(r.visual),clearInterval(r.autoSave),e||(r.main=setInterval(Ce,s.main),r.numbers=setInterval(F,s.numbers),r.visual=setInterval(V,s.visual*1e3),r.autoSave=setInterval(Z,s.autoSave*1e3,"save"))}async function Z(e){switch(e){case"load":{let t=o("file"),s=t.files;if(s===null)return E("Loaded file wasn't found, somehow");let r=await s[0].text();try{let i=JSON.parse(atob(r)),l=Object.hasOwn(i,"player")?i.player.version:i.version;N(!0),he(i);let c=Date.now()-n.time.updated,u=K();o("isSaved").textContent="Imported",a.timeSpecial.lastSave=0,n.toggles.normal[0]?E(`This save is ${d(c,0,"time")} old${c>u*1e3?`, max offline time is ${u/3600} hours`:""}.${l!==n.version?`
Also save file version is ${l}, while game version is ${n.version}, ${a.versionInfo.log}`:`
Save file version is ${n.version}`}`):await A(`This save file was set to have offline progress disabled (currently ${d(c,0,"time")}${c>u*1e3?`, max is ${u/3600} hours`:""}). Press confirm to NOT to gain offline time.${l!==n.version?`
Also save file version is ${l}, while game version is ${n.version}, ${a.versionInfo.log}`:`
Save file version is ${n.version}`}`)&&(a.timeSpecial.lastSave+=c,n.time.updated=Date.now()),Te()}catch(i){N(),E(`Incorrect save file format.
Full error is: '${i}'`)}finally{t.value=""}return}case"save":{try{let t=btoa(JSON.stringify(n));localStorage.setItem("save",t),clearInterval(a.intervalsId.autoSave),a.intervalsId.autoSave=setInterval(Z,n.intervals.autoSave*1e3,"save"),o("isSaved").textContent="Saved",a.timeSpecial.lastSave=0}catch(t){E(`Failed to save file.
Full error is: '${t}'`)}return}case"export":{if(n.strangeness[4][7]>=1){let r=me(),i=Math.trunc(n.stage.export*r/86400);n.strange[0].true+=i,n.strange[0].total+=i,n.stage.export-=i*86400/r}let t=btoa(JSON.stringify(n)),s=document.createElement("a");s.href="data:text/plain;charset=utf-8,"+t,s.download=Ae(),s.click();return}case"delete":{let t=await ye(`This will truly delete your save file and clear local storage!
Type 'delete' to confirm.`);(t==null?void 0:t.toLowerCase())==="delete"?(N(!0),localStorage.clear(),ae(),z(!1,"toggle","reload"),te(),C("stage"),Object.assign(n,structuredClone(h)),n.time.started=Date.now(),n.time.updated=n.time.started,Te(!0)):t!==null&&t!==""&&E(`You wrote '${t}', so save file wasn't deleted`)}}}var Qe=()=>{let e=o("saveFileNameInput"),t;if(e.value.length>4)t=e.value.replaceAll(/[\\/:*?"<>|]/g,"_");else{let s=e.value.replace(/[1-9]/,"").toLowerCase();e.value.length<4||e.value.length===4&&(s==="com"||s==="lpt")?t=h.fileName:t=e.value.replaceAll(/[\\/:*?"<>|]/g,"_")}try{btoa(t),n.fileName=t,e.value=t}catch(s){E(`Save file name is not allowed.
Full error is: '${s}'`)}},Ae=()=>{let e=n.fileName,t=["[stage]","[true]","[date]","[time]"],s=[a.stageInfo.word[n.stage.current],a.stageInfo.word[n.stage.true],Ye("dateDMY"),Ye("timeHMS")];for(let r=0;r<t.length;r++)e=e.replaceAll(t[r],s[r]);return e+".txt"},Ye=e=>{let t=new Date,s;switch(e){case"dateDMY":s=`${t.getDate()}.${t.getMonth()+1}.${t.getFullYear()}`;break;case"timeHMS":{let r=`${t.getMinutes()}`;r.length===1&&(r="0"+r);let i=`${t.getSeconds()}`;i.length===1&&(i="0"+i),s=`${t.getHours()}-${r}-${i}`}}return s},Xe=async()=>{N(!0);let e=await ye(`Game is currently paused. Press any button bellow to unpause it. Can enter 'NoOffline' to NOT to gain offline time. (Max offline time is ${K()/3600} hours)`);(e==null?void 0:e.toLowerCase())==="nooffline"?n.time.updated=Date.now():e!==null&&e!==""&&E(`You wrote '${e}', so offline time was gained`),N()};})();
//# sourceMappingURL=Code.js.map
