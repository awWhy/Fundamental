"use strict";(()=>{var ee={Limit:e=>{let{technical:s}=ee,r=s.convert(e);return{plus:function(...o){if(o.length<1)return this;let i=s.convertAll(o);for(let u=0;u<i.length;u++)r=s.add(r,i[u]);return this},minus:function(...o){if(o.length<1)return this;let i=s.convertAll(o);for(let u=0;u<i.length;u++)r=s.sub(r,i[u]);return this},multiply:function(...o){if(o.length<1)return this;let i=s.convertAll(o);for(let u=0;u<i.length;u++)r=s.mult(r,i[u]);return this},divide:function(...o){if(o.length<1)return this;let i=s.convertAll(o);for(let u=0;u<i.length;u++)r=s.div(r,i[u]);return this},power:function(o){return r=s.pow(r,o),this},log:function(o=2.718281828459045){return r=s.log(r,o),this},abs:function(){return r[0]=Math.abs(r[0]),this},trunc:function(){return r=s.trunc(r),this},floor:function(){return r=s.floor(r),this},ceil:function(){return r=s.ceil(r),this},round:function(){return r=s.round(r),this},isNaN:()=>isNaN(r[0])||isNaN(r[1]),isFinite:()=>isFinite(r[0])&&isFinite(r[1]),lessThan:o=>s.less(r,s.convert(o)),lessOrEqual:o=>s.lessOrEqual(r,s.convert(o)),moreThan:o=>s.more(r,s.convert(o)),moreOrEqual:o=>s.moreOrEqual(r,s.convert(o)),notEqual:o=>s.notEqual(r,s.convert(o)),equal:(...o)=>{if(o.length<1)return!0;let i=s.convertAll(o),u=s.equal(r,i[0]);for(let a=1;a<i.length;a++){if(!u)return!1;u=s.equal(i[a-1],i[a])}return u},max:function(...o){if(o.length<1)return this;let i=s.convertAll(o);for(let u=0;u<i.length;u++){if(isNaN(i[u][0])){r=[NaN,NaN];break}s.less(r,i[u])&&(r=i[u])}return this},min:function(...o){if(o.length<1)return this;let i=s.convertAll(o);for(let u=0;u<i.length;u++){if(isNaN(i[u][0])){r=[NaN,NaN];break}s.more(r,i[u])&&(r=i[u])}return this},format:(o={})=>s.format(r,o),toNumber:()=>Number(s.convertBack(r)),toString:()=>s.convertBack(r),toArray:()=>s.prepare(r)}},LimitAlt:{abs:e=>e[0]==="-"?e.substring(1):e,isNaN:e=>e.includes("NaN"),isFinite:e=>!e.includes("Infinity")&&!e.includes("NaN"),clone:e=>[e[0],e[1]],sort:(e,s=!1)=>{if(e.length<2)return;let r=ee.technical.convertAll(e),o=s?ee.technical.moreOrEqual:ee.technical.lessOrEqual,i=[[0]];e:for(let c=1;c<r.length;c++){let d=i[i.length-1];if(o(r[c-1],r[c])){do if(d.push(c),c++,c>=r.length)break e;while(o(r[c-1],r[c]));i.push([c])}else{do if(d.push(c),c++,c>=r.length){d.reverse();break e}while(o(r[c],r[c-1]));d.reverse(),i.push([c])}}let u=c=>{if(c.length===1)return c[0];let d=[],p;for(p=0;p<c.length-1;p+=2){d.push([]);let m=d[d.length-1],b=c[p],x=c[p+1],w=0,M=0;for(;w<b.length||M<x.length;)M>=x.length||w<b.length&&o(r[b[w]],r[x[M]])?(m.push(b[w]),w++):(m.push(x[M]),M++)}return p===c.length-1&&d.push(c[p]),d=u(d),d};i=u(i);let a=e.slice(0);e.length=0;for(let c=0;c<a.length;c++)e.push(a[i[c]])}},technical:{add:(e,s)=>{if(s[0]===0)return e;if(e[0]===0)return s;if(!isFinite(e[0])||!isFinite(s[0])){let i=e[0]+s[0];return isNaN(e[0])||isNaN(s[0])||isNaN(i)?[NaN,NaN]:[i,1/0]}let r=e[1]-s[1];if(Math.abs(r)>15)return r>0?e:s;r===0?e[0]+=s[0]:r>0?e[0]+=s[0]/10**r:(s[0]+=e[0]/10**-r,e=s);let o=Math.abs(e[0]);if(o===0)e[1]=0;else if(o>=10)e[0]/=10,e[1]++;else if(o<1){let i=-Math.floor(Math.log10(o));e[0]*=10**i,e[1]-=i}return e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e},sub:(e,s)=>(s[0]*=-1,ee.technical.add(e,s)),mult:(e,s)=>e[0]===0||s[0]===0?[0,0]:(e[1]+=s[1],e[0]*=s[0],Math.abs(e[0])>=10&&(e[0]/=10,e[1]++),e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e),div:(e,s)=>s[0]===0?[NaN,NaN]:e[0]===0?[0,0]:(e[1]-=s[1],e[0]/=s[0],Math.abs(e[0])<1&&(e[0]*=10,e[1]--),e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e),pow:(e,s)=>{if(s===0)return e[0]===0||isNaN(e[0])?[NaN,NaN]:[1,0];if(e[0]===0)return s<0?[NaN,NaN]:[0,0];if(!isFinite(s))return e[1]===0&&(e[0]===1||e[0]===-1&&!isNaN(s))?[1,0]:s===-1/0&&e[1]>=0||s===1/0&&e[1]<0?[0,0]:isNaN(s)||isNaN(e[0])?[NaN,NaN]:[1/0,1/0];let r=e[0]<0?Math.abs(s)%2:null;if(r!==null){if(Math.floor(s)!==s)return[NaN,NaN];e[0]*=-1}let o=s*(Math.log10(e[0])+e[1]);if(!isFinite(o))return isNaN(e[0])?[NaN,NaN]:o===-1/0?[0,0]:[r===1?-1/0:1/0,1/0];let i=Math.floor(o);return e[0]=10**(o-i),e[1]=i,e[0]=Math.round(e[0]*1e14)/1e14,e[0]===10&&(e[0]=1,e[1]++),r===1&&(e[0]*=-1),e},log:(e,s)=>{if(Math.abs(s)===1||e[0]===-1&&e[1]===0)return[NaN,NaN];if(e[0]===1&&e[1]===0)return[0,0];if(s===0)return[NaN,NaN];if(e[0]===0)return isNaN(s)?[NaN,NaN]:[Math.abs(s)>1?-1/0:1/0,1/0];if(!isFinite(s))return[NaN,NaN];if(!isFinite(e[0]))return isNaN(e[0])||e[0]===-1/0?[NaN,NaN]:[Math.abs(s)<1?-1/0:1/0,1/0];let r=e[0]<0;if(r){if(s>0)return[NaN,NaN];e[0]*=-1}let o=e[1]<0,i=Math.log10(Math.abs(Math.log10(e[0])+e[1])),u=Math.floor(i);if(e[0]=10**(i-u),e[1]=u,o&&(e[0]*=-1),s!==10){e[0]/=Math.log10(Math.abs(s));let a=Math.abs(e[0]);if(a<1||a>=10){let c=Math.floor(Math.log10(a));e[0]/=10**c,e[1]+=c}}if(s<0||r){if(e[1]<0)return[NaN,NaN];let a=e[1]<16?Math.abs(Math.round(e[0]*1e14)/10**(14-e[1]))%2:0;if(s<0&&!r){if(a!==0)return[NaN,NaN]}else if(a!==1)return[NaN,NaN]}return e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e},less:(e,s)=>e[0]===0||s[0]===0||e[1]===s[1]?e[0]<s[0]:e[0]>0&&s[0]>0?e[1]<s[1]:e[0]<0&&s[0]>0?!0:s[0]<0&&e[0]>0?!1:e[1]>s[1],lessOrEqual:(e,s)=>e[0]===0||s[0]===0||e[1]===s[1]?e[0]<=s[0]:e[0]>0&&s[0]>0?e[1]<s[1]:e[0]<0&&s[0]>0?!0:s[0]<0&&e[0]>0?!1:e[1]>s[1],more:(e,s)=>e[0]===0||s[0]===0||e[1]===s[1]?e[0]>s[0]:e[0]>0&&s[0]>0?e[1]>s[1]:e[0]<0&&s[0]>0?!1:s[0]<0&&e[0]>0?!0:e[1]<s[1],moreOrEqual:(e,s)=>e[0]===0||s[0]===0||e[1]===s[1]?e[0]>=s[0]:e[0]>0&&s[0]>0?e[1]>s[1]:e[0]<0&&s[0]>0?!1:s[0]<0&&e[0]>0?!0:e[1]<s[1],equal:(e,s)=>e[1]===s[1]&&e[0]===s[0],notEqual:(e,s)=>e[1]!==s[1]||e[0]!==s[0],trunc:e=>e[1]<0?[0,0]:(e[1]===0?e[0]=Math.trunc(e[0]):e[1]<=14&&(e[0]=Math.trunc(e[0]*10**e[1])/10**e[1]),e),floor:e=>e[1]<0?[e[0]<0?-1:0,0]:(e[1]===0?e[0]=Math.floor(e[0]):e[1]<=14&&(e[0]=Math.floor(e[0]*10**e[1])/10**e[1]),e),ceil:e=>e[1]<0?[e[0]<0?0:1,0]:(e[1]===0?e[0]=Math.ceil(e[0]):e[1]<=14&&(e[0]=Math.ceil(e[0]*10**e[1])/10**e[1]),e),round:e=>e[1]<0?[e[1]===-1?Math.round(e[0]/10):0,0]:(e[1]===0?e[0]=Math.round(e[0]):e[1]<=14&&(e[0]=Math.round(e[0]*10**e[1])/10**e[1]),e),format:(e,s)=>{let[r,o]=e;if(!isFinite(r)||!isFinite(o))return ee.technical.convertBack(e);if((o>=1e4||o<=-1e4)&&s.type!=="input"){let c=s.digits!==void 0?s.digits:2,d=Math.floor(Math.log10(Math.abs(o))),p=Math.abs(Math.round(o/10**(d-c))/10**c);return p===10&&(p=1,d++),r<0&&(p*=-1),`${(s.padding===!0?p.toFixed(c):`${p}`).replace(".",t.separator[1])}e${o<0?"-":""}e${d}`}if(o>=6||o<-3){let c=s.digits!==void 0?s.digits:2,d=o,p=Math.round(r*10**c)/10**c;Math.abs(p)===10&&(p=1,d++);let m=s.padding===!0?p.toFixed(c):`${p}`;return s.type==="input"?`${m}e${d}`:`${m.replace(".",t.separator[1])}e${d}`}let i=s.digits!==void 0?s.digits:Math.max(4-Math.max(o,0),0),u=Math.round(r*10**(i+o))/10**i,a=s.padding===!0?u.toFixed(i):`${u}`;return s.type==="input"?a:u>=1e3?a.replace(".",t.separator[1]).replace(/\B(?=(\d{3})+(?!\d))/,t.separator[0]):a.replace(".",t.separator[1])},convert:e=>{let s;if(typeof e!="object"||e===null){typeof e!="string"&&(e=`${e}`);let o=e.indexOf("e");s=o===-1?[Number(e),0]:[Number(e.slice(0,o)),Number(e.slice(o+1))]}else s=[e[0],e[1]];if(!isFinite(s[0]))return isNaN(s[0])?[NaN,NaN]:[s[0],1/0];let r=Math.abs(s[0]);if(r===0)return[0,0];if(r<1||r>=10){let o=Math.floor(Math.log10(r));s[0]/=10**o,s[1]+=o,Math.abs(s[0])<1&&(s[0]*=10,s[1]--)}return s[0]=Math.round(s[0]*1e14)/1e14,Math.abs(s[0])===10&&(s[0]=1,s[1]++),s},convertAll:e=>{let s=[],{convert:r}=ee.technical;for(let o=0;o<e.length;o++)s[o]=r(e[o]);return s},prepare:e=>isFinite(e[0])&&isFinite(e[1])?e:e[0]===0||e[1]===-1/0?[0,0]:isNaN(e[0])||isNaN(e[1])?[NaN,NaN]:[e[0]<0?-1/0:1/0,1/0],convertBack:e=>(e=ee.technical.prepare(e),isFinite(e[0])?e[1]===0?`${e[0]}`:`${e[0]}e${e[1]}`:`${e[0]}`)}},{Limit:Lt,LimitAlt:qt}=ee,g=Lt;var se=(e,s=null)=>{switch(e){case"stage":return s==="Advanced"?t.inflation.vacuum||l.strangeInfo.instability>0:s==="Structures"||s===null;case"Elements":case"upgrade":return t.stage.resets<1&&t.discharge.energyMax<(t.inflation.vacuum?40:9)?!1:s==="Elements"||e==="Elements"?l.stageInfo.activeAll.includes(4)&&t.upgrades[4][1]===1:s==="Upgrades"||s===null;case"strangeness":return t.strange[0].total<=0?!1:s==="Milestones"?t.strangeness[5][8]>=1||!t.inflation.vacuum:s==="Matter"||s===null;case"settings":return s==="History"?t.strange[0].total>0:s==="Settings"||s==="Stats"||s===null}return!1},pt=(e,s)=>{if(e<1||l.buildingsInfo.maxActive[s]<e+1)return!1;if(s===1)return!0;if(s===2)return e===6?t.strangeness[2][8]>=1:!0;if(s===3){if(t.accretion.rank===0)return!1;if(e===1)return!0;if(e===2)return t.upgrades[3][2]===1;if(e===3)return t.upgrades[3][4]===1;if(e===4)return t.upgrades[3][8]===1;if(e===5)return t.upgrades[3][11]===1&&t.strangeness[3][8]>=1}else if(s===4){if(t.collapse.mass<l.collapseInfo.unlockB[e]&&t.buildings[5][3].true<1)return!1;if(e===1)return!0;if(e===2)return t.researchesExtra[4][0]>=1;if(e===3)return t.researchesExtra[4][0]>=2;if(e===4)return t.researchesExtra[4][0]>=3;if(e===5)return t.strangeness[4][9]>=1&&(t.collapse.stars[2]>0||t.buildings[5][3].true>=1)}else if(s===5){if(t.collapse.mass<l.collapseInfo.unlockG[e]&&t.buildings[5][3].true<1)return!1;if(e===1)return t.inflation.vacuum||t.milestones[2][0]>=6;if(e===2)return t.inflation.vacuum||t.milestones[3][0]>=7;if(e===3)return t.strangeness[5][6]>=1}return!1},ge=(e,s,r)=>{if(e<0)return!1;switch(r){case"upgrades":if(l.upgradesInfo[s].maxActive<e+1)return!1;if(s===1)return e===0||e===1?t.inflation.vacuum:e>5?t.upgrades[1][5]===1:!0;if(s===2)return e===7?t.strangeness[2][2]>=3:e===8?t.strangeness[2][10]>=3:!0;if(s===3)return t.accretion.rank<l.accretionInfo.rankU[e]||t.accretion.rank===0?!1:e===7?t.strangeness[3][2]>=3:!0;if(s===4)return t.collapse.mass<l.collapseInfo.unlockU[e]&&t.buildings[5][3].true<1?!1:e===2?t.upgrades[4][1]===1:e===3?t.strangeness[4][2]>=1&&t.upgrades[4][2]===1&&t.collapse.stars[1]>0:!0;if(s===5){if(e===0)return t.inflation.vacuum||t.milestones[2][0]>=6;if(e===1)return t.inflation.vacuum||t.milestones[3][0]>=7;if(e===2)return t.buildings[5][3].true>=1&&(t.collapse.mass>=1e6||!t.inflation.vacuum)}break;case"researches":if(l.researchesInfo[s].maxActive<e+1)return!1;if(s===1)return t.discharge.current>=4;if(s===2)return!0;if(s===3)return t.accretion.rank>=l.accretionInfo.rankR[e]&&t.accretion.rank!==0;if(s===4)return t.collapse.mass<l.collapseInfo.unlockR[e]&&t.buildings[5][3].true<1?!1:e===3?(t.collapse.stars[0]>0||t.buildings[5][3].true>=1)&&t.strangeness[4][2]>=2:e===4?t.collapse.stars[2]>0||t.buildings[5][3].true>=1:!0;if(s===5){if(e===0)return t.inflation.vacuum||t.milestones[2][0]>=6;if(e===1)return t.inflation.vacuum||t.milestones[3][0]>=7}break;case"researchesExtra":if(l.researchesExtraInfo[s].maxActive<e+1)return!1;if(s===1)return e===1?t.researchesExtra[1][2]>=2:e===3?t.researchesExtra[1][2]>=1:e===4?t.accretion.rank>=6:t.discharge.current>=5;if(s===2)return t.vaporization.clouds[0]<=0?!1:e===3?t.accretion.rank>=6:!0;if(s===3)return t.accretion.rank<l.accretionInfo.rankE[e]||t.accretion.rank===0?!1:e===4?t.researchesExtra[1][2]>=2:!0;if(s===4)return e===1?t.collapse.stars[0]>0||t.buildings[5][3].true>=1:e===2?(t.collapse.stars[0]>0||t.buildings[5][3].true>=1)&&t.strangeness[4][2]>=3:!0;break;case"researchesAuto":{if(!t.inflation.vacuum)return!1;let o=l.researchesAutoInfo.autoStage[e][t.researchesAuto[e]];return o===s||s===5&&o===4}case"ASR":return s===1?t.upgrades[1][5]>=1:s===3?t.accretion.rank!==0:!0;case"elements":return e>=27?t.upgrades[4][3]===1:e>=11?t.upgrades[4][2]===1&&(t.collapse.stars[1]>0||t.buildings[5][3].true>=1):e>=6?t.upgrades[4][2]===1:t.upgrades[4][1]===1;case"strangeness":if(l.strangenessInfo[s].maxActive<e+1)return!1;if(t.inflation.vacuum){if(s===1){if(e===9)return t.challenges.void[1]>=1;if(e===10)return t.challenges.void[1]>=2;if(e===11)return t.challenges.void[4]>=2}else if(s===2){if(e===9)return t.challenges.void[2]>=1;if(e===10)return t.challenges.void[2]>=2}else if(s===3){if(e===9)return t.challenges.void[4]>=4;if(e===10)return t.challenges.void[1]>=3}else if(s===4){if(e===10)return t.challenges.void[4]>=3}else if(s===5){if(e===8)return t.challenges.void[4]>=1;if(e===10)return t.challenges.void[3]>=5;if(e===6)return!1;if([3,4,6,7,9].includes(e))return t.strangeness[5][5]>=1}return!0}if((s===1||s===4)&&e<8||(s===2||s===3)&&e<7)return!0;if(t.milestones[4][0]<8)return!1;if(s===5){if(e===3||e===7)return t.milestones[2][0]>=6;if(e===4)return t.milestones[3][0]>=7;if(e===5)return t.milestones[2][0]>=6||t.milestones[3][0]>=7}return!0}return!1},fe=(e,s,r)=>{switch(r){case"structures":if(s===5&&e===3)return!1;break;case"upgrades":if(s===1)return e!==5;if(s===2)return e!==2;if(s===4)return!1;if(s===5&&e===2)return t.inflation.vacuum;break;case"researches":if(s===1)return e!==3;if(s===2)return e>1;break;case"researchesExtra":if(s===1)return e!==2;if(s===2)return e>2;if(s===4)return e!==0;break;case"elements":return e!==26&&e!==27}return!0},ht=(e,s)=>{if(t.inflation.vacuum){if(t.strangeness[5][8]<1||t.challenges.active!==0)return!1}else if(t.strange[0].total<=0||s===5&&t.strangeness[5][8]<1)return!1;let r=l.milestonesInfo[s].need[e];if(r[0]===0)return!1;if(s===1){if(e===0)return g(t.buildings[1][t.inflation.vacuum?1:0].current).moreOrEqual(r);if(e===1)return g(t.discharge.energy).moreOrEqual(r)}else if(s===2){if(e===0)return g(t.inflation.vacuum?t.vaporization.clouds:t.buildings[2][1].current).moreOrEqual(r);if(e===1)return g(t.buildings[2][2].current).moreOrEqual(r)}else if(s===3){if(e===0)return g(t.buildings[3][0].current).moreOrEqual(r);if(e===1)return g(t.buildings[3][4].true+t.buildings[3][5].true).moreOrEqual(r)}else if(s===4){if(e===0)return g(t.inflation.vacuum?t.buildings[4][0].current:t.collapse.mass).moreOrEqual(r);if(e===1)return g(t.collapse.stars[2]).moreOrEqual(r)}else if(s===5){if(e===0)return g(l.collapseInfo.trueStars).moreOrEqual(r);if(e===1)return g(t.buildings[5][3].current).moreOrEqual(r)}return!1};var Se=e=>{let{buildings:s}=v,{buildingsInfo:r,upgradesInfo:o,researchesInfo:i,researchesExtraInfo:u,strangenessInfo:a}=l;if(e){I.footerStatsHTML[1][0]=["Energy%20mass.png","stage1borderImage cyanText","Mass"],r.hoverText[2][0]="Tritium",r.hoverText[3][0]="Preons hardcap",s[1][0].current=[5.476,-3],s[2][0].current=[0,0],s[3][0].current=[9.76185667392,-36];let c=[6,7,6,6,4];r.maxActive.splice(1,c.length,...c),r.name[1][0]!=="Mass"&&(I.buildingHTML[1].unshift("Preon.png","Quarks.png"),r.name[1].unshift("Mass","Preons"),r.hoverText[1].unshift("Mass","Preons")),r.startCost[1]=[0,.005476,6,3,24,3],r.firstCost[1]=[0,.005476,6,3,24,3],l.dischargeInfo.energyType[1]=[0,1,3,5,10,20],r.type[2][1]="improving",r.type[3][1]="delaying",r.increase[5][1]=4,r.increase[5][2]=4;let d=[40,80,100,140,200,400,2e3,4e3,2e4,7e4];o[1].startCost.splice(0,d.length,...d),o[5].startCost[2]=1e120,o[2].maxActive=9;let p=[2400,6e3,24e3,3e4,24e3,3e4],m=[400,2e3,6e3,24e3,12e3,12e3];i[1].startCost.splice(0,p.length,...p),i[1].scaling.splice(0,m.length,...m),u[1].maxActive=5,u[2].maxActive=4,u[3].maxActive=5,l.accretionInfo.rankCost[5]=245576045e23,l.ASRInfo.costRange[1]=[4e3,1e4,16e3,24e3,32e3],l.ASRInfo.costRange[3][3]=245576045e23;let b=[2,1,4,24,2,1,2,4,36],x=[2.4,4,6,1,4,2.2,2,2,1];a[1].startCost.splice(0,b.length,...b),a[1].scaling.splice(0,x.length,...x);let w=[1,2,16,2,24,2,4,36],M=[1.8,1.8,2,4,650,2,2,1];a[2].startCost.splice(0,w.length,...w),a[2].scaling.splice(0,M.length,...M);let S=[1,2,3,9,24,3,12,36],E=[1.8,2.8,2,1,400,2.22,2,1];a[3].startCost.splice(0,S.length,...S),a[3].scaling.splice(0,E.length,...E);let k=[1,3,5,5,6,24,3,4,36],P=[1.8,2.8,2.4,4,8,250,2.22,2,1];a[4].startCost.splice(0,k.length,...k),a[4].scaling.splice(0,P.length,...P);let N=[4,16,2400,8,10,64,21600,40,1600,180],U=[1,5,1,1.8,1.8,1,3,2,1,1];a[5].startCost.splice(0,N.length,...N),a[5].scaling.splice(0,U.length,...U),a[1].maxActive=12,a[2].maxActive=11,a[3].maxActive=11,a[4].maxActive=11,a[5].maxActive=11,n("milestonesWelcome").innerHTML='Milestones, can only be done when inside the <span class="darkvioletText">Void</span>';let h=F("#milestone1Stage2Div > img");l.milestonesInfo[2].name[0]="Distant Clouds",h.src=h.src.replace("Drop.png","Clouds.png"),h.alt="Clouds",l.milestonesInfo[3].name[0]="Center of gravity",F("#stageHistory > h4").textContent="Stage resets:",n("strange9Stage2").style.display="",n("strange9Stage3").style.display="",n("strange10Stage4").style.display="",n("preonCap").style.display="",n("molesProduction").style.display="",n("effectiveDrops").style.display="",n("mainCap").style.display="",n("strange9Stage1").style.display="",n("strange8Stage2").style.display="",n("strange8Stage3").style.display="",n("strange9Stage4").style.display="",n("strange6Stage5").style.display="";for(let $=2;$<=5;$++)n(`strangeness${l.mobileDevice?"Page":"Section"}${$}`).style.display="",n(`milestone1Stage${$}Div`).style.display="",n(`milestone2Stage${$}Div`).style.display="";n("vacuumBoost").style.display="none",n("stageInstant").style.display="none",n("unknownStructures").style.display="none"}else{I.footerStatsHTML[1][0]=["Quarks.png","stage1borderImage cyanText","Quarks"],r.hoverText[2][0]="Moles",r.hoverText[3][0]="Mass",s[1][0].current=[3,0],s[2][0].current=[2.8,-3],s[3][0].current=[1,-19],r.name[1][0]==="Mass"&&(I.buildingHTML[1].splice(0,2),r.name[1].splice(0,2),r.hoverText[1].splice(0,2));let c=[4,6,5,5,4];r.maxActive.splice(1,c.length,...c),r.startCost[1]=[0,3,24,3],r.firstCost[1]=[0,3,24,3],l.dischargeInfo.energyType[1]=[0,1,5,20],r.type[2][1]="producing",r.type[3][1]="producing",r.increase[5][1]=2,r.increase[5][2]=2;let d=[0,0,9,12,36,300,800,2e3,4e3,22e3];o[1].startCost.splice(0,d.length,...d),o[5].startCost[2]=1e100,o[1].maxActive=10,o[2].maxActive=8,o[3].maxActive=13,o[4].maxActive=4,o[5].maxActive=3;let p=[1e3,2500,6e3,8e3,8e3,6e3],m=[250,500,2e3,8e3,4e3,6e3];i[1].startCost.splice(0,p.length,...p),i[1].scaling.splice(0,m.length,...m),i[1].maxActive=6,i[2].maxActive=6,i[3].maxActive=9,i[4].maxActive=5,i[5].maxActive=2,u[1].maxActive=0,u[2].maxActive=3,u[3].maxActive=4,u[4].maxActive=3,u[5].maxActive=0,l.accretionInfo.rankCost[5]=0,l.ASRInfo.costRange[1]=[6e3,12e3,18e3],l.ASRInfo.costRange[3][3]=2e30;let b=[1,1,3,6,6,1,2,2,12],x=[1.5,2,3.5,0,4,.75,2,4,0];a[1].startCost.splice(0,b.length,...b),a[1].scaling.splice(0,x.length,...x);let w=[1,2,2,1,6,2,2,12],M=[.4,.5,2.5,3,0,1,4,0];a[2].startCost.splice(0,w.length,...w),a[2].scaling.splice(0,M.length,...M);let S=[1,1,2,8,6,2,8,12],E=[.75,1.5,2,0,0,1,8,0];a[3].startCost.splice(0,S.length,...S),a[3].scaling.splice(0,E.length,...E);let k=[1,1,3,2,4,6,3,3,12],P=[1,2,2.5,3,44,0,1,5.5,0];a[4].startCost.splice(0,k.length,...k),a[4].scaling.splice(0,P.length,...P);let N=[120,16,80,10,10,40,800,20,40,60],U=[60,0,0,8,10,0,1600,20,0,0];a[5].startCost.splice(0,N.length,...N),a[5].scaling.splice(0,U.length,...U),a[1].maxActive=9,a[2].maxActive=8,a[3].maxActive=8,a[4].maxActive=9,a[5].maxActive=10,n("milestonesWelcome").innerHTML='Any reached Milestone will award 1 <span class="greenText">Strange quark</span>';let h=F("#milestone1Stage2Div > img");l.milestonesInfo[2].name[0]="A Nebula of Drops",h.src=h.src.replace("Clouds.png","Drop.png"),h.alt="Drop of water",l.milestonesInfo[3].name[0]="Cluster of Mass",F("#stageHistory > h4").textContent="Interstellar Stage resets:",n("vacuumBoost").style.display="",n("strange9Stage5").style.display="",n("strange10Stage5").style.display="",n("stageInstant").style.display="",n("rankStat0").style.display="",n("preonCap").style.display="none",n("molesProduction").style.display="none",n("effectiveDrops").style.display="none",n("mainCap").style.display="none",n("researchAuto1").style.display="none",n("researchAuto2").style.display="none";for(let $=1;$<a.length;$++)for(let B=a[$].maxActive+1;B<=a[$].startCost.length;B++)n(`strange${B}Stage${$}`).style.display="none"}for(let c=1;c<=3;c++){let d=s[c][0].current;s[c][0].total=C(d),s[c][0].trueTotal=C(d),s[c][0].highest=C(d)}},yt=async()=>{if(t.inflation.vacuum)return void R("This cannot be undone");let e=l.strangeInfo.instability;if(e<5)return void R(`Universe is still stable. Vacuum state is false. ${5-e} more`);await O("This will not be possible to undo. Confirm?")&&(t.stage.true<6&&(await j(7,!1),t.stage.true=6,t.event=!1),t.inflation.vacuum=!0,t.stage.current=1,t.stage.active=1,Se(!0),bt())},vt=()=>{let e=t.milestones,s='<h4 class="darkvioletText">Unknown Structures:</h4>';e[1][0]>=6&&(s+='<img src="Used_art/Preon.png" alt="Unknown Structure" loading="lazy" draggable="false">'),e[2][1]>=6&&(s+='<img src="Used_art/Ocean.png" alt="Unknown Structure" loading="lazy" draggable="false">'),e[3][1]>=7&&(s+='<img src="Used_art/Subsatellite.png" alt="Unknown Structure" loading="lazy" draggable="false">'),e[4][1]>=8&&(s+='<img src="Used_art/Quasi%20star.png" alt="Unknown Structure" loading="lazy" draggable="false">');let r=n("unknownStructures");r.style.display=l.strangeInfo.instability>0?"":"none",r.innerHTML!==s&&(r.innerHTML=s)};var q=(e,s=null)=>{if(s===null){let o=l.tab;n(`${o}Tab`).style.display="none",n(`${o}TabBtn`).classList.remove("tabActive");let i=l.tabList[`${o}Subtabs`];if(i!==void 0)for(let c of i)n(`${o}SubtabBtn${c}`).style.display="none";l.tab=e;let u=0;n(`${e}Tab`).style.display="",n(`${e}TabBtn`).classList.add("tabActive");let a=l.tabList[`${e}Subtabs`];if(a!==void 0)for(let c of a)se(e,c)?(n(`${e}SubtabBtn${c}`).style.display="",u++):l.subtab[`${e}Current`]===c&&q(e,a[0]);n("subtabs").style.display=u>1?"":"none",l.screenReader&&(n("SRTab").textContent=`Current tab is '${e}'${u>1?` and subtab is '${l.subtab[`${e}Current`]}'`:""}`)}else{let o=l.subtab[`${e}Current`];n(`${e}Subtab${o}`).style.display="none",n(`${e}SubtabBtn${o}`).classList.remove("tabActive"),l.subtab[`${e}Current`]=s,n(`${e}Subtab${s}`).style.display="",n(`${e}SubtabBtn${s}`).classList.add("tabActive"),l.screenReader&&(n("SRTab").textContent=`Current subtab is '${s}', part of '${e}' tab`)}let r=t.stage.active;l.trueActive!==r?ie(l.trueActive):r!==4&&r!==5&&(l.tab==="upgrade"&&l.subtab.upgradeCurrent==="Elements"||e==="Elements")?e==="upgrade"&&s===null||!l.stageInfo.activeAll.includes(4)?q("upgrade","Upgrades"):(le(4,r),G()):(te(),W())},Ae=()=>t.stage.true>=6?43200:Math.min(3600*t.stage.true+Math.max((t.stage.resets-4)*1800,0),43200),Re=()=>(1+t.stage.best/16)*(t.strangeness[4][7]+1),Pe=(e=0,s=1)=>{let{time:r}=t,{auto:o,buildings:i}=t.toggles,{maxActive:u,type:a}=l.buildingsInfo,{autoU:c,autoR:d,autoE:p,elements:m}=l.automatization,b=t.inflation.vacuum,x;if(e>0){let S=Math.min(s,e);x=S,e-=S}else{let S=Date.now();if(x=(S-r.updated)/1e3,r.updated=S,r.online+=x,l.lastSave+=x,t.stage.export=Math.min(t.stage.export+x,86400),x<0){r.offline+=x;return}else x>60&&(r.offline=Math.min(r.offline+x-60,Ae()),x=60)}r.stage+=x,r.universe+=x;let w=x,M=1;b&&t.strangeness[5][0]>=1&&t.challenges.active!==0&&(M*=1.2),l.inflationInfo.globalSpeed=M,x*=M,t.stage.time+=x,t.inflation.age+=x,b&&o[0]&&ne(5,!0);for(let S=0;S<t.strangeness[5][10];S++)St(S,w);X();for(let S of l.stageInfo.activeAll){!b&&o[0]&&ne(S,!0),S===4?(ze(o[4],!0),m.length!==0&&wt()):S===3?o[3]&&De(!0):S===2?He(o[2],x):S===1&&o[1]&&Be(!0),c[S].length!==0&&xt(S),d[S].length!==0&&et("researches",S),p[S].length!==0&&et("researchesExtra",S);for(let E=u[S]-1;E>=1;E--)i[S][E]&&t.ASR[S]>=E&&pe(E,S,!0),a[S][E]==="producing"&&(de(E-1,S,x),X());if(S===1)t.upgrades[1][8]===1&&de(5,1,x);else if(S===5){let E=t.researches[5][0];E>=1&&de(1,5,x),E>=2&&de(2,5,x),E>=3&&de(3,5,x)}}e>0&&Pe(e,s)},W=()=>{let{tab:e,subtab:s}=l,r=t.stage.active,o=t.buildings[r];if(l.footer){if(r===1)n("footerStat1Span").textContent=g(o[0].current).format({padding:!0}),n("footerStat2Span").textContent=f(t.discharge.energy,{padding:t.discharge.energy>=1e6});else if(r===2)n("footerStat1Span").textContent=g(t.vaporization.clouds).format({padding:!0}),n("footerStat2Span").textContent=g(o[0].current).format({padding:!0}),n("footerStat3Span").textContent=g(o[1].current).format({padding:o[2].current[0]>0});else if(r===3)n("footerStat1Span").textContent=g(o[0].current).format({padding:!0});else if(r===4||r===5){let i=t.buildings[4];n("footerStat1Span").textContent=f(t.collapse.mass,{padding:!0}),n("footerStat2Span").textContent=g(i[0].current).format({padding:!0}),r===5&&(n("footerStat3Span").textContent=g(i[1].current).plus(i[2].current,i[3].current,i[4].current,i[5].current).format({padding:!0}))}}if(e==="stage")if(s.stageCurrent==="Structures"){let{buildingsInfo:i}=l,u=t.stage.resets<1&&t.discharge.current<1?1:t.toggles.shop.howMany;for(let a=1;a<i.maxActive[r];a++){let c=n(`building${a}True`);if(n(`building${a}Cur`).textContent=g(o[a].current).format({padding:c.style.display!=="none"}),n(`building${a}Prod`).textContent=g(i.producing[r][a]).format({padding:!0}),c.textContent=`[${f(o[a].true)}]`,r===4||r===5){let w=l.collapseInfo[r===4?"unlockB":"unlockG"][a];if(t.collapse.mass<w&&t.buildings[5][3].true<1){n(`building${a}`).classList.remove("availableBuilding"),n(`building${a}Btn`).textContent=`Unlocked at ${f(w)} Mass`,n(`building${a}BuyX`).textContent="Locked";continue}}let d,p,m=!1;if(r===5&&a===3)d="Mass",p=t.collapse.mass;else{let w=a-1,M=r;r===1?a===1&&t.inflation.vacuum&&(m=t.strangeness[1][10]>=1):r===2?a!==1&&(w=1):r>=3&&(w=0,r===5&&(M=4)),d=i.name[M][w],p=t.buildings[M][w].current}let b=1,x=Ue(a,r);if(u!==1){let w=i.increase[r][a];m?(b=u===-1?Math.max(Math.floor(g(p).divide(x).log(w).toNumber())+1,1):u,b>1&&(x=g(w).power(b-1).multiply(x).toArray())):(b=u===-1?Math.max(Math.floor(g(p).multiply(w-1).divide(x).plus("1").log(w).toNumber()),1):u,b>1&&(x=g(w).power(b).minus("1").divide(w-1).multiply(x).toArray()))}n(`building${a}`).classList[g(x).lessOrEqual(p)?"add":"remove"]("availableBuilding"),n(`building${a}Btn`).textContent=`Need: ${g(x).format({padding:!0})} ${d}`,n(`building${a}BuyX`).textContent=f(b)}if(r===1){tt();let a=n("dischargeBase",!1);a!==null&&(a.textContent=f(l.dischargeInfo.base)),n("reset1Button").textContent=`Next goal is ${f(l.dischargeInfo.next)} Energy`,n("tritiumEffect").textContent=g(l.dischargeInfo.tritium).format({padding:!0}),n("dischargeEffectStat").textContent=g(l.dischargeInfo.base).power(l.dischargeInfo.total).format({padding:!0}),t.inflation.vacuum&&(n("preonCapStat").textContent=g(l.inflationInfo.preonCap).format({padding:!0}),n("preonCapRatio").textContent=g(l.inflationInfo.preonTrue).divide(l.inflationInfo.preonCap).format({padding:!0}))}else if(r===2)we(),n("reset1Button").textContent=l.vaporizationInfo.get[0]!==0?`Reset for ${g(l.vaporizationInfo.get).format({padding:!0})} Clouds`:`Waiting for ${f(y.S2Upgrade2(),{padding:!0})} Drops`,n("cloudEffectStat").textContent=g(l.vaporizationInfo.strength).format({padding:!0}),t.inflation.vacuum&&(n("molesProductionStat").textContent=g(l.dischargeInfo.tritium).divide("6.02214076e23").format({padding:!0}),n("effectiveDropsStat").textContent=g(l.vaporizationInfo.dropsEff).format({padding:!0}));else if(r===3)t.inflation.vacuum&&(n("massProductionStat").textContent=g(i.producing[1][1]).multiply("1.78266192e-33").format({padding:!0}),n("dustCapStat").textContent=g(l.inflationInfo.dustCap).format({padding:!0}),n("dustCapRatio").textContent=g(l.inflationInfo.dustTrue).divide(l.inflationInfo.dustCap).format({padding:!0}));else if(r===4){let{collapse:a}=t,{collapseInfo:c}=l;Ne(),n("reset1Button").textContent=`Collapse to ${f(c.newMass,{padding:!0})} Mass`,n("solarMassCurrent").textContent=f(c.massEffect,{padding:!0});for(let d=1;d<=3;d++)n(`special${d}Cur`).textContent=f(a.stars[d-1]),n(`special${d}Get`).textContent=f(c.starCheck[d-1]),n(`star${d}Current`).textContent=f(c.starEffect[d-1],{padding:!0});t.inflation.vacuum&&(n("mainCapStat").textContent=g(i.producing[1][1]).multiply("8.96499278339628e-67",l.inflationInfo.massCap).format({padding:!0}),n("mainCapTill").textContent=f(g(t.buildings[1][0].current).divide(i.producing[1][1]).minus(l.inflationInfo.massCap).divide(l.inflationInfo.globalSpeed).toNumber()*-1,{type:"time"}))}n("stageTime").textContent=f(t.stage.time,{type:"time"}),n("stageTimeRealStat").textContent=f(t.time.stage,{type:"time"})}else s.stageCurrent==="Advanced"&&(t.inflation.vacuum||(n("vacuumEffect").textContent=f(l.strangeInfo.instability)),n("globalSpeedStat").textContent=f(l.inflationInfo.globalSpeed,{padding:!0}),n("universeAge").textContent=f(t.inflation.age,{type:"time"}),n("universeAgeTime").textContent=f(t.time.universe,{type:"time"}));else if(e==="upgrade"||e==="Elements"){let i=e==="Elements"?e:s.upgradeCurrent;if(i==="Upgrades"){let u=l.lastUpgrade[r];u[0]>=0&&xe(u[0],u[1])}else i==="Elements"&&l.lastElement>=1&&xe(l.lastElement,"elements")}else if(e==="strangeness"){if(s.strangenessCurrent==="Matter"){let i=l.strangeInfo.gain(r)/1e12**t.strangeness[5][10];n("strangeGain").textContent=`${f(i)} ${l.strangeInfo.name[t.strangeness[5][10]]}`,n("strangeTime").textContent=f(i/t.time.stage,{type:"income",padding:!0}),n("strange0Cur").textContent=f(t.strange[0].current),n("strange1Cur").textContent=f(t.strange[1].current),l.lastStrangeness[0]>=0&&Ee(l.lastStrangeness[0],l.lastStrangeness[1],"strangeness")}}else if(e==="settings"){if(s.settingsCurrent==="Settings"){let i=Re()/86400/1e12**t.strangeness[5][10];n("exportGain").textContent=f(t.stage.export*i,{padding:!0}),n("exportSecond").textContent=f(i,{type:"income",padding:!0}),l.lastSave>=1&&(n("isSaved").textContent=`${f(l.lastSave,{type:"time"})} ago`)}else if(s.settingsCurrent==="Stats"){if(n("firstPlay").title=`Total online time is ${f(t.time.online,{type:"time"})}`,n("firstPlayStat").textContent=`${new Date(t.time.started).toLocaleString()} (${f((Date.now()-t.time.started)/1e3,{type:"time"})} ago)`,n("stageResetsCount").textContent=f(t.stage.resets),n("stageHighestGain").textContent=f(t.stage.best/1e12**t.strangeness[5][10]),n("offlineStat").textContent=f(t.time.offline,{type:"time",padding:!1}),n("maxOfflineStat").textContent=f(Ae(),{type:"time",padding:!1}),n("maxExportStat").textContent=f(Re()/1e12**t.strangeness[5][10]),r===1)n("maxEnergyStat").textContent=f(t.discharge.energyMax),n("dischargeStat").textContent=f(l.dischargeInfo.total),n("dischargeStatTrue").textContent=` [${t.discharge.current}]`,t.strangeness[1][11]<1&&(n("energySpent").textContent=f(l.dischargeInfo.energyTrue-t.discharge.energy));else if(r===2){we();let a=g(y.clouds(!0)).divide(l.vaporizationInfo.strength).toNumber();n("cloudEffectAfter").textContent=`x${f(a,{padding:!0})}`;let c=y.S2Extra1_2(),d=y.S2Extra1_2(!0),p=d[0]/c[0],m=d[1]/c[1];if(n("rainEffectAfter").textContent=`x${f(p,{padding:!0})}`,n("stormEffectAfter").textContent=`x${f(m,{padding:!0})}`,n("cloudEffectTotal").textContent=`x${f(a*p*m,{padding:!0})}`,n("maxCloudStat").textContent=g(t.vaporization.cloudsMax).format(),t.inflation.vacuum){let b=t.buildings[1][5];o[0].total=g(b.total).divide("6.02214076e23").toArray(),o[0].trueTotal=g(b.trueTotal).divide("6.02214076e23").toArray(),o[0].highest=g(b.highest).divide("6.02214076e23").toArray()}}else if(r===3){if(n("effectiveRank").textContent=f(l.accretionInfo.effective),n("actualRank").textContent=` [${t.accretion.rank}]`,t.inflation.vacuum){let a=t.buildings[1][0];o[0].total=g(a.total).multiply("1.78266192e-33").toArray(),o[0].trueTotal=g(a.trueTotal).multiply("1.78266192e-33").toArray(),o[0].highest=g(a.highest).multiply("1.78266192e-33").toArray()}}else if(r===4||r===5){if(n("maxSolarMassStat").textContent=f(t.collapse.massMax),r===4){Ne();let a=l.collapseInfo,c=t.strangeness[4][5]>=2,d=y.mass(!0)/a.massEffect;n("massEffectAfter").textContent=`x${f(d,{padding:!0})}`;let p=c?1:y.star[0](!0)/a.starEffect[0],m=c?1:y.star[1](!0)/a.starEffect[1],b=c?1:y.star[2](!0)/a.starEffect[2];c||(n("star1After").textContent=`x${f(p,{padding:!0})}`,n("star2After").textContent=`x${f(m,{padding:!0})}`,n("star3After").textContent=`x${f(b,{padding:!0})}`);let x=y.S4Research4(!0)/y.S4Research4();n("gammaRayAfter").textContent=`x${f(x,{padding:!0})}`,n("starTotal").textContent=`x${f(d*p*m*b*x,{padding:!0})}`}else if(r===5){n("starsStatTrue").textContent=f(l.collapseInfo.trueStars);let a=t.buildings[4];o[0].current=g(a[1].current).plus(a[2].current,a[3].current,a[4].current,a[5].current).toArray(),o[0].total=g(a[1].total).plus(a[2].total,a[3].total,a[4].total,a[5].total).toArray(),o[0].trueTotal=g(a[1].trueTotal).plus(a[2].trueTotal,a[3].trueTotal,a[4].trueTotal,a[5].trueTotal).toArray(),o[0].highest=g(a[1].highest).plus(a[2].highest,a[3].highest,a[4].highest,a[5].highest).toArray()}}for(let a=0;a<o.length;a++)n(`building${a}StatTotal`).textContent=g(o[a].total).format({padding:!0}),n(`building${a}StatTrueTotal`).textContent=g(o[a].trueTotal).format({padding:!0}),n(`building${a}StatHighest`).textContent=g(o[a].highest).format({padding:!0});let{strange:i}=t,u=Math.floor(i[1].current*1e12);for(let a=0;a<i.length;a++)n(`strange${a}StatTotal`).textContent=f(i[a].total,{padding:!0});n("strange0StatProd").textContent=f(u,{padding:!0}),n("strange1StatProd").textContent=f(u/600,{padding:!0})}}},te=()=>{let{tab:e,subtab:s}=l,r=t.stage.active;if(t.event||(t.stage.true===5?t.strange[0].total>0?t.buildings[5][3].true>=1&&j(6):r===5&&j(5):t.stage.true===4?t.elements.includes(.5)&&j(4):t.stage.true===3?g(t.buildings[3][0].current).moreOrEqual("5e29")&&j(3):t.stage.true===2?(we(),g(l.vaporizationInfo.get).plus(t.vaporization.clouds).moreThan("1e4")&&j(2)):t.stage.true===1&&t.upgrades[1][5]===1&&j(1)),l.footer){let o=n("ElementsTabBtn",!1);o!==null&&(o.style.display=t.upgrades[4][1]===1?"":"none"),r===1?t.stage.resets<1&&(n("footerStat2").style.display=t.discharge.energyMax>=(t.inflation.vacuum?40:9)?"":"none",n("upgradeTabBtn").style.display=t.discharge.energyMax>=(t.inflation.vacuum?40:9)?"":"none"):r===2&&(n("footerStat1").style.display=t.upgrades[2][2]===1?"":"none")}if(e==="stage")if(s.stageCurrent==="Structures"){let o=t.buildings[r],i=t.stage.resets>=1||t.discharge.current>=1,u=t.ASR[r];if(!t.inflation.vacuum){let a=r>=4?"Return back to start":r===t.stage.current?"Enter next Stage":"Reset this Stage",c=(r>=4?t.strange[0].total<=0:r===t.stage.current)?"Not ready for more":"Not ready for reset";n("stageReset").textContent=(r>=4?t.stage.current>=5&&(t.stage.true>=6||t.strange[0].total>0||t.event):ne(r))?a:c}n("buildingToggles").style.display=i?"":"none",n("autoWaitInput").style.display=t.strangeness[1][7]>=1?"":"none",n("toggleBuilding0").style.display=t.researchesAuto[1]>=1?"":"none",n("stageTimeReal").style.display=t.stage.time!==t.time.stage?"":"none",n("offlineWarning").style.display=t.time.offline>0&&t.time.offline>=Ae()?"":"none";for(let a=1;a<l.buildingsInfo.maxActive[r];a++)n(`building${a}True`).style.display=g(o[a].current).notEqual(o[a].true)?"":"none",n(`toggleBuilding${a}`).style.display=u>=a?"":"none",n(`building${a}BuyDiv`).style.display=i?"":"none";if(r===1)n("reset1Main").style.display=t.upgrades[1][5]===1?"":"none",n("building2").style.display=g(o[1].trueTotal).moreOrEqual(t.inflation.vacuum?"4":"11")?"":"none",n("building3").style.display=g(o[2].trueTotal).moreOrEqual("2")?"":"none",t.inflation.vacuum&&(n("building4").style.display=g(o[3].trueTotal).moreOrEqual("8")?"":"none",n("building5").style.display=g(o[4].trueTotal).moreOrEqual("2")?"":"none"),n("stageInfo").style.display=l.dischargeInfo.total>0?"":"none",n("tritium").style.display=t.upgrades[1][8]===1?"":"none",t.stage.true<2&&(n("resetStage").style.display=t.upgrades[1][9]===1?"":"none");else if(r===2)n("reset1Main").style.display=t.upgrades[2][2]===1?"":"none",n("building2").style.display=g(o[1].trueTotal).moreOrEqual("2e2")?"":"none",n("building3").style.display=g(o[1].trueTotal).moreOrEqual("4e6")?"":"none",n("building4").style.display=g(o[1].trueTotal).moreOrEqual("4e17")?"":"none",n("building5").style.display=g(o[1].trueTotal).moreOrEqual("4e22")?"":"none",n("cloudEffect").style.display=t.vaporization.clouds[0]>0?"":"none",t.inflation.vacuum?n("building6").style.display=t.strangeness[2][8]>=1&&g(o[1].trueTotal).moreOrEqual("8e24")?"":"none":n("stageInfo").style.display=t.vaporization.clouds[0]>0?"":"none";else if(r===3){let a=t.upgrades[3];n("buildings").style.display=t.accretion.rank>=1?"":"none",n("building2").style.display=a[2]===1?"":"none",n("building3").style.display=a[4]===1?"":"none",n("building4").style.display=a[8]===1?"":"none",t.inflation.vacuum&&(n("building5").style.display=a[11]===1&&t.strangeness[3][8]>=1?"":"none"),Ut()}else if(r===4){let a=t.collapse.stars,c=t.researchesExtra[4][0],d=t.buildings[5][3].true>=1;n("specials").style.display=o[2].trueTotal[0]>0?"":"none",n("special2").style.display=o[3].trueTotal[0]>0?"":"none",n("special3").style.display=o[4].trueTotal[0]>0?"":"none",n("reset1Main").style.display=t.upgrades[4][0]===1?"":"none",n("building2").style.display=c>=1?"":"none",n("building3").style.display=c>=2?"":"none",n("building4").style.display=c>=3?"":"none",n("star1Effect").style.display=d||a[0]>0?"":"none",n("star2Effect").style.display=d||a[1]>0?"":"none",n("star3Effect").style.display=d||a[2]>0?"":"none",t.inflation.vacuum&&(n("building5").style.display=t.strangeness[4][9]>=1&&(d||a[2]>0)?"":"none")}else r===5&&(t.inflation.vacuum||(n("buildings").style.display=t.milestones[2][0]>=6||t.milestones[3][0]>=7?"":"none",n("building1").style.display=t.milestones[2][0]>=6?"":"none",n("building2").style.display=t.milestones[3][0]>=7?"":"none"),n("building3").style.display=t.strangeness[5][6]>=1?"":"none")}else s.stageCurrent==="Advanced"&&(n("globalSpeed").style.display=l.inflationInfo.globalSpeed!==1?"":"none",n("universeAgeReal").style.display=t.inflation.age!==t.time.universe?"":"none",n("challenge1").style.display=t.inflation.vacuum&&t.strangeness[5][0]>=1?"":"none");else if(e==="upgrade"||e==="Elements"){let o=e==="Elements"?e:s.upgradeCurrent;if(o==="Upgrades"){if(n("researchToggles").style.display=t.strangeness[1][7]>=2?"":"none",t.inflation.vacuum&&(n("researchAuto1").style.display=t.researchesExtra[1][2]>=2?"":"none",n("researchAuto2").style.display=t.researchesExtra[1][2]>=1?"":"none"),r===1){let i=t.upgrades[1][5]===1;n("upgrade7").style.display=i?"":"none",n("upgrade8").style.display=i?"":"none",n("upgrade9").style.display=i?"":"none",n("upgrade10").style.display=i?"":"none",n("researches").style.display=t.discharge.current>=4?"":"none",t.inflation.vacuum&&(n("extraResearches").style.display=t.discharge.current>=5?"":"none",n("researchExtra2").style.display=t.researchesExtra[1][2]>=2?"":"none",n("researchExtra4").style.display=t.researchesExtra[1][2]>=1?"":"none",n("researchExtra5").style.display=t.accretion.rank>=6?"":"none")}else if(r===2){let i=t.buildings[2];n("upgrade2").style.display=i[2].trueTotal[0]>0?"":"none",n("upgrade3").style.display=i[3].trueTotal[0]>0?"":"none",n("upgrade4").style.display=i[2].trueTotal[0]>0?"":"none",n("upgrade5").style.display=i[2].trueTotal[0]>0?"":"none",n("upgrade6").style.display=i[3].trueTotal[0]>0?"":"none",n("upgrade7").style.display=i[4].trueTotal[0]>0?"":"none",n("upgrade8").style.display=t.strangeness[2][2]>=3&&i[5].trueTotal[0]>0?"":"none",t.inflation.vacuum&&(n("upgrade9").style.display=t.strangeness[2][10]>=3&&i[6].trueTotal[0]>0?"":"none"),n("research2").style.display=i[2].trueTotal[0]>0?"":"none",n("research3").style.display=i[2].trueTotal[0]>0?"":"none",n("research4").style.display=i[2].trueTotal[0]>0?"":"none",n("research5").style.display=i[3].trueTotal[0]>0?"":"none",n("research6").style.display=i[4].trueTotal[0]>0?"":"none",n("extraResearches").style.display=t.vaporization.clouds[0]>0?"":"none",n("researchExtra3").style.display=i[5].trueTotal[0]>0?"":"none",n("researchExtra4").style.display=t.accretion.rank>=6?"":"none"}else if(r===3){let i=t.accretion.rank,u=t.buildings[3][2].trueTotal[0]>0;n("upgrade3").style.display=i>=2?"":"none",n("upgrade4").style.display=u?"":"none",n("upgrade5").style.display=i>=3?"":"none",n("upgrade6").style.display=i>=4||t.upgrades[3][4]===1?"":"none",n("upgrade7").style.display=i>=4?"":"none",n("upgrade8").style.display=i>=4&&t.strangeness[3][2]>=3?"":"none",n("upgrade9").style.display=i>=4?"":"none",n("upgrade10").style.display=i>=4?"":"none",n("upgrade11").style.display=i>=5?"":"none",n("upgrade12").style.display=i>=5?"":"none",n("upgrade13").style.display=i>=5?"":"none",n("research3").style.display=u?"":"none",n("research4").style.display=u?"":"none",n("research5").style.display=i>=3?"":"none",n("research6").style.display=i>=3?"":"none",n("research7").style.display=i>=4||t.upgrades[3][4]===1?"":"none",n("research8").style.display=i>=4?"":"none",n("research9").style.display=i>=5?"":"none",n("extraResearches").style.display=i>=2?"":"none",n("researchExtra2").style.display=i>=3?"":"none",n("researchExtra3").style.display=i>=4?"":"none",n("researchExtra4").style.display=i>=5?"":"none",t.inflation.vacuum?n("researchExtra5").style.display=i>=3&&t.researchesExtra[1][2]>=2?"":"none":(n("upgrades").style.display=i>=1?"":"none",n("stageResearches").style.display=i>=1?"":"none")}else if(r===4){let i=t.collapse.stars,u=t.buildings[5][3].true>=1;n("upgrade4").style.display=t.strangeness[4][2]>=1?"":"none",n("research4").style.display=(u||i[0]>0)&&t.strangeness[4][2]>=2?"":"none",n("research5").style.display=u||i[2]>0?"":"none",n("researchExtra2").style.display=u||i[0]>0?"":"none",n("researchExtra3").style.display=(u||i[0]>0)&&t.strangeness[4][2]>=3?"":"none"}else if(r===5){if(!t.inflation.vacuum){let i=t.milestones[2][0]>=6,u=t.milestones[3][0]>=7;n("upgrades").style.display=i||u?"":"none",n("upgrade1").style.display=i?"":"none",n("upgrade2").style.display=u?"":"none",n("stageResearches").style.display=i||u?"":"none",n("research1").style.display=i?"":"none",n("research2").style.display=u?"":"none"}n("upgrade3").style.display=t.buildings[5][3].true>=1?"":"none"}}else if(o==="Elements"){let i=t.upgrades[4],u=t.upgrades[4][2]===1&&(t.collapse.stars[1]>0||t.buildings[5][3].true>=1),a=n("elementsGrid");a.style.display=i[2]===1?"":"flex",a.classList[!u&&i[2]===1?"add":"remove"]("Elements10App");for(let c=6;c<=10;c++)n(`element${c}`).style.display=i[2]===1?"":"none";for(let c=11;c<=26;c++)n(`element${c}`).style.display=u?"":"none";n("element27").style.display=i[3]===1?"":"none",n("element28").style.display=i[3]===1?"":"none"}}else if(e==="strangeness")if(s.strangenessCurrent==="Matter"){let o=t.inflation.vacuum,i=t.strangeness[5][5]>=1;if(n("strange1").style.display=t.strangeness[5][10]>=1?"":"none",n("strange4Stage5").style.display=(o?i:t.milestones[2][0]>=6)?"":"none",n("strange5Stage5").style.display=(o?i:t.milestones[3][0]>=7)?"":"none",n("strange7Stage5").style.display=i?"":"none",n("strange8Stage5").style.display=(o?i:t.milestones[2][0]>=6)?"":"none",o){let u=t.challenges.void;n("strange10Stage1").style.display=u[1]>=1?"":"none",n("strange11Stage1").style.display=u[1]>=2?"":"none",n("strange12Stage1").style.display=u[4]>=2?"":"none",n("strange10Stage2").style.display=u[2]>=1?"":"none",n("strange11Stage2").style.display=u[2]>=2?"":"none",n("strange10Stage3").style.display=u[4]>=4?"":"none",n("strange11Stage3").style.display=u[1]>=3?"":"none",n("strange11Stage4").style.display=u[4]>=3?"":"none",n("strange9Stage5").style.display=u[4]>=1?"":"none",n("strange10Stage5").style.display=i?"":"none",n("strange11Stage5").style.display=u[3]>=5?"":"none"}else{let u=t.milestones[4][0]>=8;n("strange9Stage1").style.display=u?"":"none",n("strange8Stage2").style.display=u?"":"none",n("strange8Stage3").style.display=u?"":"none",n("strange9Stage4").style.display=u?"":"none",n(`strangeness${l.mobileDevice?"Page":"Section"}5`).style.display=u?"":"none",n("strange6Stage5").style.display=t.milestones[2][0]>=6||t.milestones[3][0]>=7?"":"none"}}else s.strangenessCurrent==="Milestones"&&(t.inflation.vacuum||(n("milestone1Stage5Div").style.display=t.strangeness[5][8]>=1?"":"none",n("milestone2Stage5Div").style.display=t.strangeness[5][8]>=1&&t.strangeness[5][6]>=1?"":"none"));else if(e==="settings"){if(s.settingsCurrent==="Settings"){let{researchesAuto:o,strangeness:i}=t,u=t.stage.true;n("toggleAuto0").style.display=i[5][2]>=1?"":"none",n("toggleAuto0Main").style.display=i[5][2]>=1?"":"none",n("exportSpecial").style.display=t.strange[0].total>0?"":"none",n("exportType").textContent=l.strangeInfo.name[i[5][10]],n("saveNameMatter").style.display=i[5][10]>=1?"":"none",n("allStructuresHotkey").style.display=o[1]>=1?"":"none",n("autoToggle5").style.display=o[0]>=1?"":"none",n("autoToggle6").style.display=o[0]>=2?"":"none",n("autoToggle7").style.display=o[0]>=3?"":"none",n("autoToggle8").style.display=i[4][4]>=2?"":"none",n("toggleAuto1").style.display=i[1][3]>=1?"":"none",n("toggleAuto2").style.display=i[2][4]>=1?"":"none",n("toggleAuto2Main").style.display=i[2][4]>=1?"":"none",n("toggleAuto3").style.display=i[3][4]>=1?"":"none",n("toggleAuto4").style.display=i[4][5]>=1?"":"none",n("toggleAuto4Main").style.display=i[4][5]>=1?"":"none",n("stageReward").textContent=l.strangeInfo.name[i[5][10]],u<2&&(n("resetToggles").style.display=t.discharge.current>=1?"":"none",n("dischargeHotkey").style.display=t.upgrades[1][5]===1?"":"none",n("stageHotkey").style.display=t.upgrades[1][9]===1?"":"none"),u<3&&(n("vaporizationToggleReset").style.display=t.vaporization.clouds[0]>0?"":"none",n("vaporizationHotkey").style.display=t.upgrades[2][2]===1?"":"none"),u<4&&(n("rankToggleReset").style.display=t.accretion.rank>=2?"":"none"),u<5&&(n("collapseToggleReset").style.display=t.collapse.mass>.01235?"":"none",n("collapseHotkey").style.display=t.upgrades[4][0]===1?"":"none",n("elementsAsTab").style.display=t.upgrades[4][1]===1?"":"none"),u<7&&(n("switchTheme6").style.display=u===6&&i[5][0]>=1?"":"none")}else if(s.settingsCurrent==="History")Bt();else if(s.settingsCurrent==="Stats"){let{strange:o,strangeness:i}=t,u=t.buildings[r];n("maxExportStats").style.display=o[0].total>0?"":"none",n("maxExportType").textContent=l.strangeInfo.name[i[5][10]],n("stageHighestType").textContent=l.strangeInfo.name[i[5][10]],n("stageResets").style.display=t.stage.resets>0?"":"none",n("stageHighest").style.display=o[0].total>0?"":"none";for(let a=1;a<l.buildingsInfo.maxActive[r];a++)n(`building${a}Stats`).style.display=u[a].trueTotal[0]>0?"":"none";n("strangeAllStats").style.display=o[0].total>0?"":"none";for(let a=1;a<o.length;a++)n(`strange${a}Stats`).style.display=o[a].total>0?"":"none";if(n("strange0StatProdDiv").style.display=i[5][10]>=1?"":"none",t.inflation.vacuum||vt(),r===1)n("energyTrue").style.display=i[1][11]<1&&t.discharge.energyMax>=(t.inflation.vacuum?40:9)?"":"none",n("energyStats").style.display=t.discharge.energyMax>=(t.inflation.vacuum?40:9)?"":"none",n("dischargeStats").style.display=l.dischargeInfo.total>0?"":"none",n("dischargeStatTrue").style.display=t.discharge.current!==l.dischargeInfo.total?"":"none";else if(r===2)n("vaporizationBoost").style.display=t.upgrades[2][2]===1?"":"none",n("rainEffect").style.display=t.researchesExtra[2][1]>=1?"":"none",n("stormEffect").style.display=t.researchesExtra[2][2]>=1?"":"none",n("cloudStats").style.display=t.vaporization.cloudsMax[0]>0?"":"none";else if(r===3){n("actualRank").style.display=t.accretion.rank!==l.accretionInfo.effective?"":"none",t.inflation.vacuum&&(n("rankStat0").style.display=i[2][9]>=1?"":"none");for(let a=1;a<l.accretionInfo.rankImage.length;a++)n(`rankStat${a}`).style.display=t.accretion.rank>=a?"":"none"}else if(r===4){let a=t.strangeness[4][5]>=2;n("star1Stat").style.display=!a&&u[2].trueTotal[0]>0?"":"none",n("star2Stat").style.display=!a&&u[3].trueTotal[0]>0?"":"none",n("star3Stat").style.display=!a&&u[4].trueTotal[0]>0?"":"none",n("gammaRayStat").style.display=t.researches[4][4]>=1?"":"none"}}}},xe=(e,s)=>{if(s==="elements"){let i=l.elementsInfo;n("elementText").textContent=`${i.name[e]}.`,n("elementEffect").textContent=t.elements[e]>=1||t.collapse.show>=e&&e!==0?i.effectText[e]():"Effect is not yet known.",n("elementCost").textContent=t.elements[e]>=1?"Obtained.":t.elements[e]>0?"Awaiting Collapse.":`${f(i.startCost[e])} Elements.`;return}let r=t.stage.active,o=r===1?"Energy":r===2?"Drops":r===3?"Mass":"Elements";if(s==="upgrades"){let i=l[`${s}Info`][r];n("upgradeText").textContent=`${i.name[e]}.`,n("upgradeEffect").textContent=i.effectText[e](),n("upgradeCost").textContent=t.upgrades[r][e]===1?"Created.":r===4&&l.collapseInfo.unlockU[e]>t.collapse.mass&&t.buildings[5][3].true<1?`Unlocked at ${f(l.collapseInfo.unlockU[e])} Mass.`:`${f(i.startCost[e])} ${o}.`}else if(s==="researches"||s==="researchesExtra"){let i=l[`${s}Info`][r],u=t[s][r][e];if(s==="researchesExtra"&&r===4&&e===0&&(i.name[0]=["Nova","Supernova","Hypernova"][Math.min(u,2)]),n("upgradeText").textContent=`${i.name[e]}.`,n("upgradeEffect").textContent=i.effectText[e](),u>=i.max[e])n("upgradeCost").textContent="Maxed.";else if(r===4&&s==="researches"&&l.collapseInfo.unlockR[e]>t.collapse.mass&&t.buildings[5][3].true<1)n("upgradeCost").textContent=`Unlocked at ${f(l.collapseInfo.unlockR[e])} Mass.`;else{let a=1,c=i.cost[e];if(t.toggles.max[0]&&t.strangeness[1][7]>=2&&i.max[e]>1){let d=i.scaling[e];if(r===1)if(t.strangeness[1][11]>=1)a=Math.min(Math.max(Math.floor((t.discharge.energy-c)/d+1),1),i.max[e]-u),a>1&&(c+=(a-1)*d);else{let p=c-d/2;a=Math.min(Math.max(Math.floor(((p**2+2*d*t.discharge.energy)**.5-p)/d),1),i.max[e]-u),a>1&&(c=a*(a*d/2+p))}else{let p=r===2?t.buildings[2][1].current:r===3?t.buildings[3][0].current:t.buildings[4][0].current;a=Math.min(Math.max(Math.floor(g(p).multiply(d-1).divide(c).plus("1").log(d).toNumber()),1),i.max[e]-u),a>1&&(c=g(d).power(a).minus("1").divide(d-1).multiply(c).toNumber())}}n("upgradeCost").textContent=`${f(c)} ${o}.${a>1?` [x${f(a)}]`:""}`}}else if(s==="researchesAuto"){let i=l.researchesAutoInfo,u=t.researchesAuto[e];if(n("upgradeText").textContent=`${i.name[e]}.`,n("upgradeEffect").textContent=i.effectText[e](),u>=i.max[e])n("upgradeCost").textContent="Maxed.";else{let a=i.autoStage[e][u];n("upgradeCost").textContent=a===r||r===5&&a===4?`${f(i.costRange[e][u])} ${o}.`:`This level can only be created while inside '${l.stageInfo.word[a]}'.`}}else if(s==="ASR"){let i=l.ASRInfo,u=t.ASR[r];n("upgradeText").textContent=`${i.name}.`,n("upgradeEffect").textContent=i.effectText(),n("upgradeCost").textContent=u>=i.max[r]?"Maxed.":r===3&&t.accretion.rank<1?"Cannot be created at 'Ocean world' Rank.":`${f(i.costRange[r][u])} ${o}.`}},Ee=(e,s,r)=>{let o=n(`${r}Stage`);if(o.style.color=`var(--${l.stageInfo.textColor[s]}-text)`,o.textContent=`${l.stageInfo.word[s]}. `,r==="strangeness"){let i=l.strangenessInfo[s];n("strangenessText").textContent=`${i.name[e]}.`,n("strangenessEffect").textContent=i.effectText[e](),n("strangenessCost").textContent=t.strangeness[s][e]>=i.max[e]?"Maxed.":`${f(i.cost[e])} Strange quarks.`}else{let i=l.milestonesInfo[s];n("milestonesText").textContent=`${i.name[e]}. (${f(t.milestones[s][e])})`,t.inflation.vacuum?n("milestonesMultiline").innerHTML=`<p class="orchidText">Requirement: <span class="greenText">${i.needText[e]()}</span></p>
            <p class="darkvioletText">Effect: <span class="greenText">${i.rewardText[e]()}</span></p>`:i.need[e][0]!==0?n("milestonesMultiline").innerHTML=`<p class="orchidText">Requirement: <span class="greenText">${i.needText[e]()}</span></p>
            <p class="darkvioletText">Unlock: <span class="greenText">Main reward unlocked after ${i.scalingOld[e].length-t.milestones[s][e]} more completions.</span></p>`:n("milestonesMultiline").innerHTML=`<p class="darkvioletText">Reward: <span class="greenText">${i.rewardText[e]()}</span></p>`}},me=e=>{let s;if(e===-1)s=`<h3 class="orchidText">Vacuum state: <span ${t.inflation.vacuum?'class="greenText">true':'class="redText">false'}</span></h3>`;else{let r=l.challengesInfo,o=`${r.color[e]}Text`;s=`<h3 class="${o} bigWord">${r.name[e]}${t.challenges.active===e?', <span class="greenText">active</span>':""}</h3>
        <p class="whiteText">${r.description[e]}</p>
        <div><h4 class="${o} bigWord">Effect:</h4>
        <p>${r.effectText[e]()}</p></div>`}if(e===0){let r=t.challenges.void;n("voidRewards").style.display="",n("voidRewardSubmerged").style.display=r[1]>=3?"":"none",n("voidRewardAccretion").style.display=r[1]>=2?"":"none",n("voidRewardInterstellar").style.display=r[3]>=5?"":"none"}else n("voidRewards").style.display="none";n("challengeMultiline").innerHTML=s},Le=e=>{let s=l.challengesInfo.needText[0][e],r=l.challengesInfo.rewardText[0][e],o=t.challenges.void[e],i="";for(let u=0;u<s.length;u++)i+=`<div><p><span class="${o>u?"greenText":"redText"}">\u2192</span> ${e===2&&u===1?s[u].replace("1e4",f(1e4)):s[u]}</p>
        <p><span class="${o>u?"greenText":"redText"}">Reward:</span> ${o>u?r[u]:"Not yet unlocked"}</p></div>`;n("voidRewardsDivText").innerHTML=i},Y=(e,s,r)=>{if(r==="upgrades"){if(s!==t.stage.active)return;let o="",i=n(`upgrade${e+1}`);t.upgrades[s][e]===1?(s===1?o="green":s===2?o="darkgreen":s===3?o="#0000b1":s===4?o="#1f1f8f":s===5&&(o="#990000"),i.tabIndex=l.supportSettings[0]?-1:0):i.tabIndex=0,i.style.backgroundColor=o}else if(r==="elements"){let o=n(`element${e}`);t.elements[e]>=1?(o.classList.remove("awaiting"),o.classList.add("created"),o.tabIndex=l.supportSettings[0]?-1:0):t.elements[e]>0?(o.classList.add("awaiting"),o.classList.remove("created"),o.tabIndex=0):(o.classList.remove("awaiting"),o.classList.remove("created"),o.tabIndex=0)}},V=(e,s,r)=>{let o,i,u,a;if(r==="researches"||r==="researchesExtra"){if(s!==t.stage.active)return;o=l[`${r}Info`][s].max[e],i=t[r][s][e];let c=r==="researches"?"":"Extra";u=n(`research${c}${e+1}Level`),n(`research${c}${e+1}Max`).textContent=`${o}`,a=n(`research${c}${e+1}Image`)}else if(r==="researchesAuto")o=l.researchesAutoInfo.max[e],i=t.researchesAuto[e],u=n(`researchAuto${e+1}Level`),n(`researchAuto${e+1}Max`).textContent=`${o}`,a=n(`researchAuto${e+1}Image`);else if(r==="ASR"){if(s!==t.stage.active)return;o=l.ASRInfo.max[s],i=t.ASR[s],u=n("ASRLevel"),n("ASRMax").textContent=`${o}`,a=n("ASRImage")}else o=l.strangenessInfo[s].max[e],i=t.strangeness[s][e],u=n(`strange${e+1}Stage${s}Level`),n(`strange${e+1}Stage${s}Max`).textContent=`${o}`,a=n(`strange${e+1}Stage${s}Image`);u.textContent=`${i}`,i>=o?(u.style.color="var(--green-text)",a.tabIndex=l.supportSettings[0]?-1:0):i===0?(u.style.color="",a.tabIndex=0):(u.style.color="var(--orchid-text)",a.tabIndex=0)},Ut=()=>{let e=t.accretion.rank;if(l.debug.rankUpdated===e)return;let s=n("rankName",!1);if(s===null)return;let r=l.accretionInfo;n("rankMessage",!1).textContent=e===0?"Might need more than just water... Increase Rank with Mass.":`Increase it with Mass. (Return back to ${t.inflation.vacuum?"Preons":"Dust"}, but unlock something new)`,n("reset1Button").textContent=r.rankCost[e]===0?"Max Rank achieved":`Next Rank is ${f(r.rankCost[e])} Mass`,n("rankImage",!1).src=`Used_art/${r.rankImage[e]}`,s.textContent=r.rankName[e],s.style.color=`var(--${r.rankColor[e]}-text)`,l.debug.rankUpdated=e},Bt=()=>{if(l.debug.historyStage===t.stage.resets)return;let e=l.historyStorage.stage,s="";if(e.length>0)for(let i=0;i<e.length;i++){let u=e[i][0]/1e12**e[i][2];s+=`<li class="whiteText"><span class="greenText">${f(u)} ${l.strangeInfo.name[e[i][2]]}</span>, <span class="blueText">${f(e[i][1],{type:"time"})}</span>, <span class="darkorchidText">${f(u/e[i][1],{type:"income",padding:!0})}</span></li>`}else s='<li class="redText">Reference list is empty</li>';n("stageResetsList").innerHTML=s;let r=t.history.stage.best,o=r[0]/1e12**r[2];n("stageBest").innerHTML=`Best reset: <span class="whiteText"><span class="greenText">${f(o)} ${l.strangeInfo.name[r[2]]}</span>, <span class="blueText">${f(r[1],{type:"time"})}</span>, <span class="darkorchidText">${f(o/r[1],{type:"income",padding:!0})}</span></span>`,l.debug.historyStage=t.stage.resets},f=(e,s={})=>{let r=s.type!==void 0?s.type:"number",o;if(r==="income"){let d=Math.abs(e);d>=1?o="per second":d>=1/60?(e*=60,o="per minute"):d>=1/3600?(e*=3600,o="per hour"):d>=1/86400?(e*=86400,o="per day"):d>=1/31556952?(e*=31556952,o="per year"):d>=1/31556952e3?(e*=31556952e3,o="per millennium"):d>=1/31556952e6?(e*=31556952e6,o="per megaannum"):(e*=31556952e9,o="per eon"),s.padding===void 0&&(s.padding=!0)}else if(r==="time"){let d=Math.abs(e);if(d<60)o="seconds";else if(d<3600){let p=Math.trunc(e/60),m=Math.trunc(e-p*60);return s.padding===!1&&m===0?`${p} minutes`:`${p} minutes ${m} seconds`}else if(d<86400){let p=Math.trunc(e/3600),m=Math.trunc(e/60-p*60);return s.padding===!1&&m===0?`${p} hours`:`${p} hours ${m} minutes`}else if(d<31556952){let p=Math.trunc(e/86400),m=Math.trunc(e/3600-p*24);return s.padding===!1&&m===0?`${p} days`:`${p} days ${m} hours`}else if(d<31556952e3){let p=Math.trunc(e/31556952),m=Math.trunc(e/86400-p*365.2425);return s.padding===!1&&m===0?`${p} years`:`${p} years ${m} days`}else d<31556952e6?(e/=31556952e3,o="millenniums"):d<31556952e9?(e/=31556952e6,o="megaannums"):(e/=31556952e9,o="eons");s.padding=!(s.padding===!1&&Math.trunc(e)===e),s.digits=3}if(!isFinite(e))return o!==void 0?`${e} ${o}`:`${e}`;let i=Math.abs(e);if(i>=1e6||i<.001&&i>0){let d=s.digits!==void 0?s.digits:2,p=Math.floor(Math.log10(i)),m=Math.round(e/10**(p-d))/10**d;Math.abs(m)===10&&(m=1,p++);let b=s.padding===!0?m.toFixed(d):`${m}`;return r==="input"?`${b}e${p}`:(b=`${b.replace(".",t.separator[1])}e${p}`,o!==void 0?`${b} ${o}`:b)}let u=s.digits!==void 0?s.digits:Math.max(4-Math.floor(Math.log10(Math.max(i,1))),0),a=Math.round(e*10**u)/10**u,c=s.padding===!0?a.toFixed(u):`${a}`;return r==="input"?c:(c=c.replace(".",t.separator[1]),a>=1e3&&(c=c.replace(/\B(?=(\d{3})+(?!\d))/,t.separator[0])),o!==void 0?`${c} ${o}`:c)},G=(e="normal")=>{let{stageInfo:s,buildingsInfo:r}=l,{active:o,current:i,true:u,resets:a}=t.stage,c=t.inflation.vacuum,d=t.challenges.active;s.activeAll=[c?1:i];let p=s.activeAll;if(c)t.researchesExtra[1][2]>=2&&p.push(2),t.researchesExtra[1][2]>=1&&p.push(3),t.accretion.rank>=6&&(p.push(4),t.strangeness[5][5]>=1&&d!==0&&p.push(5));else{i===4?t.milestones[5][0]>=6&&p.push(5):i===5&&p.unshift(4);for(let h=t.strangeness[5][0];h>=1;h--)i!==h&&p.unshift(h)}for(let h=1;h<=6;h++){for(let $ of ke(`stage${h}Only`))$.style.display=o===h?"":"none";for(let $ of ke(`stage${h}Include`))$.style.display=p.includes(h)?"":"none";for(let $ of ke(`stage${h}Unlock`))$.style.display=u>=h?"":"none"}let m=n("stageWord"),b=n("stageStatus");if(d===-1?(b.textContent="Current Stage:",b.style.color="",m.textContent=s.word[i],m.style.color=`var(--${s.textColor[i]}-text)`):(b.textContent="Currently inside:",b.style.color="var(--red-text)",m.textContent=l.challengesInfo.name[d],m.style.color=`var(--${l.challengesInfo.color[d]}-text)`),n("stageSelect").style.display=p.length>1?"":"none",t.strange[0].total<=0&&(n("strangenessTabBtn").style.display="none"),c)n("stageReset").textContent=i>=5?"Return back to start":"Not ready for reset",a<1&&u<7?i<5&&(n("resetStage").style.display="none",n("stageToggleReset").style.display="none"):(n("dischargeToggleReset").style.display="",n("vaporizationToggleReset").style.display="",n("rankToggleReset").style.display="",n("collapseToggleReset").style.display="");else for(let h=2;h<=4;h++)n(`strangeness${l.mobileDevice?"Page":"Section"}${h}`).style.display=a>=h+3?"":"none",n(`milestone1Stage${h}Div`).style.display=a>=h+3?"":"none",n(`milestone2Stage${h}Div`).style.display=a>=h+3?"":"none";if(e==="soft"){W(),te();return}else if(l.screenReader){n("reset1Main").setAttribute("aria-label",`${["","Discharge","Vaporization","Rank","Collapse",""][o]} reset (hotkey ${["","D","V","R","C"][o]})`);for(let h=1;h<r.maxActive[o];h++)n(`building${h}`).setAttribute("aria-label",`${r.name[o][h]} (hotkey ${h})`);n("extraResearches").setAttribute("aria-label",`${["","Energy","Cloud","Rank","Collapse",""][o]} Researches`),n("SRStage").textContent=`Current active Stage is '${s.word[o]}'${e==="reload"&&d!==-1?`, also inside the '${l.challengesInfo.name[d]}'`:""}`}for(let h of["upgrade","element"])n(`${h}Text`).textContent="Hover to see.",n(`${h}Effect`).textContent="Hover to see.",n(`${h}Cost`).textContent="Resource.";if(e==="reload"){for(let h=1;h<=5;h++)n(`${s.word[h]}Switch`).style.textDecoration=o===h?"underline":"",l.lastUpgrade[h][0]=-1;l.lastElement=-1,l.lastStrangeness=[-1,-1],l.lastMilestone=[-1,-1],l.lastChallenge=[-1,-1],l.debug.historyStage=-1;for(let h of["strangeness","milestones"])n(`${h}Stage`).textContent="",n(`${h}Text`).textContent="Hover to see.";n("strangenessEffect").textContent="Hover to see.",n("strangenessCost").textContent="Strange quarks.",n("milestonesMultiline").innerHTML='<p class="orchidText">Requirement: <span class="greenText">Hover to see.</span></p><p class="darkvioletText">Unlock: <span class="greenText">Hover to see.</span></p>',l.mobileDevice&&Oe(1),me(-1),l.trueActive=o;for(let h=0;h<l.elementsInfo.startCost.length;h++)Y(h,4,"elements");X(),ae("all"),K("researches","all"),K("researchesExtra","all"),oe()}for(let h=r.maxActive[o];h<I.longestBuilding;h++)n(`building${h}Stats`).style.display="none",n(`building${h}`).style.display="none";for(let h=l.upgradesInfo[o].maxActive;h<I.longestUpgrade;h++)n(`upgrade${h+1}`).style.display="none";for(let h=l.researchesInfo[o].maxActive;h<I.longestResearch;h++)n(`research${h+1}`).style.display="none";for(let h=l.researchesExtraInfo[o].maxActive;h<I.longestResearchExtra;h++)n(`researchExtra${h+1}`).style.display="none";for(let h=I.footerStatsHTML[o].length;h<I.longestFooterStats;h++)n(`footerStat${h+1}`).style.display="none";let x=[],w=[],M=[],S=[];o===1?(x.push(3,4,5,6),w.push(1,2,3,4,5,6),S.push(1,2),c?(x.unshift(1,2),M.push(1,3)):(n("upgrade1").style.display="none",n("upgrade2").style.display="none",n("extraResearches").style.display="none")):o===2?(x.push(1),w.push(1,2),M.push(1,2),S.push(2,3),c&&(n("stageInfo").style.display="")):o===3?(x.push(1,2),w.push(1,2),M.push(1),S.push(1),l.debug.rankUpdated=-1,n("reset1Main").style.display="",n("stageInfo").style.display=c?"":"none"):o===4?(x.push(1,2,3),w.push(1,2,3),M.push(1),S.push(1,2),n("stageInfo").style.display="",n("extraResearches").style.display=""):o===5&&(S.push(1,2,3),n("reset1Main").style.display="none",n("stageInfo").style.display="none",n("extraResearches").style.display="none",c&&(n("building2").style.display="",x.push(1,2),w.push(1,2))),n("buildings").style.display="",n("building1").style.display="",n("upgrades").style.display="",n("researches").style.display="",n("stageResearches").style.display="",o!==4&&(n("specials").style.display="none"),n("solarMassStats").style.display=o===4||o===5?"":"none",n("autoWaitInput").value=f(t.toggles.shop.wait[o],{type:"input"}),n("reset1Text").innerHTML=I.resetHTML[o];let E=I.buildingHTML[o];for(let h=1;h<r.maxActive[o];h++)n(`building${h}Image`).src=`Used_art/${E[h-1]}`,n(`building${h}StatName`).textContent=r.name[o][h],n(`building${h}Name`).textContent=r.name[o][h],F(`#building${h}ProdDiv > span`).textContent=r.type[o][h],n(`building${h}ProdDiv`).title=r.hoverText[o][h-1],D(h,"buildings");n("building0StatName").textContent=r.name[o][0],D(0,"buildings");let k=I.upgradeHTML[o];for(let h=0;h<l.upgradesInfo[o].maxActive;h++){let $=n(`upgrade${h+1}`);x.includes(h+1)&&($.style.display=""),$.src=`Used_art/${k[h][0]}`,$.alt=k[h][1],Y(h,o,"upgrades")}let P=I.researchHTML[o];for(let h=0;h<l.researchesInfo[o].maxActive;h++){let $=n(`research${h+1}`);w.includes(h+1)&&($.style.display=""),$.className=P[h][2];let B=n(`research${h+1}Image`);B.src=`Used_art/${P[h][0]}`,B.alt=P[h][1],V(h,o,"researches")}if(o!==5){let h=I.researchExtraHTML[o];for(let $=0;$<l.researchesExtraInfo[o].maxActive;$++){let B=n(`researchExtra${$+1}`);M.includes($+1)&&(B.style.display=""),B.className=h[$][2];let be=n(`researchExtra${$+1}Image`);be.src=`Used_art/${h[$][0]}`,be.alt=h[$][1],V($,o,"researchesExtra")}F("#extraResearches > div").className=I.researchExtraDivHTML[o][1],F("#extraResearches > img").src=`Used_art/${I.researchExtraDivHTML[o][0]}`}V(0,o,"ASR");let N=I.footerStatsHTML[o];for(let h=0;h<N.length;h++)S.includes(h+1)&&(n(`footerStat${h+1}`).style.display=""),F(`#footerStat${h+1} > img`).src=`Used_art/${N[h][0]}`,F(`#footerStat${h+1} > p`).className=N[h][1],n(`footerStat${h+1}Name`).textContent=N[h][2];let U=document.body.style;o===1?(U.removeProperty("--stage-text"),U.removeProperty("--stage-button-border"),U.removeProperty("--stage-image-borderColor"),U.removeProperty("--image-border")):(U.setProperty("--stage-text",`var(--${s.textColor[o]}-text)`),U.setProperty("--stage-button-border",s.buttonBorder[o]),U.setProperty("--stage-image-borderColor",s.imageBorderColor[o]),U.setProperty("--image-border",`url("Used_art/Stage${o} border.png")`)),n("currentSwitch").textContent=s.word[o],l.trueActive===o&&q(se(l.tab)?l.tab:"stage"),st()};var ye=(e,s)=>{if(e==="galaxy"){let{elements:r}=t;for(let o=1;o<r.length;o++)fe(o,4,"elements")&&(r[o]=0,Y(o,4,"elements"));oe(),t.collapse.mass=.01235,t.collapse.stars=[0,0,0]}for(let r of s){r===2?(l.vaporizationInfo.research0=0,l.vaporizationInfo.research1=0):r===4&&(l.collapseInfo.trueStars=0);let o=t.buildings[r];o[0].current=C(v.buildings[r][0].current),o[0].total=C(v.buildings[r][0].total);for(let c=1;c<l.buildingsInfo.maxActive[r];c++)fe(c,r,"structures")&&(o[c].true=0,o[c].current=[0,0],o[c].total=[0,0]);if(e==="discharge")continue;let i=t.upgrades[r];for(let c=0;c<l.upgradesInfo[r].maxActive;c++)fe(c,r,"upgrades")&&(i[c]=0,Y(c,r,"upgrades"));if(ae(r),e==="vaporization")continue;let u=t.researches[r];for(let c=0;c<l.researchesInfo[r].maxActive;c++)fe(c,r,"researches")&&(u[c]=0,V(c,r,"researches"),he(c,r,"researches"));if(K("researches",r),e==="rank")continue;let a=t.researchesExtra[r];for(let c=0;c<l.researchesExtraInfo[r].maxActive;c++)fe(c,r,"researchesExtra")&&(a[c]=0,V(c,r,"researchesExtra"),he(c,r,"researchesExtra"));K("researchesExtra",r)}(t.inflation.vacuum||e==="discharge")&&(t.strangeness[1][11]<1?(t.discharge.energy=0,l.dischargeInfo.energyTrue=0):re()),X(),s.includes(t.stage.active)&&W(),te()},rt=(e,s="normal")=>{for(let r of e){let o=t.buildings[r],i=v.buildings[r];for(let u=1;u<l.buildingsInfo.maxActive[r];u++)o[u].true=0,o[u].current=[0,0],o[u].total=[0,0],o[u].trueTotal=[0,0];if(o[0].current=C(i[0].current),o[0].total=C(i[0].total),o[0].trueTotal=C(i[0].trueTotal),t.upgrades[r]=C(v.upgrades[r]),t.researches[r]=C(v.researches[r]),t.researchesExtra[r]=C(v.researchesExtra[r]),t.ASR[r]=t.strangeness[r][[6,5,5,6,7][r-1]],ae(r),l.lastUpgrade[r][0]=-1,r===1)t.discharge.current=0,t.discharge.energy=0,l.dischargeInfo.energyTrue=0;else if(r===2)t.vaporization.clouds=[0,0],l.vaporizationInfo.research0=0,l.vaporizationInfo.research1=0;else if(r===3)t.inflation.vacuum?t.accretion.rank=1:(t.accretion.rank=0,o[0].current=[5.9722,27]);else if(r===4){l.collapseInfo.trueStars=0,t.collapse.mass=.01235,t.collapse.stars=[0,0,0],t.elements=C(v.elements),t.elements[0]=t.strangeness[4][10]>=1?1:0,oe();for(let u=0;u<t.elements.length;u++)Y(u,4,"elements");l.lastElement=-1}else r===5&&t.strangeness[5][6]>=2&&t.ASR[5]++}t.researchesAuto[0]=t.strangeness[3][6],t.researchesAuto[1]=t.strangeness[1][7]>=1?1:0;for(let r=0;r<v.researchesAuto.length;r++)A(r,0,"researchesAuto");for(let r of e){for(let o=0;o<l.researchesInfo[r].maxActive;o++)A(o,r,"researches");for(let o=0;o<l.researchesExtraInfo[r].maxActive;o++)A(o,r,"researchesExtra");A(0,r,"ASR"),K("researches",r),K("researchesExtra",r)}if(X(),s!==!1&&(G(s),s==="soft")){let r=t.stage.active;for(let o=0;o<l.upgradesInfo[r].maxActive;o++)Y(o,r,"upgrades")}},bt=()=>{for(let e=1;e<=5;e++){let s=t.buildings[e],r=v.buildings[e];for(let o=1;o<r.length;o++)s[o].true=0,s[o].current=[0,0],s[o].total=[0,0],s[o].trueTotal=[0,0],s[o].highest=[0,0];s[0].current=C(r[0].current),s[0].total=C(r[0].total),s[0].trueTotal=C(r[0].trueTotal),s[0].highest=C(r[0].highest),t.upgrades[e]=C(v.upgrades[e]),t.researches[e]=C(v.researches[e]),t.researchesExtra[e]=C(v.researchesExtra[e]),t.strangeness[e]=C(v.strangeness[e]),t.milestones[e]=C(v.milestones[e]),t.ASR[e]=0}for(let e=0;e<v.researchesAuto.length;e++)t.researchesAuto[e]=0,A(e,0,"researchesAuto");t.discharge.energy=0,t.discharge.energyMax=0,t.discharge.current=0,l.dischargeInfo.energyTrue=0,t.vaporization.clouds=[0,0],t.vaporization.cloudsMax=[0,0],l.vaporizationInfo.research0=0,l.vaporizationInfo.research1=0,t.inflation.vacuum?t.accretion.rank=1:(t.accretion.rank=0,t.buildings[3][0].current=[5.9722,27]),l.collapseInfo.trueStars=0,t.collapse.mass=.01235,t.collapse.massMax=.01235,t.collapse.stars=[0,0,0],t.collapse.show=0,t.elements=C(v.elements),l.historyStorage.stage=[],t.history.stage.best=[0,1,0],t.stage.resets=0,t.stage.best=0,t.stage.time=0,t.time.stage=0;for(let e=0;e<t.strange.length;e++)t.strange[e].current=0,t.strange[e].total=0;Z();for(let e=1;e<=5;e++){for(let s=0;s<l.researchesInfo[e].maxActive;s++)A(s,e,"researches");for(let s=0;s<l.researchesExtraInfo[e].maxActive;s++)A(s,e,"researchesExtra");A(0,e,"ASR")}for(let e=1;e<v.strangeness.length;e++)for(let s=0;s<l.strangenessInfo[e].maxActive;s++)A(s,e,"strangeness");for(let e=1;e<v.milestones.length;e++)for(let s=0;s<v.milestones[e].length;s++)Me(s,e);G("reload")};var y={S1Upgrade6:()=>10+3*t.researches[1][0],S1Upgrade7:()=>(102+t.researches[1][1])/100,S1Upgrade9:()=>{let e=Math.max(t.discharge.energy,1);return e>4e4?(e/4e4)**.4*4e4:e},S1Research2:()=>20+t.strangeness[1][5],S1Research5:()=>1.25+t.researches[1][5]/4,S1Extra1:()=>{let e=t.researchesExtra[1][1];return e>=4?1.1:e>=3?1.2:(20-3*e)/10},S1Extra3:()=>t.researchesExtra[1][3]/20,S1Extra4:()=>1+l.dischargeInfo.base/100,clouds:(e=!1)=>{let s=g(t.vaporization.clouds).plus("1").toArray();return e&&(s=g(s).plus(l.vaporizationInfo.get).toArray()),g(s).moreThan("1e4")&&(s=g(s).minus("1e4").power(.7).plus("1e4").toArray()),s},S2Upgrade1:()=>{let e=t.buildings[2][2];if(t.challenges.active===0)return g("1.01").power((g(e.current).toNumber()-e.true)**.7+e.true).toArray();{let s=g("1.02").power((g(e.current).toNumber()-e.true)**.7+Math.min(e.true,200)).toArray();return e.true>200&&(s=g("1.01").power(e.true-200).multiply(s).toArray()),s}},S2Upgrade2:()=>1e10/2**t.strangeness[2][3],S2Upgrade3:()=>(1+t.researches[2][2]/2)/100,S2Upgrade4:()=>(1+t.researches[2][3]/2)/100,S2Upgrade5:()=>1+t.researches[2][4],S2Upgrade6:()=>1+t.researches[2][5],S2Extra1_2:(e=!1)=>{if(t.researchesExtra[2][1]<1)return[1,1];let s=t.vaporization.clouds;return e&&(s=g(s).plus(l.vaporizationInfo.get).toArray()),t.researchesExtra[2][2]<1?[g(s).max("1").power(.1).toNumber(),1]:(s=g(s).max("1").power(.11).toNumber(),[s,(s-1)/16+1])},S3Upgrade0:()=>(101+t.researches[3][1])/100,S3Upgrade1:()=>(5+t.researchesExtra[3][3])/100,S3Upgrade3:()=>(102+t.researches[3][4]/2)/100,S3Research6:()=>t.researches[3][6]/40,S3Extra1:()=>1+.1*t.researchesExtra[3][1],S3Extra4:e=>(e-1)/(32/2**t.researchesExtra[3][4])+1,mass:(e=!1)=>{let s=1,r=t.collapse.mass;e&&(s=.5,l.collapseInfo.newMass>r&&(r=l.collapseInfo.newMass));let o=1;return t.challenges.active===0&&(r/=40,o-=.2),t.elements[21]>=s&&(o+=.1),r**(r>1?o:2-o)},star:[(e=!1)=>{let s=1,r=t.collapse.stars[0]+1;return e&&(s=.5,r+=l.collapseInfo.starCheck[0]),t.elements[6]>=s&&(r**=y.element6()),r},(e=!1)=>{let s=1,r=t.collapse.stars[1];e&&(s=.5,r+=l.collapseInfo.starCheck[1],t.elements[22]>=s&&(r+=l.collapseInfo.starCheck[0])),t.elements[22]>=s&&(r+=t.collapse.stars[0]);let o=(r+1)**(.5+t.strangeness[4][10]/40);if(t.elements[12]>=s){let i=y.element12();o*=qe(r+i,i)}return o},(e=!1)=>{let s=1,r=t.collapse.stars[2];return e&&(s=.5,r+=l.collapseInfo.starCheck[2]),r<1?1:(r+1)/qe(r+2,t.elements[18]>=s?3:2)}],S4Research0:()=>{let e=1.3+.15*t.researches[4][2];return t.inflation.vacuum&&(e+=l.milestonesInfo[3].reward[1]),e},S4Research1:()=>{let e=t.challenges.active===0?.004:.005;t.researchesExtra[4][1]>=1&&(e+=.001);let s=t.researches[4][1],r=s>0?1+Math.min(s,4):0;return s>4&&(r+=.5),s>5&&(r+=s/4-1.25),1+e*r},S4Research4:(e=!1)=>{if(t.researches[4][4]<1)return 1;let s=1,r=t.collapse.stars[2],o=t.collapse.mass;e&&(s=.5,t.strangeness[4][5]<2&&(r+=l.collapseInfo.starCheck[2]),l.collapseInfo.newMass>o&&(o=l.collapseInfo.newMass));let i=qe(r+3,t.researches[4][4]>=2?2:3);return t.elements[23]>=s&&(i*=o**.1),i},S4Extra1:()=>(10+t.researches[4][1])/10,S5Upgrade0:()=>3*2**t.strangeness[5][3],S5Upgrade1:()=>2*3**t.strangeness[5][4],element6:()=>t.researchesExtra[4][2]>=1?2:1.5,element12:()=>10-t.strangeness[4][10],element24:()=>t.inflation.vacuum||t.milestones[1][1]>=6?.02:.01,element27:()=>{let e=g(t.buildings[4][0].trueTotal).log(10).toNumber()-48;return!t.inflation.vacuum&&t.upgrades[5][2]===1&&(e**=1.5),Math.max(Math.floor(e),0)},element28:()=>t.researchesExtra[4][2]>=1?3:2,S2Strange9:()=>g(t.vaporization.clouds).lessOrEqual("1")?1:g(t.vaporization.clouds).log(10).toNumber()/50+1},X=()=>{let{buildings:e,upgrades:s,researches:r,researchesExtra:o,elements:i,strangeness:u}=t,{dischargeInfo:a,vaporizationInfo:c,collapseInfo:d,milestonesInfo:p}=l,m=l.buildingsInfo.producing,b=l.strangeInfo.stageBoost,x=l.stageInfo.activeAll,w=t.inflation.vacuum,M=t.challenges.active===0;if(x.includes(1)){let S=w?3:1,E=w?4:2,k=w?5:3;a.total=t.discharge.current+u[1][2]/2,b[1]!==null&&(a.total+=b[1]),a.base=4+r[1][4]+u[1][0],M&&(a.base=(a.base-1)/2+1);let P=a.base**a.total*1.3**u[1][9];w&&(P*=p[1].reward[0]);let N=y.S1Upgrade7(),U=[e[1][k].current],h=.2*P;if(w&&s[1][4]===1&&(h*=5),s[1][7]===1&&U.push(g(N).power(e[1][k].true).toArray()),m[1][k]=g(h).multiply(...U).toArray(),g(m[1][k]).moreThan("1")){let ce=y.S1Research2()**r[1][2];s[1][9]===1&&(ce*=y.S1Upgrade9()),r[1][5]>=1&&(ce*=t.discharge.current**y.S1Research5()),a.tritium=g(m[1][k]).log(y.S1Extra1()).multiply(ce).toArray()}else a.tritium=[0,0];let $=[e[1][E].current],B=(w?.2:.6)*P;w?s[1][3]===1&&(B*=5):s[1][4]===1&&(B*=5),s[1][7]===1&&$.push(g(N).power(e[1][E].true).toArray()),m[1][E]=g(B).multiply(...$).toArray();let be=[e[1][S].current],Ze=(w?.2:.4)*P;if(s[1][0]===1&&(Ze*=5),!w&&s[1][3]===1&&(Ze*=5),s[1][7]===1&&be.push(g(N).power(e[1][S].true).toArray()),m[1][S]=g(Ze).multiply(...be).toArray(),w){let ce=[e[1][2].current];s[1][7]===1&&ce.push(g(N).power(e[1][2].true).toArray()),m[1][2]=g(.2*P).multiply(...ce).toArray();let mt=[e[1][1].current];s[1][7]===1&&mt.push(g(N).power(e[1][1].true).toArray()),m[1][1]=g(.001*P).multiply(...mt).toArray(),g(m[1][1]).moreThan("1")&&(m[1][1]=g(m[1][1]).power(.15).toArray())}}if(x.includes(2)){m[2][6]=g(Math.max(2*e[2][6].true,1)).toArray();let S=y.S2Extra1_2();m[2][5]=g(2*S[1]).multiply(e[2][5].current,m[2][6]).max("1").toArray(),m[2][4]=g("2").multiply(e[2][4].current,m[2][5]).max("1").toArray(),m[2][3]=g("2").multiply(e[2][3].current,m[2][4]).max("1").toArray(),c.strength=y.clouds();let E=[m[2][3],c.strength];c.tension=s[2][3]===1?g(e[2][0].current).max("1").power(y.S2Upgrade3()).toNumber():1,c.stress=s[2][4]===1?g(e[2][1].current).max("1").power(y.S2Upgrade4()).toNumber():1;let k=(M?.01:2)*g(e[2][2].current).toNumber()*c.tension*c.stress*S[0]*1.5**u[2][1];if(s[2][1]===1&&E.push(y.S2Upgrade1()),r[2][1]>=1&&(c.research1!==r[2][1]&&(c.research1=Math.min(r[2][1],Math.max(Math.floor(g(e[2][1].total).divide("1e2").plus("1").log(5).toNumber()),0))),k*=2**c.research1),w&&(k*=p[2].reward[1]),b[2]!==null&&(k*=b[2]),m[2][2]=g(k).multiply(...E).toArray(),c.dropsEff=e[2][1].current,M)g(c.dropsEff).moreThan("1")&&(c.dropsEff=g(c.dropsEff).power(.1).toArray());else if(w){let U=g(c.dropsEff).minus(e[2][1].true).toArray();g(U).moreThan("1")&&(c.dropsEff=g(U).power(.2).plus(e[2][1].true).toArray())}let P=[c.dropsEff];s[2][0]===1&&P.push(g("1.04").power(e[2][1].true).toArray());let N=(w?1:2e-4)*1.5**u[2][0];r[2][0]>=1&&(c.research0!==r[2][0]&&(c.research0=Math.min(r[2][0],Math.max(Math.floor(g(e[2][1].total).divide("1e1").log(1.36).toNumber()+1),0))),N*=3**c.research0),m[2][1]=g(N).multiply(...P).toArray(),w&&(m[2][1]=g(m[2][1]).plus("1").toArray(),a.tritium=g(a.tritium).multiply(m[2][1]).toArray())}if(x.includes(3)){let S=t.accretion.rank;l.accretionInfo.effective=S+u[3][10],m[3][5]=g("1.1").power(e[3][5].true).toArray(),m[3][4]=g(s[3][12]===1?"1.14":"1.1").power(e[3][4].true).multiply(m[3][5]).toArray();let E=u[3][3]<1?[1,0]:g(m[3][4]).power(w?.2:.4).toArray(),k=[e[3][3].current,m[3][4]],P=.2*1.5**u[3][1];o[3][2]>=1&&(P*=2),s[3][7]===1&&k.push(g("1.02").power(e[3][3].true).toArray()),m[3][3]=g(P).multiply(...k).toArray();let N=[e[3][2].current,E],U=3**r[3][2]*1.5**u[3][1];s[3][3]===1&&N.push(g(y.S3Upgrade3()).power(e[3][2].true).toArray()),s[3][4]===1&&(U*=3),r[3][6]>=1&&N.push(g(e[3][0].current).power(y.S3Research6()).toArray()),m[3][2]=g(U).multiply(...N).toArray();let h=[e[3][1].current,E],$=y.S3Extra1(),B=(w?1:8e-20)*3**r[3][0]*2**r[3][3]*3**r[3][5]*1.1**o[3][0]*1.5**u[3][0];w&&(B*=p[3].reward[0]),s[3][0]===1&&h.push(g(y.S3Upgrade0()).power(e[3][1].true).toArray()),s[3][1]===1&&(B*=g(e[3][1].current).power(y.S3Upgrade1()).toNumber()),s[3][2]===1&&(B*=2),s[3][5]===1&&(B*=3),s[3][6]===1&&(B*=2*1.5**r[3][7]),s[3][9]===1&&(B*=2),s[3][10]===1&&(B*=8*2**r[3][8]),o[3][1]>=1&&(B*=$**l.accretionInfo.effective),m[3][1]=g(B).multiply(...h).toArray(),w?(m[3][1]=g(m[3][1]).plus("1").toArray(),M?m[3][1]=g(m[3][1]).power(S>=5?.84:.92).toArray():S>=5&&(m[3][1]=g(m[3][1]).power(.92).toArray()),o[3][4]>=1&&(m[2][2]=g(m[2][2]).multiply(y.S3Extra4($**S)).toArray())):S>=5&&(m[3][1]=g(m[3][1]).power(g(m[3][1]).lessThan("1")?1.1:.9).toArray())}else w&&(m[3][1]=[1,0]);if(x.includes(4)){d.massEffect=y.mass(),d.starEffect=[y.star[0](),y.star[1](),y.star[2]()];let S=[g(y.S4Research1()).power(l.collapseInfo.trueStars).toArray()],E=y.S4Research0()**r[4][0]*d.massEffect*d.starEffect[1]*1.25**r[4][3]*y.S4Research4()*1.5**u[4][0];i[4]===1&&(E*=1.2),i[14]===1&&(E*=1.4),i[19]===1&&(E*=2),i[24]===1&&(E*=g(e[4][0].current).max("1").power(y.element24()).toNumber()),i[28]===1&&(E*=y.element28()),w&&(o[1][4]>=1&&(E*=y.S1Extra4()**t.discharge.current),o[2][3]>=1&&(E*=c.tension),o[2][3]>=2&&(E*=c.stress),E*=p[4].reward[0]),b[4]!==null&&(E*=b[4]);let k=g(E).multiply(...S).toArray();m[4][5]=g("1e12").multiply(e[4][5].current,k).toArray(),m[4][4]=g("2e9").multiply(e[4][4].current,k).toArray(),m[4][3]=g("3e7").multiply(e[4][3].current,k).toArray();let P=400*d.starEffect[0]*4**r[4][3];m[4][2]=g(P).multiply(e[4][2].current,k).toArray();let N=50;i[1]===1&&(N*=2),m[4][1]=g(N).multiply(e[4][1].current,k).toArray()}else d.starEffect[2]=1;if(x.includes(5)){let S=w?2:10;w&&(s[5][2]===1&&(S+=1),S+=p[5].reward[1]),m[5][3]=g(S).power(e[5][3].true).toArray();let E=[e[5][2].current,m[5][3]],k=1.5*3**r[5][1];s[5][1]===1&&(k*=y.S5Upgrade1()),m[5][2]=g(k).multiply(...E).max("1").toArray();let P=[e[5][1].current,m[5][3]],N=4**r[5][0];s[5][0]===1&&(N*=y.S5Upgrade0()),m[5][1]=g(N).multiply(...P).toArray(),m[4][4]=g(m[4][4]).multiply(m[5][2]).toArray(),r[5][1]>=1&&(m[4][3]=g(m[4][3]).multiply(m[5][2]).divide("3").toArray()),r[5][1]>=2&&(m[4][2]=g(m[4][2]).multiply(m[5][2]).divide("9").toArray()),r[5][1]>=3&&(m[4][1]=g(m[4][1]).multiply(m[5][2]).divide("27").toArray())}if(w){let S=l.inflationInfo;if(S.preonTrue=m[1][1],S.dustTrue=m[3][1],S.dustCap=g(8e46*Et()).toArray(),g(m[3][1]).moreThan(S.dustCap)){let k=Math.min(g(m[3][1]).divide(S.dustCap).toNumber(),1.4**t.strangeness[3][9]);S.massCap=60/k,S.dustCap=g(S.dustCap).multiply(k).toArray(),m[3][1]=S.dustCap}else S.massCap=60;let E=1e14*Math.max(t.discharge.energy,1)**y.S1Extra3()*d.starEffect[2]*p[4].reward[1];i[10]===1&&(E*=2),o[4][1]>=1&&(E*=y.S4Extra1()),S.preonCap=g(E).multiply(m[3][1]).toArray(),g(m[1][1]).moreThan(S.preonCap)&&(m[1][1]=S.preonCap)}},pe=(e,s=t.stage.active,r=!1)=>{if(!pt(e,s))return;let o=t.buildings[s][e],i,u,a=!1,c="";s===1?(i=t.buildings[1][e-1],e===1&&(a=t.inflation.vacuum&&t.strangeness[1][10]>=1)):s===2?e===1&&t.inflation.vacuum?(c="Moles",i=t.buildings[1][5],u=g(i.current).divide("6.02214076e23").toArray()):i=t.buildings[2][e===1?0:1]:s===3?t.inflation.vacuum?(c="Mass",i=t.buildings[1][0],u=g(i.current).multiply("1.78266192e-33").toArray()):i=t.buildings[3][0]:(i=t.buildings[4][0],s===5&&e===3&&(c="Galaxy",u=t.collapse.mass)),u===void 0&&(u=i.current);let d=u;r&&o.true>0&&!a&&c!=="Galaxy"&&(c==="Mass"&&t.strangeness[3][4]>=2&&g(l.inflationInfo.dustTrue).moreOrEqual(l.inflationInfo.dustCap)?d=g(l.inflationInfo.preonCap).multiply(l.inflationInfo.massCap,"-1.78266192e-33").plus(u).toArray():d=g(u).divide(t.strangeness[1][7]>=1?t.toggles.shop.wait[s]:"2").toArray());let p=Ue(e,s);if(g(p).moreThan(d))return;let m=r?-1:t.stage.resets<1&&t.discharge.current<1?1:t.toggles.shop.howMany,b=1;if(m!==1){let x=l.buildingsInfo.increase[s][e];if(a){if(b=Math.floor(g(d).divide(p).log(x).toNumber())+1,m!==-1){if(b<m)return;b=m}}else{if(b=Math.floor(g(d).multiply(x-1).divide(p).plus("1").log(x).toNumber()),m!==-1){if(b<m)return;b=m}b>1&&(p=g(x).power(b).minus("1").divide(x-1).multiply(p).toArray())}}o.true+=b,o.current=g(o.current).plus(b).toArray(),o.total=g(o.total).plus(b).toArray(),o.trueTotal=g(o.trueTotal).plus(b).toArray(),g(o.highest).lessThan(o.current)&&(o.highest=C(o.current)),c==="Galaxy"?(ye("galaxy",t.inflation.vacuum?[1,2,3,4,5]:[4,5]),A(0,4,"researches"),A(1,4,"researches"),A(2,4,"researches"),A(3,4,"researches"),!r&&l.screenReader&&(n("SRMain").textContent=`Reseted progress for ${f(b)} 'Galaxies'`),Q(1,5)):(a||(u=g(u).minus(p).toArray(),c==="Moles"?(i.current=g(u).multiply("6.02214076e23").toArray(),t.buildings[2][0].current=g(i.current).divide("6.02214076e23").toArray()):c==="Mass"?(i.current=g(u).divide("1.78266192e-33").toArray(),t.buildings[3][0].current=g(i.current).multiply("1.78266192e-33").toArray()):i.current=u),(t.inflation.vacuum||s===1)&&(re(l.dischargeInfo.getEnergy(e,s)*b),Q(1,1)),s===1?e===5&&t.upgrades[1][8]===0&&t.inflation.vacuum&&(t.buildings[2][0].current=g(o.current).divide("6.02214076e23").toArray()):s===2?e!==1&&$e():s===3?e>=4&&Q(1,3):s===4&&(l.collapseInfo.trueStars+=b,Q(0,5)),X(),r||(W(),l.screenReader&&(n("SRMain").textContent=`Made ${f(b)} '${l.buildingsInfo.name[s][e]}'`)))},re=(e=null)=>{let s=t.discharge;if(e===null){let{getEnergy:r,energyType:o}=l.dischargeInfo;e=0;for(let i=1;i<(t.inflation.vacuum?o.length:2);i++){let u=t.buildings[i];for(let a=1;a<o[i].length;a++)e+=r(a,i)*u[a].true}l.dischargeInfo.energyTrue=e,t.strangeness[1][11]>=1&&(s.energy=e)}else l.dischargeInfo.energyTrue+=e,s.energy+=e,s.energyMax<s.energy&&(s.energyMax=s.energy)},Ue=(e,s)=>{let r=l.buildingsInfo;if(s===1){let o=140;if(t.upgrades[1][6]===1&&(o-=y.S1Upgrade6()),r.increase[1][e]=o/100,e===1){let i=r.startCost[1][1];!t.inflation.vacuum&&t.upgrades[1][2]===1&&(i/=10),r.firstCost[1][1]=i}else if(e===3){let i=r.startCost[1][3];t.upgrades[1][1]===1&&(i/=10),r.firstCost[1][3]=i}else if(e===4){let i=r.startCost[1][4];t.inflation.vacuum&&(t.upgrades[1][2]===1&&(i/=10),t.researchesExtra[1][0]>=1&&(i/=10)),r.firstCost[1][4]=i}}else if(s===3)r.firstCost[3][e]=r.startCost[3][e],l.strangeInfo.stageBoost[3]!==null&&(r.firstCost[3][e]/=l.strangeInfo.stageBoost[3]),e===4&&(r.increase[3][4]=t.upgrades[3][11]===1?5:10);else if(s===4){let o=125+15*e;t.elements[2]===1&&(o-=10),t.elements[8]===1&&(o-=5),r.increase[4][e]=o/100;let i=r.startCost[4][e]/2**t.strangeness[4][1];t.inflation.vacuum&&(i/=l.milestonesInfo[5].reward[0]),t.elements[13]===1&&(i/=1e3),r.firstCost[4][e]=i}return g(r.increase[s][e]).power(t.buildings[s][e].true).multiply(r.firstCost[s][e]).toArray()},$e=(e=!1)=>{let s=t.buildings[2],r=t.upgrades[2],o=s[5].true,i=s[4].true,u=s[3].true,a=s[2].true;r[8]===1&&(o+=s[6].true),r[7]===1&&(i+=o),r[6]===1&&(u+=i*y.S2Upgrade6()),r[5]===1&&(a+=u*y.S2Upgrade5()),s[5].current=g(o).toArray(),s[4].current=g(i).toArray(),s[3].current=g(u).toArray(),s[2].current=g(a).toArray(),e||Q(1,2)},de=(e,s,r)=>{let o,i=s;if(s===1&&e===5?(o=g(l.dischargeInfo.tritium).multiply(r).toArray(),t.inflation.vacuum||(e=3)):s===5?(o=g(l.buildingsInfo.producing[5][1]).multiply(r).divide(4**e).toArray(),i=4,e++):(o=g(l.buildingsInfo.producing[s][e+1]).multiply(r).toArray(),s===4?e=0:s===2&&e===1&&t.buildings[2][2].current[0]<=0&&t.researchesExtra[2][1]>=1&&(o=g(o).plus(r*(y.S2Extra1_2()[0]-1)).toArray())),o[0]===0)return;if(!g(o).isFinite()){l.debug.errorGain&&(l.debug.errorGain=!1,L(`Error while gaining ${g(o).toString()} '${l.buildingsInfo.name[i][e]}'`),setTimeout(()=>{l.debug.errorGain=!0},6e4));return}let u=t.buildings[i][e];u.current=g(u.current).plus(o).toArray(),u.total=g(u.total).plus(o).toArray(),u.trueTotal=g(u.trueTotal).plus(o).toArray(),g(u.highest).lessThan(u.current)&&(u.highest=C(u.current)),s===1?t.inflation.vacuum?e===0?(t.buildings[3][0].current=g(u.current).multiply("1.78266192e-33").toArray(),Q(0,3)):e===1?Q(0,1):e===5&&(t.buildings[2][0].current=g(u.current).divide("6.02214076e23").toArray()):e===0&&Q(0,1):s===3&&e===0&&(t.accretion.rank<5&&g(u.current).moreThan("1e30")&&(u.current=[1,30]),Q(0,3))},Z=()=>{let e=t.strangeness,s=l.strangeInfo.stageBoost,r=t.strange[0].current+1;s[1]=e[1][8]<1?null:r**.08-1,s[2]=e[2][7]<1?null:r**.28,s[3]=e[3][7]<1?null:r**(t.inflation.vacuum?.44:.66),s[4]=e[4][8]<1?null:r**.32,s[5]=e[5][9]<1?null:r**.06},St=(e,s)=>{let r=t.strange[e],o=Math.floor(t.strange[e+1].current*1e12);if(r.current>=o)return;let i=o*s/600;if(r.current+=i,r.total+=i,r.current>o){let u=r.current;r.current=o,r.total=Math.round(r.total-(u-r.current))}e===0&&Z()},_=(e,s,r,o=!1)=>{if(!o&&!ge(e,s,r))return!1;let i=!1,u;if(s===1?(u=t.discharge.energy,i=t.inflation.vacuum&&t.strangeness[1][11]>=1):s===2?u=t.buildings[2][1].current:s===3?u=t.inflation.vacuum?g(t.buildings[1][0].current).multiply("1.78266192e-33").toArray():t.buildings[3][0].current:u=t.buildings[4][0].current,r==="upgrades"){if(t.upgrades[s][e]>=1)return!1;let a=l.upgradesInfo[s];if(g(u).lessThan(a.startCost[e]))return!1;t.upgrades[s][e]++,i||(u=g(u).minus(a.startCost[e]).toArray()),s===2?e>=5&&$e():s===4&&e===1&&l.tab==="upgrade"&&q("upgrade"),!o&&l.screenReader&&(n("SRMain").textContent=`New upgrade '${a.name[e]}', has been created`)}else if(r==="researches"||r==="researchesExtra"){let a=l[`${r}Info`][s],c=t[r][s];if(c[e]>=a.max[e])return!1;let d=a.cost[e];if(g(u).lessThan(d))return!1;let p=1;if((o||t.toggles.max[0]&&t.strangeness[1][7]>=2)&&a.max[e]>1){let m=a.scaling[e];if(s===1)if(i)p=Math.min(Math.floor((u-d)/m+1),a.max[e]-c[e]);else{let b=d-m/2;p=Math.min(Math.floor(((b**2+2*m*u)**.5-b)/m),a.max[e]-c[e]),p>1&&(d=p*(p*m/2+b))}else p=Math.min(Math.floor(g(u).multiply(m-1).divide(d).plus("1").log(m).toNumber()),a.max[e]-c[e]),p>1&&(d=g(m).power(p).minus("1").divide(m-1).multiply(d).toNumber())}c[e]+=p,i||(u=g(u).minus(d).toArray()),r==="researches"?s===2?e>=4&&$e():s===4&&e===2&&A(0,4,"researches",!0):r==="researchesExtra"&&(s===1?e===2&&(t.stage.current<4&&(t.stage.current=t.researchesExtra[1][2]>1?2:3),G("soft"),Ce(1)):s===4&&e===2&&A(3,4,"researches",!0)),!o&&l.screenReader&&(n("SRMain").textContent=`Research '${a.name[e]}' level increased, it is now ${c[e]} ${c[e]>=a.max[e]?"maxed":""}`)}else if(r==="researchesAuto"||r==="ASR"){let a=l[`${r}Info`],c=t[r];if(c[e]>=a.max[e])return!1;let d=a.costRange[e][c[e]];if(g(u).lessThan(d))return!1;c[e]++,i||(u=g(u).minus(d).toArray()),!o&&l.screenReader&&(n("SRMain").textContent=`Research '${r==="ASR"?a.name:a.name[e]}' level increased, it is now ${c[e]} ${c[e]>=a.max[e]?"maxed":""}`)}else if(r==="elements"){let a=t.elements[e];if(a>=1)return!1;if(a===0){let c=l.elementsInfo.startCost[e];if(g(u).lessThan(c))return!1;u=g(u).minus(c).toArray()}else if(!o)return!1;t.collapse.show<e&&(t.collapse.show=e),a=t.strangeness[4][4]>=1||a===.5?1:.5,t.elements[e]=a,a===1&&(e===7||e===16||e===20||e===25?A(1,4,"researches",!0):e===9||e===17?A(0,4,"researches",!0):e===11?A(2,4,"researches",!0):e===26&&(t.stage.current<5&&(t.stage.current=5,t.stage.true<5&&(t.stage.true=5,t.event=!1)),G("soft"))),!o&&l.screenReader&&(n("SRMain").textContent=`New Element '${l.elementsInfo.name[e]}' ${t.elements[e]>=1?"obtained":"awaiting activation"}`)}if(s===1)i||(t.discharge.energy=g(u).toNumber());else if(s===2){if(t.buildings[2][1].current=u,t.buildings[2][2].current[0]<=0&&g(t.buildings[2][1].current).lessThan(t.buildings[2][1].true)){let a=t.buildings[2][1].true;if(t.buildings[2][1].true=Math.floor(g(t.buildings[2][1].current).toNumber()),t.inflation.vacuum){let c=(a-t.buildings[2][1].true)*l.dischargeInfo.getEnergy(1,2);l.dischargeInfo.energyTrue-=c,t.discharge.energy-=c}else t.buildings[2][1].current[0]<=0&&g(t.buildings[2][0].current).lessThan("2.8e-3")&&(t.buildings[2][0].current=[2.8,-3])}}else s===3?t.inflation.vacuum?(t.buildings[1][0].current=g(u).divide("1.78266192e-33").toArray(),t.buildings[3][0].current=g(t.buildings[1][0].current).multiply("1.78266192e-33").toArray()):t.buildings[3][0].current=u:t.buildings[4][0].current=u;return X(),r==="upgrades"||r==="elements"?Y(e,s,r):(r!=="researchesAuto"&&r!=="ASR"&&he(e,s,r),V(e,s,r)),o||W(),!0},ot=(e,s,r,o=!1)=>{if(!o&&!ge(e,s,r))return!1;if(r==="strangeness"){let i=l.strangenessInfo[s];if(t.strangeness[s][e]>=i.max[e]||t.strange[0].current<l.strangenessInfo[s].cost[e])return!1;if(t.strangeness[s][e]++,t.strange[0].current-=i.cost[e],s===1)e===4?re():e===6?(t.ASR[1]=Math.max(t.strangeness[1][6],t.ASR[1]),A(0,1,"ASR",!0)):e===7?(t.researchesAuto[1]=1,A(1,0,"researchesAuto",!0)):e===11&&(re(),A(4,2,"strangeness",!0),A(4,3,"strangeness",!0),A(5,4,"strangeness",!0));else if(s===2)e===2?(A(4,2,"researches",!0),A(5,2,"researches",!0)):e===5?(t.ASR[2]=Math.max(t.strangeness[2][5],t.ASR[2]),A(0,2,"ASR",!0)):e===8?(A(0,2,"ASR",!0),A(5,2,"strangeness",!0)):e===10&&(A(2,2,"researches",!0),A(3,2,"researches",!0));else if(s===3)e===2?(A(0,3,"researchesExtra",!0),A(1,3,"researchesExtra",!0)):e===5?(t.ASR[3]=Math.max(t.strangeness[3][5],t.ASR[3]),A(0,3,"ASR",!0)):e===6?(t.researchesAuto[0]=Math.max(t.strangeness[3][6],t.researchesAuto[0]),A(0,0,"researchesAuto",!0)):e===8&&(A(0,3,"ASR",!0),A(5,3,"strangeness",!0));else if(s===4)if(e===4)for(let u=1;u<t.elements.length;u++)t.elements[u]===.5&&_(u,4,"elements",!0);else e===6?(t.ASR[4]=Math.max(t.strangeness[4][6],t.ASR[4]),A(0,4,"ASR",!0)):e===9?(A(0,4,"ASR",!0),A(6,4,"strangeness",!0)):e===10&&t.elements[0]!==1&&(t.elements[0]=1,Y(0,4,"elements"));else if(s===5){if(e===0)t.inflation.vacuum||G("soft");else if(e===5)t.inflation.vacuum&&G("soft");else if(e===6||e===7)t.ASR[5]=t.strangeness[5][7],t.strangeness[5][6]>=2&&t.ASR[5]++,A(0,5,"ASR",!0);else if(e===8)t.inflation.vacuum&&l.tab==="strangeness"&&q("strangeness");else if(e===10){let u=t.strange,a=t.strangeness[5][10];u[a-1].total-=u[a-1].current,u[a].current=u[a-1].current/1e12,u[a].total=u[a].current,u[a-1].current=0}}Z(),!o&&l.screenReader&&(n("SRMain").textContent=`Strangeness of '${i.name[e]}' for ${l.stageInfo.word[s]} Stage is increased, level is now ${t.strangeness[s][e]}${t.strangeness[s][e]>=i.max[e]?"maxed":""}`)}return X(),he(e,s,r),V(e,s,r),o||W(),!0},he=(e,s,r)=>{if(r==="researches"||r==="researchesExtra"){let o=l[`${r}Info`][s];o.cost[e]=s===1?o.startCost[e]+o.scaling[e]*t[r][s][e]:o.startCost[e]*o.scaling[e]**t[r][s][e]}else r==="strangeness"&&(l.strangenessInfo[s].cost[e]=t.inflation.vacuum?Math.floor(Math.round(l.strangenessInfo[s].startCost[e]*l.strangenessInfo[s].scaling[e]**t.strangeness[s][e]*100)/100):Math.floor(Math.round((l.strangenessInfo[s].startCost[e]+l.strangenessInfo[s].scaling[e]*t.strangeness[s][e])*100)/100))},A=(e,s,r,o=!1)=>{let i=null;r==="ASR"?s===1?i=t.inflation.vacuum?5:3:s===2?i=t.strangeness[2][8]>=1?6:5:s===3?i=t.strangeness[3][8]>=1?5:4:s===4?i=t.strangeness[4][9]>=1?5:4:s===5&&(i=t.strangeness[5][7],t.strangeness[5][6]>=2&&i++):r==="researches"?s===2?e===2?(i=4,t.strangeness[2][10]>=1&&i++):e===3?(i=4,t.strangeness[2][10]>=2&&i++):e===4?(i=2,t.strangeness[2][2]>=1&&i++):e===5&&(i=1,t.strangeness[2][2]>=2&&i++):s===4&&(e===0?(i=3+3*t.researches[4][2],t.elements[9]===1&&(i+=12),t.elements[17]===1&&(i+=24)):e===1?(i=2,t.elements[7]===1&&(i+=2),t.elements[16]===1&&i++,t.elements[20]===1&&i++,t.elements[25]===1&&i++):e===2?(i=1,t.elements[11]===1&&i++):e===3&&(i=1+t.researchesExtra[4][2])):r==="researchesExtra"?s===3&&(e===0?(i=12,t.accretion.rank>=3&&(i+=17),t.strangeness[3][2]>=1&&(i+=7)):e===1?(i=5,t.strangeness[3][2]>=2&&(i+=2)):e===4&&(i=t.accretion.rank-2)):r==="strangeness"&&(s===1?e===0?i=4+Math.min(t.challenges.void[3],4):e===2?i=2+Math.min(Math.floor(t.challenges.void[3]/2),2):e===4?i=t.inflation.vacuum?2:1:e===6?i=t.inflation.vacuum?5:3:e===9&&(i=6+Math.min(t.challenges.void[3],4)):s===2?e===0?i=(t.inflation.vacuum?6:9)+Math.min(t.challenges.void[3],4):e===1?i=6+Math.min(t.challenges.void[3],4):e===3?i=3+Math.min(Math.floor(t.challenges.void[3]/2),2):e===4?i=t.strangeness[1][11]>=1?2:1:e===5&&(i=t.strangeness[2][8]>=1?6:5):s===3?e===0?i=8+Math.min(t.challenges.void[3],4):e===1?i=4+Math.min(Math.floor(t.challenges.void[3]/2),2):e===4?i=t.strangeness[1][11]>=1?2:1:e===5?i=t.strangeness[3][8]>=1?5:4:e===10&&(i=2+Math.min(Math.floor(t.challenges.void[3]/2),2)):s===4?e===0?i=8+Math.min(t.challenges.void[3],4):e===1?i=4+Math.min(Math.floor(t.challenges.void[3]/2),2):e===4?i=t.stage.true>=6||t.strange[0].total>0&&t.event?2:1:e===5?i=t.strangeness[1][11]>=1?2:1:e===6?i=t.strangeness[4][9]>=1?5:4:e===7&&(i=3+Math.min(t.challenges.void[3],4)):s===5&&(e===0?i=t.inflation.vacuum?1:3:e===1&&(i=1+Math.min(Math.floor(t.challenges.void[3]/2),2)))),i!==null&&(i<0&&(i=0),r==="ASR"?l.ASRInfo.max[s]=i:r!=="researchesAuto"&&(l[`${r}Info`][s].max[e]=i)),r!=="researchesAuto"&&r!=="ASR"&&he(e,s,r),V(e,s,r),o&&(r==="researches"||r==="researchesExtra")&&K(r,[s,e])},ae=e=>{if(!t.toggles.auto[5])return;let s=l.automatization.autoU,r=t.upgrades,o=l.upgradesInfo;if(e==="all")for(let i=1;i<=5;i++){s[i]=[];for(let a=0;a<o[i].maxActive;a++)r[i][a]<1&&s[i].push(a);let u=o[i].startCost;s[i].sort((a,c)=>u[a]-u[c])}else if(typeof e=="number"){s[e]=[];for(let u=0;u<o[e].maxActive;u++)r[e][u]<1&&s[e].push(u);let i=o[e].startCost;s[e].sort((u,a)=>i[u]-i[a])}},xt=e=>{if(!t.toggles.auto[5]||t.researchesAuto[0]<1)return;let s=l.automatization.autoU[e];for(let r=0;r<s.length;r++){let o=s[r];if(ge(o,e,"upgrades"))if(_(o,e,"upgrades",!0),t.upgrades[e][o]>=1)s.splice(r,1),r--;else break}},K=(e,s)=>{if(!t.toggles.auto[e==="researches"?6:7])return;let r=l.automatization[e==="researches"?"autoR":"autoE"],o=t[e],i=l[`${e}Info`];if(s==="all")for(let u=1;u<=5;u++){r[u]=[];let{max:a,cost:c}=i[u];for(let d=0;d<i[u].maxActive;d++)o[u][d]<a[d]&&r[u].push(d);r[u].sort((d,p)=>c[d]-c[p])}else if(typeof s=="number"){r[s]=[];let{max:u,cost:a}=i[s];for(let c=0;c<i[s].maxActive;c++)o[s][c]<u[c]&&r[s].push(c);r[s].sort((c,d)=>a[c]-a[d])}else{let[u,a]=s;r[u].some(c=>c===a)||r[u].unshift(a)}},et=(e,s)=>{if(e==="researches"){if(!t.toggles.auto[6]||t.researchesAuto[0]<2)return}else if(!t.toggles.auto[7]||t.researchesAuto[0]<3)return;let r=l.automatization[e==="researches"?"autoR":"autoE"][s],o=l[`${e}Info`][s],i=!1;for(let u=0;u<r.length;u++){if(!ge(r[u],s,e))continue;let a=_(r[u],s,e,!0);if(t[e][s][r[u]]>=o.max[r[u]])r.splice(u,1),u--;else if(!a){if(o.cost[r[u]]>o.cost[r[u+1]]){i=!0;continue}break}}i&&r.sort((u,a)=>o.cost[u]-o.cost[a])},oe=()=>{if(!t.toggles.auto[8])return;let e=l.automatization.elements,s=l.elementsInfo.startCost,r=t.elements;for(let o=1;o<(t.inflation.vacuum?s.length:29);o++)r[o]===0&&e.push(o);e.sort((o,i)=>s[o]-s[i])},wt=()=>{if(!t.toggles.auto[8]||t.strangeness[4][4]<2)return;let e=l.automatization.elements,s=t.elements;for(let r=0;r<e.length;r++){let o=e[r];if(!ge(o,4,"elements"))break;if(_(o,4,"elements",!0),s[o]===1)e.splice(r,1),r--;else break}},D=(e,s,r=!1)=>{let o=s==="buildings"?t.toggles.buildings[t.stage.active]:t.toggles[s];if(r)if(s==="buildings")if(e===0){if(t.researchesAuto[1]<1)return;o[0]=!o[0];for(let a=1;a<o.length;a++)o[a]=o[0],D(a,"buildings")}else{let a=t.buildings[t.stage.active];if(e>=a.length)return;let c=!1;o[e]=!o[e];for(let d=1;d<l.buildingsInfo.maxActive[t.stage.active];d++)if(o[d]&&a[d].highest[0]>0){c=!0;break}o[0]!==c&&(o[0]=c,D(0,"buildings"))}else o[e]=!o[e];let i,u;s==="normal"?(u=n(`toggleNormal${e}`),i=""):s==="buildings"?(u=n(`toggleBuilding${e}`),i=e===0?"All ":"Auto "):s==="hover"?(u=n(`toggleHover${e}`),i="Hover to create "):s==="max"?(u=n(`toggleMax${e}`),i="Max create "):(u=n(`toggleAuto${e}`),i="Auto "),o[e]?(u.style.color="",u.style.borderColor="",u.textContent=`${i}ON`):(u.style.color="var(--red-text)",u.style.borderColor="crimson",u.textContent=`${i}OFF`)},Ge=(e,s=!1)=>{let r=t.toggles.confirm;s&&(r[e]=r[e]==="All"?"Safe":r[e]==="Safe"?"None":"All");let o=n(`toggleConfirm${e}`);o.textContent=r[e],r[e]==="All"||r[e]==="Safe"?(o.style.color="",o.style.borderColor=""):(o.style.color="var(--red-text)",o.style.borderColor="crimson")},ue=(e="none")=>{let s=n("buyAnyInput"),r=t.toggles.shop;switch(e){case"1":r.howMany=1;break;case"max":r.howMany=-1;break;case"any":r.input=Math.max(Math.trunc(Number(s.value)),-1),r.input===0&&(r.input=1),r.howMany=r.input}n("buy1x").style.backgroundColor=r.howMany===1?"green":"",n("buyAny").style.backgroundColor=Math.abs(r.howMany)!==1?"green":"",n("buyMax").style.backgroundColor=r.howMany===-1?"green":"",(e==="none"||e==="any")&&(s.value=f(r.input,{type:"input"})),e!=="none"&&W()},ne=(e,s=!1)=>{let r=!1;if(e>=5)r=t.stage.current>=5;else{if(e===4)return!1;e===3?r=g(t.buildings[3][0].current).moreOrEqual("2.45576045e31"):e===2?r=g(t.buildings[2][1].current).moreOrEqual("1.19444e29"):e===1&&(r=g(t.buildings[1][3].current).moreOrEqual("1.67133125e21"))}if(s&&r){if(t.strangeness[5][2]<1||e>=4&&l.strangeInfo.gain(e)/1e12**t.strangeness[5][10]<t.stage.input)return!1;it(e)}return r},Ve=async()=>{let e=t.stage,s=t.inflation.vacuum?6:e.active>=4&&e.current>=5&&(e.true>=6||t.strange[0].total>0||t.event)?5:e.active;if(ne(s)){if(t.toggles.confirm[0]!=="None"){let r=s>=4&&t.strangeness[4][4]>=1&&t.elements[27]<1,o=t.challenges.active!==-1;if(t.toggles.confirm[0]!=="Safe"||o||r){let i;if(s===6?(i=`Ready to reset progress for ${f(l.strangeInfo.gain(s)/1e12**t.strangeness[5][10])} ${l.strangeInfo.name[t.strangeness[5][10]]}?`,r&&(i+=`
(Not all important Elements obtained)`),o&&(i+=`
(${l.challengesInfo.name[t.challenges.active]} is active)`)):s===5?(i=`Return back to Microworld for ${f(l.strangeInfo.gain(s))} Strange quarks?`,r&&(i+=`
(Not all important Elements obtained)`)):s!==e.current?i=`Reset this Stage for ${f(l.strangeInfo.gain(s))} Strange quarks?`:i="Ready to enter next Stage? Next one will be harder than current",!await O(i))return;if(!ne(s))return L("Stage reset canceled, requirements are no longer met")}}it(s)}else{if(t.toggles.confirm[0]==="None"||e.resets<1&&(t.inflation.vacuum?e.current<5:t.upgrades[1][9]!==1))return;if(s>=5)return void R('Awaiting "Iron" Element');if(s===4)return void R("Enter Intergalactic space first");if(s===3)return void R(`Self sustaining is not yet possible, obtain at least ${f(245576045e23)} Mass`);if(s===2)return void R(`Look's like more Mass expected, need even more Drops, around ${f(119444e24)} in total`);if(s===1)return void R(`Not enough to form a single Drop of water, need at least ${f(167133125e13)} Molecules`)}},it=e=>{let{stage:s}=t,r=t.time.stage;s.resets++;let o="normal",i=t.inflation.vacuum?[1,2,3,4,5]:[e];if(t.inflation.vacuum?(t.time.stage=0,s.time=0,le(1),s.current=1):e===s.current?(t.time.stage=0,s.time=0,e<5?(s.current++,s.active===s.current-1?le(s.current):o="soft",s.current>s.true&&(s.true=s.current,t.event=!1)):(s.current=1+t.strangeness[5][0],s.true<6&&t.strange[0].total<=0&&(t.event=!1),s.active===4&&s.current!==4||s.active===5?le(s.current):o="soft",i.unshift(4))):o=e===s.active?"soft":!1,s.true>=5){let u=l.strangeInfo.gain(e);u>s.best&&(s.best=u);let a=t.strangeness[5][10],c=u/1e12**a;if(t.strange[a].current+=c,t.strange[a].total+=c,Z(),e>=4){let d=l.historyStorage.stage,p=t.history.stage;d.unshift([u,r,a]),d.length>p.input[1]&&(d.length=p.input[1]),u/r>p.best[0]/p.best[1]&&(p.best=[u,r,a])}}rt(i,o)},ie=e=>{if(l.stageInfo.activeAll.includes(e)){if(t.stage.active===e){l.trueActive!==e&&(l.trueActive=e,n(`${l.stageInfo.word[e]}Switch`).style.textDecoration="underline");return}e!==4&&e!==5&&(l.tab==="upgrade"&&l.subtab.upgradeCurrent==="Elements"||l.tab==="Elements")&&q("upgrade",l.tab==="upgrade"?"Upgrades":null),le(e),G()}},le=(e,s=e)=>{n(`${l.stageInfo.word[t.stage.active]}Switch`).style.textDecoration="",t.stage.active=e,l.trueActive=s,n(`${l.stageInfo.word[e]}Switch`).style.textDecoration="underline"+(l.trueActive!==e?" dashed":"")},tt=()=>{l.dischargeInfo.next=Math.round((10-2*t.researches[1][3]-t.strangeness[1][1]/2)**t.discharge.current)},Be=(e=!1)=>{if(t.upgrades[1][5]<1||t.buildings[1][1].true<=0)return!1;tt();let s=l.dischargeInfo,r=t.discharge.energy;return e?t.strangeness[1][3]<1?!1:r>=s.next?(nt(),!0):t.strangeness[1][11]>=1||r>=s.energyTrue?!1:(nt(),!0):r<s.energyTrue||r>=s.next},We=async()=>{if(!Be())return;let e=l.dischargeInfo,s=t.discharge.energy;if(t.toggles.confirm[1]!=="None"&&(t.toggles.confirm[1]!=="Safe"||t.stage.active!==1)){if(!await O(`Reset Structures and Energy to ${s>=e.next?"gain boost from a new goal":`regain ${f(e.energyTrue-s)} spent Energy`}?`))return;if(!Be())return L("Discharge canceled, requirements are no longer met")}l.screenReader&&(n("SRMain").textContent=`Structures and Energy were reset${s>=e.next?", also gained boost from reaching new goal":""}`),nt()},nt=()=>{t.discharge.energy>=l.dischargeInfo.next&&t.discharge.current++,Ce(1),ye("discharge",t.inflation.vacuum?[1,2,3,4,5]:[1])},we=()=>{let e=g(t.buildings[2][1][t.researchesExtra[2][0]>=1?"total":"current"]).divide(y.S2Upgrade2()).toArray();g(e).moreOrEqual("1")?(e=t.inflation.vacuum?g(t.vaporization.clouds).power(2.5).plus(e).power(.4).minus(t.vaporization.clouds).multiply(l.milestonesInfo[2].reward[0]).toArray():g(t.vaporization.clouds).power(1/.6).plus(e).power(.6).minus(t.vaporization.clouds).toArray(),l.vaporizationInfo.get=e):l.vaporizationInfo.get=[0,0]},He=(e=!1,s=0)=>{we();let r=l.vaporizationInfo;if(t.upgrades[2][2]<1||r.get[0]<=0)return!1;if(e){if(t.strangeness[2][4]<1)return!1;let o=y.S2Extra1_2(!0),i=y.S2Extra1_2();if(g(y.clouds(!0)).divide(r.strength,i[0],i[1]).multiply(o[0],o[1]).moreOrEqual(t.vaporization.input))return at(),!0;if(s<=0)return!1}return s>0?t.strangeness[2][4]<2?!1:(at(s),!e):!0},Qe=async()=>{if(!He())return;let e=l.vaporizationInfo,s=t.vaporization.clouds[0]>0?g(e.get).divide(t.vaporization.clouds).multiply("1e2").toArray():"1e2";if(t.toggles.confirm[2]!=="None"){let r=y.S2Extra1_2(!0),o=y.S2Extra1_2();if(t.toggles.confirm[2]!=="Safe"||t.stage.active!==2||g(y.clouds(!0)).divide(e.strength,o[0],o[1]).multiply(r[0],r[1]).lessThan("2")){if(!await O(`Reset Structures and Upgrades for ${g(e.get).format()} (+${g(s).format()}%) Clouds?`))return;if(!He())return L("Vaporization canceled, requirements are no longer met")}}l.screenReader&&(n("SRMain").textContent=`Progress were reset for ${g(e.get).format()} (+${g(s).format()}%) Clouds`),at()},at=(e=0)=>{let s=t.vaporization;s.clouds=g(l.vaporizationInfo.get).multiply(e>0?e/5:"1").plus(s.clouds).toArray(),g(s.cloudsMax).lessThan(s.clouds)&&(s.cloudsMax=C(s.clouds)),Q(0,2),Ce(2),e<=0&&ye("vaporization",t.inflation.vacuum?[1,2,3,4,5]:[2])},De=(e=!1)=>{let s=l.accretionInfo.rankCost[t.accretion.rank];if(s===0)return!1;if(t.inflation.vacuum){if(g(t.buildings[1][0].current).multiply("1.78266192e-33").lessThan(s))return!1}else if(g(t.buildings[3][0].current).lessThan(s))return!1;if(e){if(t.strangeness[3][4]<1)return!1;At()}return!0},_e=async()=>{if(De()){if(t.toggles.confirm[3]!=="None"&&t.accretion.rank!==0&&(t.toggles.confirm[3]!=="Safe"||t.stage.active!==3)){if(!await O("Reset Structures, Upgrades and Stage Researches to increase current Rank?"))return;if(!De())return L("Rank increase canceled, requirements are no longer met")}At(),l.screenReader&&(n("SRMain").textContent=`Rank is now '${l.accretionInfo.rankName[t.accretion.rank]}'`)}},At=()=>{t.accretion.rank++,t.accretion.rank===6&&(t.stage.current=4,G("soft")),Ce(3),ye("rank",t.inflation.vacuum?[1,2,3,4,5]:[3]),t.accretion.rank===3&&A(0,3,"researchesExtra",!0),A(4,3,"researchesExtra",!0)},Et=()=>{let e=t.elements,s=.004;return e[3]===1&&(s+=.002),e[5]===1&&(s+=2e-4*t.buildings[4][1].true),s*=e[15]===1?l.collapseInfo.trueStars:t.buildings[4][1].true,t.inflation.vacuum?s=s*80+1:(e[10]===1&&(s*=2),t.researchesExtra[4][1]>=1&&(s*=y.S4Extra1()),s*=l.collapseInfo.starEffect[2]),l.strangeInfo.stageBoost[5]!==null&&(t.inflation.vacuum||l.stageInfo.activeAll.includes(5))&&(s*=l.strangeInfo.stageBoost[5]),s},Ne=()=>{let e=t.buildings[4],s=l.collapseInfo.starCheck,r=t.collapse.stars;l.collapseInfo.newMass=t.inflation.vacuum?g(l.buildingsInfo.producing[1][1]).multiply(l.inflationInfo.massCap).min(t.buildings[1][0].current).multiply("8.96499278339628e-67").toNumber():Et(),s[0]=e[2].true>0?Math.max(e[2].true+Math.floor(e[1].true*t.strangeness[4][3]/10)-r[0],0):0,s[1]=Math.max(e[3].true-r[1],0),s[2]=Math.max(e[4].true-r[2],0)},ze=(e=!1,s=!1)=>{if(t.upgrades[4][0]<1)return!1;Ne();let r=l.collapseInfo;if(e){if(t.strangeness[4][5]<1)return!1;let o=y.mass(!0)/r.massEffect*(y.S4Research4(!0)/y.S4Research4());if(t.strangeness[4][5]<2)return o*(y.star[0](!0)/r.starEffect[0])*(y.star[1](!0)/r.starEffect[1])*(y.star[2](!0)/r.starEffect[2])<t.collapse.input?!1:(Fe(),!0);if(o>=t.collapse.input)return Fe(),!0;if(!s)return!1}return s?t.strangeness[4][5]<2||r.starCheck[0]<=0&&r.starCheck[1]<=0&&r.starCheck[2]<=0?!1:(Fe(!1),!e):r.newMass>t.collapse.mass||r.starCheck[0]>0||r.starCheck[1]>0||r.starCheck[2]>0||t.elements.includes(.5)},Ke=async()=>{if(!ze())return;let{newMass:e,starCheck:s}=l.collapseInfo,r=t.collapse.mass;if(t.toggles.confirm[4]!=="None"){let o=r>=1e5&&t.strangeness[5][6]>=1,i=!o||g(Ue(3,5)).moreThan(e),u=t.inflation.vacuum&&e>r&&g(l.buildingsInfo.producing[1][1]).multiply(l.inflationInfo.massCap).moreThan(t.buildings[1][0].current);if(t.toggles.confirm[4]!=="Safe"||t.stage.active!==4||i&&(u&&t.buildings[5][3].true<1||o)){let a="This will reset all Researches, Upgrades and Structures";if(e>r?(a+=`
Solar mass will increase to ${f(e)}`,u&&(a+=`
(Hardcap is not reached)`),o&&(a+=`
(${i?"Not enough for":"Will be able to make"} a new Galaxy)`)):a+=`
Solar mass won't change`,(s[0]>0||s[1]>0||s[2]>0)&&(a+=`
Also will gain new Star remnants:`,s[0]>0&&(a+=`
'Red giants' - ${f(s[0])}`),s[1]>0&&(a+=`
'Neutron stars' - ${f(s[1])}`),s[2]>0&&(a+=`
'Black holes' - ${f(s[2])}`)),t.elements.includes(.5)){let c=0;for(let d=1;d<t.elements.length;d++)t.elements[d]===.5&&c++;a+=`
${f(c)} new Elements will activate`}if(!await O(a+`
Continue?`))return;if(!ze())return L("Collapse canceled, requirements are no longer met")}}if(l.screenReader){let o=`Solar mass ${e>r?`is now ${f(e)}`:"haven't changed"}`;(s[0]>0||s[1]>0||s[2]>0)&&(o+=", also gained",s[0]>0&&(o+=` ${f(s[0])} Red giants`),s[1]>0&&(o+=`, ${f(s[1])} Neutron stars`),s[2]>0&&(o+=`, ${f(s[2])} Black holes`)),n("SRMain").textContent=o}Fe()},Fe=(e=!0)=>{let s=l.collapseInfo,r=t.collapse;if(r.stars[0]+=s.starCheck[0],r.stars[1]+=s.starCheck[1],r.stars[2]+=s.starCheck[2],Q(1,4),e){let o=t.elements;if(o.includes(.5))for(let i=1;i<o.length;i++)o[i]===.5&&_(i,4,"elements",!0);s.newMass>r.mass&&(r.mass=s.newMass,r.massMax<r.mass&&(r.massMax=r.mass)),Q(0,4),ye("collapse",t.inflation.vacuum?[1,2,3,4,5]:t.strangeness[5][5]<1?[4,5]:[4]),A(0,4,"researches"),A(3,4,"researches")}Ce(4)},lt=()=>{let e=t.milestones,s=0;e[1][0]>=6&&s++,e[2][1]>=6&&s++,e[3][1]>=7&&s++,e[4][1]>=8&&s++,e[5][1]>=6&&s++,l.strangeInfo.instability=s},Me=(e,s)=>{let{need:r,reward:o}=l.milestonesInfo[s],i=t.milestones[s][e];if(t.inflation.vacuum)s===1?e===0?(r[0]=g("1e80").power(i).multiply("1e80").toArray(),o[0]=1.04**i):e===1&&(r[1]=g(4e4+4e4*i).toArray(),o[1]=2*i):s===2?e===0?(r[0]=g("1e1").power(i).multiply("1e1").toArray(),o[0]=1.02**i):e===1&&(r[1]=g(80+(80+8*i)*i).toArray(),o[1]=1.04**i):s===3?e===0?(r[0]=g("1e3").power(i).multiply("1e-15").toArray(),o[0]=1.03**i):e===1&&(r[1]=g(4+4*i).toArray(),o[1]=i/400):s===4?e===0?(r[0]=g("1e4").power(i).multiply("1e4").toArray(),o[0]=1.05**i):e===1&&(r[1]=g(40+40*i).toArray(),o[1]=1.03**i):s===5&&(e===0?(r[0]=g(160+160*i).toArray(),o[0]=1.14**i):e===1&&(r[1]=g(1+i).toArray(),o[1]=i/40));else{let u=l.milestonesInfo[s].scalingOld[e];r[e]=i<u.length?g(u[i]).toArray():[0,0]}},Q=(e,s,r=0)=>{if(!ht(e,s)){r>0&&(L(`Milestone '${l.milestonesInfo[s].name[e]}' ${r>1?`${f(r)} new tiers`:"new tier"} reached
Total is now: ${f(t.milestones[s][e])}`),t.inflation.vacuum?s===1&&e===1&&re():(t.strange[0].current+=r,t.strange[0].total+=r,lt(),Z()),l.lastMilestone[1]===s&&l.lastMilestone[0]===e&&Ee(e,s,"milestones"));return}t.milestones[s][e]++,Me(e,s),Q(e,s,r+1)},Ce=e=>{if(t.challenges.active!==0)return;let s=t.challenges.void[e],r=1;if(e===1?r+=t.researchesExtra[1][2]:e===2?g(t.vaporization.clouds).moreThan("1e4")&&r++:e===3?r=t.accretion.rank-1:e===4&&(t.collapse.stars[0]>1&&r++,t.collapse.stars[1]>1&&r++,t.collapse.stars[2]>1&&r++),!(s>=r)){t.challenges.void[e]=r;for(let o=s;o<r;o++)L(`New Void reward achieved
Reward: ${l.challengesInfo.rewardText[0][e][o]}`);e===3&&s<4&&(A(0,1,"strangeness",!0),A(2,1,"strangeness",!0),A(9,1,"strangeness",!0),A(0,2,"strangeness",!0),A(1,2,"strangeness",!0),A(3,2,"strangeness",!0),A(0,3,"strangeness",!0),A(1,3,"strangeness",!0),A(10,3,"strangeness",!0),A(0,4,"strangeness",!0),A(1,4,"strangeness",!0),A(7,4,"strangeness",!0),A(1,5,"strangeness",!0)),l.lastChallenge[0]===0&&(me(0),l.lastChallenge[1]===e&&Le(e))}},Mt=async e=>{if(t.challenges.active===e){if(!await O(`Leave the '${l.challengesInfo.name[e]}'?`))return;e=-1}else if(!t.inflation.vacuum||e===0&&t.strangeness[5][0]<1||!await O(`Enter the '${l.challengesInfo.name[e]}'?
Stage reset will be forced`))return;let s=ne(5);t.challenges.active=e,s?it(5):(le(1),t.time.stage=0,t.stage.time=0,t.stage.current=1,rt([1,2,3,4,5])),me(e),l.screenReader&&(n("SRStage").textContent=e===-1?"Challenge is no longer active":`'${l.challengesInfo.name[e]}' is now active`)};var I={resetHTML:["",'<span class="bigWord orangeText">Discharge</span>. Reset current Structures and Energy. Will also boost production by <span id="dischargeBase" class="orangeText"></span>, if to reset with enough Energy.','<span class="bigWord grayText">Vaporization</span>. Structures, Upgrades, will be reset. But in return gain <span class="grayText">Clouds</span>. It takes a lot to form more than one.','<img src="Used_art/Missing.png" alt="" loading="lazy" draggable="false" id="rankImage">Current <span class="bigWord darkorchidText">Rank</span> is: <span id="rankName"></span>. <span id="rankMessage"></span>','<span class="bigWord orchidText">Collapse</span> - everything will be lost, but at same time gained. Even remnants have their own unique strength and effects.',""],longestBuilding:7,buildingHTML:[[],["Preon.png","Quarks.png","Particle.png","Atom.png","Molecule.png"],["Drop.png","Puddle.png","Pond.png","Lake.png","Sea.png","Ocean.png"],["Cosmic%20dust.png","Planetesimal.png","Protoplanet.png","Natural%20satellite.png","Subsatellite.png"],["Brown%20dwarf.png","Orange%20dwarf.png","Red%20supergiant.png","Blue%20hypergiant.png","Quasi%20star.png"],["Nebula.png","Star%20cluster.png","Galaxy.png"]],longestUpgrade:13,upgradeHTML:[[],[["UpgradeQ1.png","Weak force"],["UpgradeQ2.png","Strong force"],["UpgradeQ3.png","Electron"],["UpgradeQ4.png","Proton"],["UpgradeQ5.png","Neutron"],["UpgradeQ6.png","Superposition"],["UpgradeQ7.png","Protium"],["UpgradeQ8.png","Deuterium"],["UpgradeQ9.png","Tritium"],["UpgradeQ10.png","Fusion"]],[["UpgradeW1.png","H2O"],["UpgradeW2.png","Spread"],["UpgradeW3.png","Vaporization"],["UpgradeW4.png","Tension"],["UpgradeW5.png","Stress"],["UpgradeW6.png","Stream"],["UpgradeW7.png","River"],["UpgradeW8.png","Tsunami"],["UpgradeW9.png","Tide"]],[["UpgradeA1.png","Motion"],["UpgradeA2.png","Gas"],["UpgradeA3.png","Micrometeoroid"],["UpgradeA4.png","Instability"],["UpgradeA5.png","Gravity"],["UpgradeA6.png","Pile"],["UpgradeA7.png","Magma"],["UpgradeA8.png","Equilibrium"],["UpgradeA9.png","Orbit"],["UpgradeA10.png","Atmosphere"],["UpgradeA11.png","Pebble"],["UpgradeA12.png","Tidal force"],["UpgradeA13.png","Ring"]],[["UpgradeS1.png","Collapse"],["UpgradeS2.png","Reaction"],["UpgradeS3.png","CNO"],["UpgradeS4.png","Helium fusion"]],[["UpgradeG1.png","Instability"],["UpgradeG2.png","Super cluster"],["UpgradeG3.png","Quasar"]]],longestResearch:9,researchHTML:[[],[["ResearchQ1.png","Protium+","stage1borderImage"],["ResearchQ2.png","Deuterium+","stage1borderImage"],["ResearchQ3.png","Tritium+","stage1borderImage"],["ResearchQ4.png","Discharge-","stage4borderImage"],["ResearchQ5.png","Discharge+","stage4borderImage"],["ResearchQ6.png","Discharge++","stage4borderImage"]],[["ResearchW1.png","H2O+","stage2borderImage"],["ResearchW2.png","H2O++","stage2borderImage"],["ResearchW3.png","Tension+","stage2borderImage"],["ResearchW4.png","Stress+","stage2borderImage"],["ResearchW5.png","Streams+","stage2borderImage"],["ResearchW6.png","Channel","stage2borderImage"]],[["ResearchA1.png","Mass+","stage3borderImage"],["ResearchA2.png","Adhesion","stage2borderImage"],["ResearchA3.png","Weathering","stage3borderImage"],["ResearchA4.png","Shattering","stage3borderImage"],["ResearchA5.png","Collision","stage3borderImage"],["ResearchA6.png","Binary","stage3borderImage"],["ResearchA7.png","Gravity+","stage1borderImage"],["ResearchA8.png","Layers","stage7borderImage"],["ResearchA9.png","Drag","stage1borderImage"]],[["ResearchS1.png","Orbit","stage5borderImage"],["ResearchS2.png","2 stars","stage5borderImage"],["ResearchS3.png","Protodisc","stage7borderImage"],["ResearchS4.png","Planetary nebula","stage5borderImage"],["ResearchS5.png","Gamma-rays","stage6borderImage"]],[["ResearchG1.png","Density","stage1borderImage"],["ResearchG2.png","Frequency","stage6borderImage"]]],longestResearchExtra:5,researchExtraDivHTML:[[],["Energy%20Researches.png","stage4borderImage"],["Cloud%20Researches.png","stage2borderImage"],["Rank%20Researches.png","stage6borderImage"],["Collapse%20Researches.png","stage6borderImage"],[]],researchExtraHTML:[[],[["ResearchEnergy1.png","Strong force+","stage1borderImage"],["ResearchEnergy2.png","Radiation+","stage5borderImage"],["ResearchEnergy3.png","Accretion","stage3borderImage"],["ResearchEnergy4.png","Preon Mass","stage1borderImage"],["ResearchEnergy5.png","Impulse","stage6borderImage"]],[["ResearchClouds1.png","Vaporization+","stage3borderImage"],["ResearchClouds2.png","Rain","stage2borderImage"],["ResearchClouds3.png","Storm","stage4borderImage"],["ResearchClouds4.png","Water Accretion","stage2borderImage"]],[["ResearchRank1.png","Ocean","stage3borderImage"],["ResearchRank2.png","Rank","stage3borderImage"],["ResearchRank3.png","Weight","stage3borderImage"],["ResearchRank4.png","Viscosity","stage2borderImage"],["ResearchRank5.png","Water Rank","stage2borderImage"]],[["ResearchCollapse1.png","Supernova","stage6borderImage"],["ResearchCollapse2.png","Mass transfer","stage7borderImage"],["ResearchCollapse3.png","White dwarf","stage1borderImage"]],[]],longestFooterStats:3,footerStatsHTML:[[],[["Energy%20mass.png","stage1borderImage cyanText","Mass"],["Energy.png","stage4borderImage orangeText","Energy"]],[["Clouds.png","stage3borderImage grayText","Clouds"],["Water.png","stage2borderImage blueText","Moles"],["Drop.png","stage2borderImage blueText","Drops"]],[["Mass.png","stage3borderImage grayText","Mass"]],[["Main_sequence%20mass.png","stage1borderImage cyanText","Mass"],["Elements.png","stage4borderImage orangeText","Elements"]],[["Main_sequence%20mass.png","stage1borderImage cyanText","Mass"],["Elements.png","stage4borderImage orangeText","Elements"],["Stars.png","stage7borderImage redText","Stars"]]],cache:{imagesDiv:document.createElement("div"),idMap:new Map,classMap:new Map,queryMap:new Map}},$t=()=>{let{footerStatsHTML:e,buildingHTML:s,upgradeHTML:r,researchHTML:o,researchExtraHTML:i,researchExtraDivHTML:u}=I,a="";for(let c=1;c<=5;c++){for(let d=0;d<e[c].length;d++){if(c===2){if(d===2)continue}else if(c===5&&d<2)continue;a+=`<img src="Used_art/${e[c][d][0]}" loading="lazy">`}for(let d=0;d<s[c].length;d++)a+=`<img src="Used_art/${s[c][d]}" loading="lazy">`;for(let d=0;d<r[c].length;d++)a+=`<img src="Used_art/${r[c][d][0]}" loading="lazy">`;for(let d=0;d<o[c].length;d++)a+=`<img src="Used_art/${o[c][d][0]}" loading="lazy">`;for(let d=0;d<i[c].length;d++)a+=`<img src="Used_art/${i[c][d][0]}" loading="lazy">`;u[c].length>0&&(a+=`<img src="Used_art/${u[c][0]}" loading="lazy">`),a+=`<img src="Used_art/Stage${c}%20border.png" loading="lazy">`}I.cache.imagesDiv.innerHTML=a},Te=e=>{e!==null&&(t.stage.true<e&&(e=null),e===6&&t.stage.true<7&&t.strangeness[5][0]<1&&(e=null)),l.theme=e,e===null?localStorage.removeItem("theme"):localStorage.setItem("theme",`${e}`),st()},st=()=>{var i;let e=document.body.style,s=(i=l.theme)!=null?i:t.stage.active;n("currentTheme").textContent=l.theme===null?"Default":l.stageInfo.word[s];let r="",o="";switch(e.setProperty("--transition-all","1s"),e.setProperty("--transition-buttons","700ms"),e.removeProperty("--background-color"),e.removeProperty("--window-color"),e.removeProperty("--window-border"),e.removeProperty("--footer-color"),e.removeProperty("--button-color"),e.removeProperty("--button-border"),e.removeProperty("--button-hover"),e.removeProperty("--building-afford"),e.removeProperty("--tab-active"),e.removeProperty("--tab-elements"),e.removeProperty("--tab-strangeness"),e.removeProperty("--hollow-hover"),e.removeProperty("--footerButton-hover"),e.removeProperty("--input-border"),e.removeProperty("--input-text"),e.removeProperty("--button-text"),e.removeProperty("--main-text"),e.removeProperty("--white-text"),e.removeProperty("--blue-text"),e.removeProperty("--orange-text"),e.removeProperty("--gray-text"),e.removeProperty("--orchid-text"),e.removeProperty("--darkorchid-text"),e.removeProperty("--darkviolet-text"),e.removeProperty("--red-text"),e.removeProperty("--green-text"),e.removeProperty("--yellow-text"),s){case 1:for(let u of["upgrade","element"])n(`${u}Text`).style.color="",n(`${u}Effect`).style.color="",n(`${u}Cost`).style.color="";break;case 2:for(let u of["upgrade","element"])n(`${u}Text`).style.color="var(--white-text)",n(`${u}Effect`).style.color="var(--green-text)",n(`${u}Cost`).style.color="var(--cyan-text)";e.setProperty("--background-color","#070026"),e.setProperty("--window-color","#000052"),e.setProperty("--window-border","blue"),e.setProperty("--footer-color","#0000db"),e.setProperty("--button-color","#0000eb"),e.setProperty("--button-border","#386cc7"),e.setProperty("--button-hover","#2929ff"),e.setProperty("--building-afford","#b30000"),e.setProperty("--tab-active","#990000"),e.setProperty("--hollow-hover","#2400d7"),e.setProperty("--input-border","#4747ff"),e.setProperty("--input-text","dodgerblue"),e.setProperty("--main-text","var(--blue-text)"),e.setProperty("--gray-text","#9b9b9b"),e.setProperty("--darkorchid-text","#c71bff"),e.setProperty("--darkviolet-text","#8b6bff"),e.setProperty("--green-text","#82cb3b"),e.setProperty("--red-text","#f70000"),t.stage.active===2&&(r="#3099ff",o="#3099ff");break;case 3:for(let u of["upgrade","element"])n(`${u}Text`).style.color="var(--orange-text)",n(`${u}Effect`).style.color="",n(`${u}Cost`).style.color="var(--green-text)";e.setProperty("--background-color","#000804"),e.setProperty("--window-color","#2e1200"),e.setProperty("--window-border","#31373e"),e.setProperty("--footer-color","#221a00"),e.setProperty("--button-color","#291344"),e.setProperty("--button-border","#424242"),e.setProperty("--button-hover","#382055"),e.setProperty("--building-afford","#9e0000"),e.setProperty("--tab-active","#8d4c00"),e.setProperty("--tab-elements","var(--tab-active)"),e.setProperty("--hollow-hover","#5a2100"),e.setProperty("--footerButton-hover","#1a1a1a"),e.setProperty("--input-border","#8b4a00"),e.setProperty("--input-text","#e77e00"),e.setProperty("--main-text","var(--gray-text)"),e.setProperty("--white-text","#dfdfdf"),e.setProperty("--orange-text","#f58600"),e.setProperty("--green-text","#00db00"),t.stage.active===2&&(r="#3099ff",o="#3099ff");break;case 4:for(let u of["upgrade","element"])n(`${u}Text`).style.color="var(--blue-text)",n(`${u}Effect`).style.color="var(--green-text)",n(`${u}Cost`).style.color="var(--cyan-text)";e.setProperty("--background-color","#140e04"),e.setProperty("--window-color","#4e0000"),e.setProperty("--window-border","#894800"),e.setProperty("--footer-color","#4e0505"),e.setProperty("--button-color","#6a3700"),e.setProperty("--button-border","#a35700"),e.setProperty("--button-hover","#8a4700"),e.setProperty("--building-afford","#007f95"),e.setProperty("--tab-active","#008297"),e.setProperty("--tab-elements","var(--tab-active)"),e.setProperty("--tab-strangeness","#00a500"),e.setProperty("--hollow-hover","#605100"),e.setProperty("--footerButton-hover","#212121"),e.setProperty("--input-border","#008399"),e.setProperty("--input-text","#05c3c3"),e.setProperty("--button-text","#d9d900"),e.setProperty("--main-text","var(--orange-text)"),e.setProperty("--white-text","#e5e500"),e.setProperty("--blue-text","#2e96ff"),e.setProperty("--gray-text","#8b8b8b"),e.setProperty("--darkorchid-text","#c71bff"),e.setProperty("--darkviolet-text","#9457ff"),e.setProperty("--red-text","red"),e.setProperty("--green-text","#00e600"),e.setProperty("--yellow-text","var(--green-text)");break;case 5:for(let u of["upgrade","element"])n(`${u}Text`).style.color="var(--orange-text)",n(`${u}Effect`).style.color="var(--green-text)",n(`${u}Cost`).style.color="var(--red-text)";e.setProperty("--background-color","#060010"),e.setProperty("--window-color","#001d42"),e.setProperty("--window-border","#35466e"),e.setProperty("--footer-color","#2f005c"),e.setProperty("--button-color","#4a008f"),e.setProperty("--button-border","#8f004c"),e.setProperty("--button-hover","#6800d6"),e.setProperty("--building-afford","#8603ff"),e.setProperty("--tab-active","#8500ff"),e.setProperty("--hollow-hover","#3b0080"),e.setProperty("--footerButton-hover","#1a1a1a"),e.setProperty("--input-border","#3656a1"),e.setProperty("--input-text","#6a88cd"),e.setProperty("--button-text","#fc9cfc"),e.setProperty("--main-text","var(--darkorchid-text)"),e.setProperty("--white-text","#ff79ff"),e.setProperty("--orchid-text","#ff00f4"),e.setProperty("--darkorchid-text","#c000ff"),e.setProperty("--darkviolet-text","#9f52ff"),e.setProperty("--yellow-text","var(--darkviolet-text)");break;case 6:for(let u of["upgrade","element"])n(`${u}Text`).style.color="var(--orchid-text)",n(`${u}Effect`).style.color="var(--red-text)",n(`${u}Cost`).style.color="";e.setProperty("--background-color","black"),e.setProperty("--window-color","#01003c"),e.setProperty("--window-border","#7100ff"),e.setProperty("--footer-color","#00007a"),e.setProperty("--button-color","#2b0095"),e.setProperty("--button-border","#6c1ad1"),e.setProperty("--button-hover","#3d00d6"),e.setProperty("--building-afford","#b30000"),e.setProperty("--tab-active","#8d0000"),e.setProperty("--hollow-hover","#490070"),e.setProperty("--input-border","#a50000"),e.setProperty("--input-text","red"),e.setProperty("--button-text","#efe0ff"),e.setProperty("--main-text","var(--darkviolet-text)"),e.setProperty("--gray-text","#9b9b9b"),e.setProperty("--darkviolet-text","#8157ff"),e.setProperty("--white-text","#f9f5ff"),e.setProperty("--red-text","red"),e.setProperty("--yellow-text","var(--red-text)")}F("#footerStat2 > p").style.color=r,F("#footerStat3 > p").style.color=o,setTimeout(()=>{e.removeProperty("--transition-all"),e.removeProperty("--transition-buttons")},1e3)},R=async e=>await new Promise(s=>{let r=n("blocker");if(r.style.display!=="none"){s(),L("Another Alert is already active");return}n("alertText").textContent=e;let o=n("alertConfirm");r.style.display="",o.focus();let i=async a=>{(a.key==="Escape"||a.key==="Enter"||a.key===" ")&&(a.preventDefault(),u())},u=()=>{r.style.display="none",document.removeEventListener("keydown",i),o.removeEventListener("click",u),s()};document.addEventListener("keydown",i),o.addEventListener("click",u)}),O=async e=>await new Promise(s=>{let r=n("blocker");if(r.style.display!=="none"){s(!1),L("Another Alert is already active");return}n("alertText").textContent=e;let o=n("alertCancel"),i=n("alertConfirm");r.style.display="",o.style.display="",i.focus();let u=()=>{d(!0)},a=()=>{d(!1)},c=p=>{p.key==="Escape"?(p.preventDefault(),a()):(p.key==="Enter"||p.key===" ")&&document.activeElement!==o&&(p.preventDefault(),u())},d=p=>{r.style.display="none",o.style.display="none",document.removeEventListener("keydown",c),i.removeEventListener("click",u),o.removeEventListener("click",a),s(p)};document.addEventListener("keydown",c),i.addEventListener("click",u),o.addEventListener("click",a)}),ut=async(e,s="")=>await new Promise(r=>{let o=n("blocker");if(o.style.display!=="none"){r(null),L("Another Alert is already active");return}n("alertText").textContent=e;let i=n("alertInput"),u=n("alertCancel"),a=n("alertConfirm");o.style.display="",u.style.display="",i.style.display="",i.value=s,i.focus();let c=()=>{m(i.value)},d=()=>{m(null)},p=b=>{b.key==="Escape"?(b.preventDefault(),d()):(b.key==="Enter"||b.key===" ")&&document.activeElement!==u&&(b.preventDefault(),c())},m=b=>{o.style.display="none",u.style.display="none",i.style.display="none",document.removeEventListener("keydown",p),a.removeEventListener("click",c),u.removeEventListener("click",d),r(b)};document.addEventListener("keydown",p),a.addEventListener("click",c),u.addEventListener("click",d)}),L=e=>{let s=n("notifications"),r=document.createElement("p");r.textContent=e,r.style.animation="hideX 1s ease-in-out reverse",s.style.pointerEvents="",l.screenReader&&r.setAttribute("role","alert");let o=n("notifications");o.appendChild(r);let i,u=()=>{r.removeEventListener("click",u),r.style.animation="hideX 1s ease-in-out forwards",setTimeout(()=>{o.removeChild(r),s.style.pointerEvents=""},1e3),clearTimeout(i)};setTimeout(()=>{r.style.animation="",s.style.pointerEvents="auto",i=setTimeout(u,9e3),r.addEventListener("click",u)},1e3)},Je=()=>{let e=n("footer"),s=n("footerMain"),r=n("hideToggle"),o=n("hideArrow"),i=()=>{e.style.animation="",o.style.animation="",r.addEventListener("click",Je)};l.footer=!l.footer,r.removeEventListener("click",Je),l.footer?(s.style.display="",o.style.transform="",e.style.animation="hideY 1s reverse",o.style.animation="rotate 1s reverse",n("hideText").textContent="Hide",n("stageSelect").classList.add("active"),setTimeout(i,1e3),W(),te()):(e.style.animation="hideY 1s backwards",o.style.animation="rotate 1s backwards",n("hideText").textContent="Show",n("stageSelect").classList.remove("active"),setTimeout(()=>{s.style.display="none",o.style.transform="rotate(180deg)",i()},1e3))},ct=(e=!1)=>{let s=n("customFontSize"),r=Number(e?s.value:localStorage.getItem("fontSize"));r===0&&(r=16),r===16?(document.body.style.fontSize="",localStorage.removeItem("fontSize")):(r=Math.floor(Math.min(Math.max(r,10),32)*100)/100,document.body.style.fontSize=`${r}px`,localStorage.setItem("fontSize",`${r}`)),s.value=`${r}`},gt=e=>{let s=e?n("decimalPoint"):n("thousandSeparator");(![".",","," ","_","^",'"',"'","`","|"].includes(s.value)||(e?t.separator[0]:t.separator[1])===s.value)&&(e&&t.separator[0]==="."&&(n("thousandSeparator").value="",t.separator[0]=""),s.value=e?".":""),e?t.separator[1]=s.value:t.separator[0]=s.value},Oe=e=>{for(let s=1;s<=5;s++)n(`strangenessSection${s}`).style.display="none";n(`strangenessSection${e}`).style.display=""},Ct=async()=>{if(n("blocker").style.display!=="none")return;let e;if(t.stage.true>=6)e=7;else if(t.strange[0].total>0)e=t.event?6:5;else if(e=t.stage.true-(t.event?0:1),e<1)return void R("There are no unlocked events");let s=`Which event do you want to see again?
Event 1: To Discharge;`;e>=2&&(s+=`
Event 2: Clouds softcap;`),e>=3&&(s+=`
Event 3: New Rank;`),e>=4&&(s+=`
Event 4: Element activation;`),e>=5&&(s+=`
Event 5: Intergalactic space;`),e>=6&&(s+=`
Event 6: First Galaxy;`),e>=7&&(s+=`
Event 7: True Vacuum;`);let r=Number(await ut(s,`${e}`));r>e||j(r,!1)},j=async(e,s=!0)=>{if(n("blocker").style.display==="none")switch(s&&(t.event=!0),e){case 1:return void R("Spent Energy can be regained only with Discharge, reaching new Goal isn't required for it");case 2:return void R("Cloud density is too high... Strength of new Clouds will be weaker");case 3:return s&&(l.accretionInfo.rankCost[4]=5e29,l.debug.rankUpdated=-1),void R("Accretion can't continue without a new Rank. Next Rank is going to be softcapped");case 4:return void R("Elements require Collapse to be activated. Solar mass won't decrease from Collapse");case 5:return void R("Intergalactic space is currently empty, but after returning back to Microworld and completing different Milestones, new end will arrive");case 6:return s&&A(4,4,"strangeness",!0),void R("Galaxy will boost Nebulas and Star clusters, but for the price of everything else");case 7:return await R("Vacuum is too unstable. Vacuum instability is imminent"),void R(`False Vacuum decayed, new Forces and Structures are expected
(Game will be much slower now)`)}};var t={version:"v0.1.9",fileName:"Fundamental, [date] [time], [stage]",separator:["","."],stage:{true:1,current:1,active:1,resets:0,export:86400,best:0,time:0,input:20},discharge:{energy:0,energyMax:0,current:0},vaporization:{clouds:[0,0],cloudsMax:[0,0],input:3},accretion:{rank:0},collapse:{mass:.01235,massMax:.01235,stars:[0,0,0],show:0,input:2},inflation:{vacuum:!1,age:0},intervals:{main:20,numbers:80,visual:1e3,autoSave:2e4},time:{updated:Date.now(),started:Date.now(),offline:0,online:0,stage:0,universe:0},buildings:[[],[{current:[3,0],total:[3,0],trueTotal:[3,0],highest:[3,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[2.8,-3],total:[2.8,-3],trueTotal:[2.8,-3],highest:[2.8,-3]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[1,-19],total:[1,-19],trueTotal:[1,-19],highest:[1,-19]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[1,0],total:[1,0],trueTotal:[1,0],highest:[1,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}]],strange:[{current:0,total:0},{current:0,total:0}],upgrades:[],researches:[],researchesExtra:[],researchesAuto:[],ASR:[],elements:[],strangeness:[],milestones:[],challenges:{active:-1,void:[0,0,0,0,0,0]},toggles:{normal:[],confirm:[],buildings:[],hover:[],max:[],auto:[],shop:{howMany:1,input:10,wait:[2]}},history:{stage:{best:[0,1,0],list:[],input:[5,10]}},event:!1},l={tab:"stage",subtab:{stageCurrent:"Structures",settingsCurrent:"Settings",upgradeCurrent:"Upgrades",strangenessCurrent:"Matter"},tabList:{tabs:["stage","upgrade","strangeness","settings"],stageSubtabs:["Structures","Advanced"],settingsSubtabs:["Settings","History","Stats"],upgradeSubtabs:["Upgrades","Elements"],strangenessSubtabs:["Matter","Milestones"]},debug:{errorID:!0,errorQuery:!0,errorGain:!0,rankUpdated:-1,historyStage:-1},trueActive:1,lastSave:0,paused:!0,footer:!0,mobileDevice:!1,screenReader:!1,supportSettings:[!0],automatization:{autoU:[[],[],[],[],[],[]],autoR:[[],[],[],[],[],[]],autoE:[[],[],[],[],[],[]],elements:[]},theme:null,dischargeInfo:{getEnergy:(e,s)=>{let r=l.dischargeInfo.energyType[s][e];return s===1&&e===1&&(r+=t.strangeness[1][4]*(t.inflation.vacuum?2:1)),t.inflation.vacuum&&(r+=Math.floor(r/100*l.milestonesInfo[1].reward[1]),t.challenges.active===0&&(r-=Math.ceil(r/5))),r},energyType:[[],[0,1,3,5,10,20],[0,10,20,30,40,50,60],[0,10,20,40,80,100],[0,100,200,300,400,500],[0,400,400,1e3]],energyTrue:0,tritium:[0,0],base:4,total:0,next:1},vaporizationInfo:{strength:[1,0],dropsEff:[0,0],tension:1,stress:1,research0:0,research1:0,get:[0,0]},accretionInfo:{effective:0,rankU:[1,1,2,2,3,3,4,4,4,4,5,5,5],rankR:[1,1,2,2,3,3,3,4,5],rankE:[2,3,4,5,3],rankCost:[59722e23,1e-7,1e10,1e24,5e29,245576045e23,0],rankColor:["blue","cyan","gray","gray","gray","darkviolet","orange"],rankName:["Ocean world","Cosmic dust","Meteoroid","Asteroid","Planet","Jovian planet","Protostar"],rankImage:["Ocean%20world.png","Dust.png","Meteoroids.png","Asteroid.png","Planet.png","Giant.png","Protostar.png"]},collapseInfo:{massEffect:1,starEffect:[1,1,1],unlockB:[0,.01235,.23,10,40,1e3],unlockG:[0,100,1e3,1e5],unlockU:[.01235,.076,1.3,10],unlockR:[.18,.3,.8,1.3],newMass:0,starCheck:[0,0,0],trueStars:0},inflationInfo:{globalSpeed:1,preonCap:[1,14],dustCap:[8,46],massCap:60,preonTrue:[0,0],dustTrue:[0,0]},intervalsId:{main:void 0,numbers:void 0,visual:void 0,autoSave:void 0},stageInfo:{word:["","Microworld","Submerged","Accretion","Interstellar","Intergalactic","Void"],textColor:["","cyan","blue","gray","orange","darkorchid","darkviolet"],buttonBorder:["","darkcyan","#386cc7","#424242","#a35700","#8f004c","#6c1ad1"],imageBorderColor:["","#008b8b","#1460a8","#5b5b75","#e87400","#b324e2","#5300c1"],activeAll:[1]},buildingsInfo:{maxActive:[0,4,6,5,5,4],name:[[],["Mass","Preons","Quarks","Particles","Atoms","Molecules"],["Moles","Drops","Puddles","Ponds","Lakes","Seas","Oceans"],["Mass","Cosmic dust","Planetesimals","Protoplanets","Satellites","Subsatellites"],["Elements","Brown dwarfs","Main sequence","Red supergiants","Blue hypergiants","Quasi stars"],["Stars","Nebulas","Star clusters","Galaxies"]],hoverText:[[],["Mass","Preons","Quarks","Particles","Atoms"],["Tritium","Drops","Puddles","Ponds","Lakes","Seas"],["Preons hardcap","Cosmic dust","Planetesimals","Protoplanets","Satellites"],["Elements","Elements","Elements","Elements","Elements"],["Interstellar Stars","Interstellar Stars","Nebulas and Star clusters"]],type:[[],["","producing","producing","producing","producing","producing"],["","producing","producing","improving","improving","improving","improving"],["","producing","producing","producing","improving","improving"],["","producing","producing","producing","producing","producing"],["","producing","improving","improving"]],firstCost:[],startCost:[[],[0,.005476,6,3,24,3],[0,.0028,100,1e7,1e18,1e23,2676e22],[0,1e-19,1e-9,1e21,1e17,1e22],[0,1,1e5,1e15,1e28,1e56],[0,1e30,1e40,1e5]],increase:[[],[0,1.4,1.4,1.4,1.4,1.4],[0,1.15,1.2,1.25,1.35,1.4,1.45],[0,1.15,1.25,1.35,10,10],[0,1.4,1.55,1.7,1.85,2],[0,4,4,1.11]],producing:[]},strangeInfo:{gain:e=>{let s=e>=4||t.inflation.vacuum,r=1;return s&&t.elements[27]===1&&(r+=y.element27()),t.inflation.vacuum?(r+=t.strangeness[5][5]>=1?4:3,t.strangeness[2][9]>=1&&(r*=y.S2Strange9())):r+=l.strangeInfo.instability,s&&(r*=1.5**t.strangeness[5][1]),Math.floor(r)},name:["Strange quarks","Strangelets"],stageBoost:[],instability:0},upgradesInfo:[{},{name:["Weak force","Strong force","Bigger electrons","Stronger protons","More neutrons","Superposition","Protium","Deuterium","Tritium","Nuclear fusion"],effectText:[()=>"Particles produce 5 times more Quarks.",()=>"Gluons now bind Quarks into Particles, which makes Particles 10 times cheaper.",()=>`${t.inflation.vacuum?"Atoms":"Particles"} are 10 times cheaper.`,()=>`${t.inflation.vacuum?"Atoms":"Particles"} produce 5 times more ${t.inflation.vacuum?"Particles":"Quarks"}.`,()=>`${t.inflation.vacuum?"Molecules":"Atoms"} produce 5 times more ${t.inflation.vacuum?"Atoms":"Particles"}.`,()=>`Ability to regain spent Energy and if had enough Energy will also boost production for all Structures by ${f(l.dischargeInfo.base)}.`,()=>`Cost scaling is decreased by ${f(y.S1Upgrade6()/100)}.`,()=>`Self-made Structures boost themselves by ${f(y.S1Upgrade7())} times.`,()=>"Molecules produce Molecules. At a reduced rate.",()=>{let e=y.S1Upgrade9();return`Unspent Energy boost Molecules production of themselves ${t.discharge.energy!==e?`${f(t.discharge.energy/e,{padding:!0})} to 1. (Softcapped)
(Actual boost is ${f(e,{padding:!0})})`:"1 to 1."}`}],startCost:[40,80,100,140,200,400,2e3,4e3,2e4,7e4],maxActive:10},{name:["Molecules to Moles","Water spread","Vaporization","Surface tension","Surface stress","Stream","River","Tsunami","Tide"],effectText:[()=>`Drops will produce Moles ${f(1.04)} times faster for every self-made Drop.`,()=>`Spread water faster with every Puddle, weaker for non self-made ones.
(Total effect is ${g(y.S2Upgrade1()).format({padding:!0})})`,()=>`Gain ability to convert Drops into Clouds. (Clouds boost Puddles, effect can be seen in Stats)
Current Cloud gain is (Drops / ${f(y.S2Upgrade2())})^${f(t.inflation.vacuum?.4:.6)}.`,()=>`Puddles get boost based on Moles ^${f(y.S2Upgrade3())}.
(Boost is equal to ${f(l.vaporizationInfo.tension,{padding:!0})})`,()=>`Puddles get boost based on Drops ^${f(y.S2Upgrade4())}.
(Boost is equal to ${f(l.vaporizationInfo.stress,{padding:!0})})`,()=>`Ponds now create extra Puddles. (${f(y.S2Upgrade5())} extra Puddles per Pond)`,()=>`Lakes now create extra Ponds. (${f(y.S2Upgrade6())} extra Ponds per Lake)`,()=>"Spreads enough water to make each Sea create 1 extra Lake.",()=>"Spreads water too fast. 1 extra Sea per Ocean."],startCost:[1e4,1e6,1e10,1e3,1e4,2e9,5e20,1e28,4e40],maxActive:8},{name:["Brownian motion","Gas","Micrometeoroid","Streaming instability","Gravitational field","Rubble pile","Magma ocean","Hydrostatic equilibrium","Satellite system","Atmosphere","Pebble accretion","Tidal force","Ring system"],effectText:[()=>`Through random collisions every self-made Cosmic dust ${t.inflation.vacuum?"delays Preons hardcap even more":"speeds up Accretion speed"}. (By ${f(y.S3Upgrade0())})`,()=>{let e=y.S3Upgrade1();return`New substance for Accretion, will provide ${t.inflation.vacuum?"delay to Preons hardcap":"boost to Accretion speed"} based on current Cosmic dust quantity ^${f(e)}.
(Boost is equal to ${g(t.buildings[3][1].current).power(e).format({padding:!0})})`},()=>"Just a small meteoroid, but it will be a good base for what to come. (Unlock a new Structure and get 2x boost to Cosmic dust)",()=>`Small bodies spontaneously concentrate into clumps. (Self-made Planetesimals boost each other by ${f(y.S3Upgrade3())})`,()=>"Bodies are now massive enough to affect each other with gravity. (Unlock a new Structure and get 3x boost to Planetesimals)",()=>`Shattered pieces fall back together. ${t.inflation.vacuum?"Preons hardcap delay from Cosmic dust":"Accretion speed"} increased by 3.`,()=>`Core melted, Accretion speed increased. (${t.inflation.vacuum?"Preons hardcap delay from Cosmic dust":"Mass production"} increased by ${f(2*1.5**t.researches[3][7])})`,()=>`After reaching equilibrium self-made Protoplanets will boost each other by ${f(1.02)}.`,()=>"Unlock yet another Structure.",()=>`${t.inflation.vacuum?"Preons hardcap delay from Cosmic dust":"Accretion speed"} increased again (because of drag and escape velocity), by 2.`,()=>`${t.inflation.vacuum?"Preons hardcap delay from Cosmic dust":"Accretion speed"} greatly increased by ${8*2**t.researches[3][8]}.`,()=>`Satellites cost scaling is now 2 times smaller.${t.strangeness[3][8]>=1?`
Also unlock a new Structure.`:""}`,()=>"Satellites effect scales better."],startCost:[1e-16,1e-13,1e-13,1,1e14,1e17,1e10,1e22,1e22,1e23,1e9,1e26,1e29],maxActive:13},{name:["Gravitational Collapse","Proton-proton chain","Carbon-Nitrogen-Oxygen cycle","Helium fusion"],effectText:[()=>"As fuel runs out, every Star will boost production in its own special way.",()=>`Fuse with Protium instead of Deuterium. Unlock ${t.stage.true>=5?"5 first Elements":"a new Upgrade type (Upgrade tab)"}.`,()=>`CNO cycle is now a better source of Helium and Energy. Unlock ${t.stage.true>=5?"5 more Elements":"even more of that Upgrade type"}.`,()=>"Through Triple-alpha and then Alpha process will unlock 2 more Elements."],startCost:[100,1e3,1e9,1e48],maxActive:4},{name:["Jeans instability","Super Star cluster","Quasar"],effectText:[()=>`Gravitational Collapse within Nebulas will increase speed for production of Stars by ${f(y.S5Upgrade0())} times.`,()=>`A very massive Star clusters, that will boost Stars by ${f(y.S5Upgrade1())}.`,()=>t.inflation.vacuum?`Boost per Galaxy increased by +1.
Requires ${f(1e6)} Solar mass.`:`'[27] Cobalt' Element receives super boost of ^${f(1.5)}.`],startCost:[1e50,1e60,1e120],maxActive:3}],researchesInfo:[{},{name:["Stronger Protium","Better Deuterium","Improved Tritium","Requirement decrease","Discharge improvement","Radioactive Discharge"],effectText:[()=>`Cost scaling is ${f(.03)} smaller with each level.`,()=>`Self-made Structures boost each other by additional ${f(.01)}.`,()=>`Molecules now produce themselves ${f(y.S1Research2())} times quicker.`,()=>"Next goal for Discharge bonus scales by -2 less.",()=>"Discharge production boost from reached goals is now +1.",()=>{let e=y.S1Research5();return`Discharge will boost 'Tritium' Upgrade for every non bonus goal ^${f(e)}.
(Total boost: ${f(t.discharge.current**e)})`}],cost:[],startCost:[2400,6e3,24e3,3e4,24e3,3e4],scaling:[400,2e3,6e3,24e3,12e3,12e3],max:[5,4,8,2,4,3],maxActive:6},{name:["Better Mole production","Better Drop production","Stronger surface tension","Stronger surface stress","More streams","Distributary channel"],effectText:[()=>`Drops produce 3 times more Moles.${l.vaporizationInfo.research0!==t.researches[2][0]?`
Weakened by recent ${t.inflation.vacuum?"reset":"Vaporization"}, effective level is ${f(l.vaporizationInfo.research0)} (will be increased after ${g(10*1.36**l.vaporizationInfo.research0).minus(t.buildings[2][1].total).format({padding:!0})} more Drops).`:""}`,()=>`Puddles produce 2 times more Drops.${l.vaporizationInfo.research1!==t.researches[2][1]?`
Weakened by recent ${t.inflation.vacuum?"reset":"Vaporization"}, effective level is ${f(l.vaporizationInfo.research1)} (will be increased after ${g((5**(l.vaporizationInfo.research1+1)-1)*100).minus(t.buildings[2][1].total).format({padding:!0})} more Drops).`:""}`,()=>`Surface tension Upgrade is now +${f(.005)} stronger.`,()=>`Surface stress Upgrade is now +${f(.005)} stronger.`,()=>"With more streams, can have even more extra Puddles. (+1 extra Puddles per Pond)",()=>"Rivers can split now, that allows even more Ponds per Lake. (+1 per)"],cost:[],startCost:[10,400,1e4,1e5,1e14,1e22],scaling:[1.36,5,1e3,100,1e3,1e4],max:[8,8,4,4,2,1],maxActive:6},{name:["More massive bodies","Adhesion","Space weathering","Inelastic collisions","Destructive collisions","Contact binary","Gravity","Planetary differentiation","Aerodynamic drag"],effectText:[()=>`Cosmic dust ${t.inflation.vacuum?"will delay Preons hardcap":"production is increased"} by 3.`,()=>`Cosmic dust particles cling to each other. (+${f(.01)} to 'Brownian motion')`,()=>"Planetesimals produce more Cosmic dust. (3 times more)",()=>`Slow encounter velocities will result in a more efficient growth, so this Research will make bodies lose more Energy from each deflection. ${t.inflation.vacuum?"Preons hardcap delay from Cosmic dust":"Mass production"} increased by 2.`,()=>`Planetesimals when shatter replenish small grains quantity. 'Streaming instability' effect increased by +${f(.005)}.`,()=>`Some Planetesimals instead of shattering form a contact binary or even trinary. ${t.inflation.vacuum?"Preons hardcap delay from Cosmic dust":"Mass production"} increased by 3.`,()=>{let e=y.S3Research6();return`Planetesimals attract other bodies with own gravity. Planetesimals get boost to production based on unspent Mass ^${f(e)}.
(Total boost: ${g(t.buildings[3][0].current).power(e).format({padding:!0})})`},()=>`'Magma Ocean' Upgrade is stronger now. (${f(1.5)}x times)`,()=>`${t.inflation.vacuum?"Preons hardcap delay":"Accretion speed"} from 'Pebble accretion' increased again, by 2.`],cost:[],startCost:[1e-16,1e-15,1e-5,100,1e10,1e11,1e15,1e14,1e12],scaling:[11,111,22,10,100,100,10,1e4,1e3],max:[9,3,8,8,2,2,5,4,4],maxActive:9},{name:["Planetary system","Star system","Protoplanetary disk","Planetary nebula","Gamma-ray burst"],effectText:[()=>{let e=y.S4Research0();return`From Planetesimals to Planets, will get ${f(e)}x boost to all Stars per level.
(Total boost: ${f(e**t.researches[4][0],{padding:!0})})`},()=>{let e=y.S4Research1();return`All Stars boost each other by ${f(e)}.
(Total boost: ${g(e).power(l.collapseInfo.trueStars).format({padding:!0})})`},()=>"Improve effect scaling of 'Planetary system', as well increase its max level by +3.",()=>`Matter expelled from Red giants, this will boost Main-sequence stars by 4, as well boost all Stars by ${f(1.25)}.`,()=>`An immensely energetic explosion that will boost all Stars by ${f(y.S4Research4(),{padding:!0})}.
(Effect is stronger with more Black holes${t.elements[23]===1?" and Solar mass":""})`],cost:[],startCost:[1e3,5e4,1e8,2e10,1e28],scaling:[10,200,1e12,5e44,2e8],max:[3,2,1,1,2],maxActive:5},{name:["Higher density","Type frequency"],effectText:[()=>`Higher density of Nebulas, will allow them to produce higher tier of Stars, but each tier is 4 times slower than previous one. Also will boost Nebulas by 4.
Next tier will be ${l.buildingsInfo.name[4][Math.min(t.researches[5][0]+2,4)]}.`,()=>`More types of Stars are found within Star cluster. Increasing effect by 3, but also boosting lower tier of Stars. (3 times less than higher one)
Next tier will be ${l.buildingsInfo.name[4][Math.max(3-t.researches[5][1],1)]}.`],cost:[],startCost:[1e45,1e50],scaling:[1e15,1e15],max:[3,3],maxActive:2}],researchesExtraInfo:[{},{name:["Extra strong force","Improved formula","Accretion","Later Preons","Impulse"],effectText:[()=>`Mesons now binds Particles to form Atoms, which makes Atoms to be affected by 'Strong force'.
(Atoms are 10 times cheaper)`,()=>`Improve scaling for 'Tritium' formula, current formula is log${f(y.S1Extra1())}.`,()=>`First level is to begin the Accretion, second level is to Submerge it.
All Structures produce Energy on creation, as well Mass from all Stages is connected.`,()=>{let e=y.S1Extra3();return`Delay Preons hardcap by current Energy ^${f(e)}.
(Effect is equal to ${f(t.discharge.energy**e,{padding:!0})})`},()=>{let e=y.S1Extra4();return`Discharge goals will now boost all Interstellar Stars, but at reduced base and without bonus Goals.
Current base is ${f(e)}, total boost is ${g(e).power(t.discharge.current).format()}.`}],cost:[],startCost:[12e3,54e3,16e3,24e3,14e4],scaling:[0,12e3,62e3,18e3,0],max:[1,4,2,6,1],maxActive:0},{name:["Natural Vaporization","Rain Clouds","Storm Clouds","Water Accretion"],effectText:[()=>"When formed Clouds will use Drops produced this reset instead of current ones.",()=>`Some Clouds will start pouring Drops themselves. This will produce Drops until a Puddle, afterwards it will boost Puddles.
(Effect: ${f(y.S2Extra1_2()[0]-(t.buildings[2][2].current[0]<=0?1:0),{padding:!0})})`,()=>`Improve 'Rain Clouds', and also boost Seas at a reduced rate. (Boost for Seas: ${f(y.S2Extra1_2()[1],{padding:!0})})`,()=>`Submerge and boost Stars with 'Surface tension' Upgrade, also with 'Surface stress' at level 2.
(Boost to Stars: ${f(l.vaporizationInfo.tension*(t.researchesExtra[2][3]>=2?l.vaporizationInfo.stress:1),{padding:!0})})`],cost:[],startCost:[1e18,1e13,1e26,1e13],scaling:[1,1,1,1e5],max:[1,1,1,2],maxActive:3},{name:["Rank boost","Efficient growth","Weight","Viscosity","Efficient submersion"],effectText:[()=>`Cosmic dust ${t.inflation.vacuum?"will delay Preons hardcap":"production is increased"} by another ${f(1.1)}x per level.
(Total increase: ${f(1.1**t.researchesExtra[3][0],{padding:!0})})`,()=>`${t.inflation.vacuum?"Preons hardcap delay from Cosmic dust is even bigger":"Accretion speed is even quicker"}. Improved by effective Rank.
(Total boost: ${f(y.S3Extra1()**l.accretionInfo.effective)})`,()=>"'Gravitational field' Upgrade will now boost Protoplanets at reduced strength. (2x boost)",()=>"'Gas' Upgrade is now a little stronger.",()=>`'Efficient growth' will now boost Puddles at reduced rate and without bonus Ranks.
(Current boost: ${f(y.S3Extra4(y.S3Extra1()**t.accretion.rank))})`],cost:[],startCost:[1e-18,1e-16,1e26,1e-6,1e-10],scaling:[10,100,1,1e5,1e12],max:[12,5,1,8,1],maxActive:4},{name:["Nova","Mass transfer","White dwarfs"],effectText:[()=>`This violent stellar explosion is main source of Elements, also starts new Star formations.
Unlock new Structure and even more, after Collapse of that Structure.`,()=>`Star material transfers from one Star to another, ${t.inflation.vacuum?"delaying Preons hardcap":"improving Solar mass gain"} by ${f(y.S4Extra1())}.
Also makes 'Star system' levels scale better.`,()=>`Matter were dispeled from Red giant and White dwarf is all that remained, improves effect of '[6] Carbon' by +${f(.5)} and '[28] Nickel' by ${f(1.5)}. Also increase max level of 'Planetary nebula' by +1.`],cost:[],startCost:[4e4,2e9,1e50],scaling:[1e10,1,1],max:[3,1,1],maxActive:3},{name:[],effectText:[],cost:[],startCost:[],scaling:[],max:[],maxActive:0}],researchesAutoInfo:{name:["Upgrade automatization","More toggles"],effectText:[()=>`Automatically create all ${["Upgrades","Stage Researches","Special Researches"][Math.min(t.researchesAuto[0],2)]} from any Stage. (Need to be enabled in Settings)`,()=>"Unlock a new toggle that will switch all auto Structure toggles at once."],costRange:[[1e14,2e36,1e52],[96e3]],autoStage:[[2,3,4],[1]],max:[3,1]},ASRInfo:{name:"Auto Structures",effectText:()=>{let e=t.stage.active,s=Math.min(t.ASR[e]+1,l.ASRInfo.max[e]);return`Automatically make ${t.buildings[e][s].highest[0]>0?l.buildingsInfo.name[e][s]:"(unknown)"} (counts as self-made).
(Auto will wait until ${f(t.strangeness[1][7]<1?2:t.toggles.shop.wait[e])} times of the Structure cost)`},costRange:[[],[4e3,1e4,16e3,24e3,32e3],[1e10,1e14,1e18,1e23,1e28,1e34],[1e-7,1e10,5e29,2e30,2e36],[1e6,1e17,1e28,1e39,1e61],[1,1,1,1]],max:[0,5,5,4,4,0]},elementsInfo:{name:["[0] Neutronium","[1] Hydrogen","[2] Helium","[3] Lithium","[4] Beryllium","[5] Boron","[6] Carbon","[7] Nitrogen","[8] Oxygen","[9] Fluorine","[10] Neon","[11] Sodium","[12] Magnesium","[13] Aluminium","[14] Silicon","[15] Phosphorus","[16] Sulfur","[17] Chlorine","[18] Argon","[19] Potassium","[20] Calcium","[21] Scandium","[22] Titanium","[23] Vanadium","[24] Chromium","[25] Manganese","[26] Iron","[27] Cobalt","[28] Nickel"],effectText:[()=>`Element with no protons, true head of this table.
This one is ${Math.random()<.1?Math.random()<.1?"an illusive Tetraneutron, or maybe even Pentaneutron, wait where did it go? Was it even there?":"a rare Dineutron, but it is already gone...":"a simple Mononeutron, it will stay with you for as long as it can."}`,()=>`Most basic Element, increases Brown dwarf production by 2.
Also Solar mass effect is now known - boost to all Stars.`,()=>`Fusion reaction by product, makes everything Interstellar scale ${f(.1)} less.`,()=>`First metal, ${t.inflation.vacuum?"hardcap for Cosmic dust":"Solar mass gain"} per Brown dwarf lightly ${t.inflation.vacuum?"delayed":"increased"}.`,()=>`Brittle earth metal, so is brittle increase to production. (${f(1.2)}x to all Stars)`,()=>`A new color, and a new ${t.inflation.vacuum?"delay to Cosmic dust hardcap":"boost to Solar mass gain"} that is based on current Dwarf Stars.`,()=>`Base for organics, boost from Red giants is now increased to the power of ${f(y.element6())}.
Red giants effect is now known - boost to all Main-sequence stars.`,()=>"Most abundant uncombined Element in atmosphere of some Planets, also allows to have 2 extra levels of 'Star system'.",()=>`An oxidizing agent, that will make everything Interstellar scale even slower. (${f(.05)} less)`,()=>"Highly toxic and reactive, +12 to max level of 'Planetary system'.",()=>`A noble 2x ${t.inflation.vacuum?"delay to Preons hardcap":"boost to Solar mass gain"}.`,()=>"Through leaching, get 1 extra level of 'Protoplanetary disk'.",()=>`Stars are inside you, as well Neutrons stars strength is now increased by log${f(y.element12())}.
Neutron stars effect is now known - boost to all Stars.`,()=>`Has a great affinity towards Oxygen and to decrease cost for all Stars by ${f(1e3)}.`,()=>`Just another tetravalent metalloid, and so is another ${f(1.4)}x boost to all Stars.`,()=>`One of the Fundamentals of Life and to make all Stars ${t.inflation.vacuum?"delay Cosmic dust hardcap":"boost Solar mass gain"}.`,()=>"From hot area, to increase max level of 'Star system' by 1.",()=>"Extremely reactive to extend max level of 'Planetary system', by another 24 levels.",()=>`Less noble, but Black holes effect scales better.
Black holes effect is now known - ${t.inflation.vacuum?"delay for Preon hardcap":"boost to Solar mass gain"}.`,()=>"Don't forget about it and get a 2x boost to all Stars.",()=>"Get stronger with 1 extra level of 'Star system'.",()=>`A new color and a rare bonus of +^${f(.1)} to Solar mass effect.`,()=>"New alloy allowing Red giants to be added into effective amount of Neutron stars.",()=>`Catalyst for production of Elements. 'Gamma-ray burst' effect increased by Solar mass ^${f(.1)}.
(Effect is equal to ${f(t.collapse.mass**.1,{padding:!0})})`,()=>{let e=y.element24();return`No corrosion, only boost to all Stars that is based on unspent Elements ^${f(e)}.
(Boost is equal to ${g(t.buildings[4][0].current).power(e).format({padding:!0})})`},()=>"Brittle Element, but not the bonus - 1 more level in 'Star system'.",()=>`Any further fusion will be an endothermic process${t.inflation.vacuum?`. Unlock a Stage reset${t.challenges.active===0?" and Intergalactic Stage":""}.`:`, but what next?
Enter Intergalactic space. (Can change active Stage from footer)`}`,()=>`Combined and ready to increase Stage reset reward with every new reached digit of total produced Elements past 48.
(+${f(y.element27())} ${t.strangeness[5][10]>=1?"to the Strange base":"extra Strange quarks"})`,()=>`Slow to react, but will still boost all Stars by ${f(y.element28())}.`],startCost:[0,1e3,4e3,2e4,1e5,1e8,1e10,4e11,8e12,6e13,1e15,1e20,1e22,1e24,14e25,1e28,1e30,1e32,1e35,2e36,1e39,1e41,2e42,3e43,4e44,5e45,1e48,1e50,1e52]},strangenessInfo:[{},{name:["Stronger Discharge","Cheaper Discharge","Free Discharge","Automatic Discharge","Increased Energy","Better improvement","Auto Structures","More toggles","Strange boost","Fundamental boost","Conservation of Mass","Conservation of Energy"],effectText:[()=>"Base Discharge effect is now +1.",()=>`Discharge goal scales slower. (-${f(.5)})`,()=>`Obtain +${f(.5)} bonus Discharge goals.`,()=>"Automatically Discharge upon reaching next goal or spending Energy. (Need to be enabled in Settings)",()=>`Gain more Energy from creating ${t.inflation.vacuum?"Preons, +2":"Particles, +1"}.`,()=>"Research 'Improved Tritium' is now better. (+1)",()=>`Always have auto for ${l.buildingsInfo.name[1][Math.min(t.strangeness[1][6]+1,l.ASRInfo.max[1])]}.`,()=>`First level - ${t.strangeness[1][7]>=1?"Auto await value input and toggle to switch all auto Structures toggles at once":"improve control over auto Structures toggles"}.
Second level - ${t.strangeness[1][7]>=2?"Hover to create and max create Researches toggles":"unlock new toggles for all Upgrade types"}.`,()=>`Unspent Strange quarks will boost Microworld with bonus Discharge goals.
(Current effect: ${l.strangeInfo.stageBoost[1]!==null?`+${f(l.strangeInfo.stageBoost[1],{padding:!0})}`:"none"})`,()=>`Minor boost of ${f(1.3)}x per level to all Microworld Structures.`,()=>"No Mass will be lost when creating Preons.",()=>`Energy is now directly based on current self-made amount of Structures.
This will also increase max levels for Reset automatization.`],cost:[],startCost:[2,1,4,24,2,1,2,4,36,2,16,4e3],scaling:[2.4,4,6,1,4,2.2,2,2,1,1.8,1,1],max:[4,4,2,1,2,4,3,2,1,6,1,1],maxActive:9},{name:["More Moles","Bigger Puddles","More spread","Cloud density","Automatic Vaporization","Auto Structures","Improved Offline","Strange boost","New Structure","Ocean world","Mechanical spread"],effectText:[()=>`Mole production increased by ${f(1.5)}.`,()=>`Puddles produce ${f(1.5)} times more.`,()=>`Increase max level for one of Researches by +1.
Final level will instead unlock a new Upgrade.
(Current effect: ${t.strangeness[2][2]>=1?`max level increased for 'More streams'${t.strangeness[2][2]>=2?" and 'Distributary channel'":""}${t.strangeness[2][2]>=3?", a new Upgrade - 'Tsunami'":""}`:"none"})`,()=>"Decrease requirement per Cloud.",()=>`Automatically Vaporize when reached enough boost from new Clouds. (Need to be enabled in Settings)${t.strangeness[1][11]>=1?`
Second level - Automatically gain 20% of Clouds per second.`:""}`,()=>`Always have auto for ${l.buildingsInfo.name[2][Math.min(t.strangeness[2][5]+1,l.ASRInfo.max[2])]}.`,()=>"Improve warp by making a single tick to be 1 instead 10 seconds.",()=>`Unspent Strange quarks will boost Submerged by improving Puddles.
(Current effect: ${l.strangeInfo.stageBoost[2]!==null?f(l.strangeInfo.stageBoost[2],{padding:!0}):"none"})`,()=>"Current Vacuum state allows for another Submerged Structure.",()=>`Increase ${l.strangeInfo.name[t.strangeness[5][10]]} gained from this Stage reset based on current Cloud amount.
(Current effect: ${f(y.S2Strange9(),{padding:!0})})`,()=>`Increase max level for one of Researches again by +1.
Final level will instead unlock an even better new Upgrade.
(Current effect: ${t.strangeness[2][10]>=1?`max level increased for 'Stronger surface tension'${t.strangeness[2][10]>=2?" and 'Stronger surface stress'":""}${t.strangeness[2][10]>=3?", a new Upgrade - 'Tide'":""}`:"none"})`],cost:[],startCost:[1,2,16,2,24,2,4,36,40,800,6e3],scaling:[1.8,1.8,2,4,650,2,2,1,1,1,2],max:[6,6,3,3,1,5,1,1,1,1,3],maxActive:8},{name:["Faster Accretion","Intense weathering","More levels","Improved Satellites","Automatic Rank","Auto Structures","Upgrade automatization","Strange boost","New Structure","Mass shift","Massive Ranks"],effectText:[()=>`Accretion speed is ${f(1.5)} times faster.`,()=>`Accretion Structures that produce other Structures now do it ${f(1.5)} times faster.`,()=>`Some Rank Researches receive extra Max level.
Final level will instead unlock a new Upgrade.
(Current effect: ${t.strangeness[3][2]>=1?`max level increased for 'Rank boost' (+7)${t.strangeness[3][2]>=2?" and 'Efficient growth' (+2)":""}${t.strangeness[3][2]>=3?", a new Upgrade - 'Hydrostatic equilibrium'":""}`:"none"})`,()=>`Satellites now improve all Accretion Structures with reduced strength (^${f(t.inflation.vacuum?.2:.4)}).`,()=>`Automatically increase Rank when available. (Need to be enabled in Settings)${t.strangeness[1][11]>=1?`
Second level - auto creation of Accretion Structures after reaching cosmic dust hardcap will always keep enough for highest Solar mass conversion.`:""}`,()=>`Always have auto for ${l.buildingsInfo.name[3][Math.min(t.strangeness[3][5]+1,l.ASRInfo.max[3])]}.`,()=>`Always automatically create all ${["Upgrades","Stage Researches","Special Researches"][Math.min(t.strangeness[3][6],2)]} from any Stage. (Need to be enabled in Settings)`,()=>`Unspent Strange quarks will boost Accretion by making its Structures cheaper.
(Current effect: ${l.strangeInfo.stageBoost[3]!==null?f(l.strangeInfo.stageBoost[3],{padding:!0}):"none"})`,()=>`Current Vacuum state allows for another Accretion Structure.
(Not recommended until cheap)`,()=>`Reduce amount of time required to reach Solar mass hardcap by shifting Cosmic dust and Solar mass hardcaps.
Each level allows for ${f(1.4)} times bigger shift. (Automatic)`,()=>"Increase effective Rank by +1."],cost:[],startCost:[1,2,3,9,24,3,12,36,20,2400,6],scaling:[1.8,2.8,2,1,400,2.22,2,1,1,2,6],max:[8,4,3,1,1,4,3,1,1,4,2],maxActive:8},{name:["Hotter Stars","Cheaper Stars","New Upgrade","Main giants","Remnants of past","Automatic Collapse","Auto Structures","Daily gain","Strange boost","New Structure","Neutronium"],effectText:[()=>`All Stars produce ${f(1.5)} times more Elements.`,()=>"Stars are 2 times cheaper.",()=>`Unlock a new Upgrade.
First one is extra good and recommended early.
(Current unlocks: ${t.strangeness[4][2]>=1?`'Helium fusion' (Upgrade)${t.strangeness[4][2]>=2?", 'Planetary nebula' (Stage Research)":""}${t.strangeness[4][2]>=3?", 'White dwarfs' (Collapse Research)":""}`:"none"})`,()=>"10% of Brown dwarfs will turn into Red giants now.",()=>`Elements will not require Collapse for activation.
${t.stage.true>=6||t.strange[0].total>0&&t.event?"Second level will unlock auto creation of Elements. (Need to be enabled in settings)":"(Auto creation of Elements is not yet possible in Interstellar space)"}`,()=>`Automatically Collapse once reached enough boost. (Need to be enabled in Settings)${t.strangeness[1][11]>=1?`
Second level - Star remnants will now be gained automatically.`:""}`,()=>`Always have auto for ${l.buildingsInfo.name[4][Math.min(t.strangeness[4][6]+1,l.ASRInfo.max[4])]}.`,()=>`Increase multiplier of ${l.strangeInfo.name[t.strangeness[5][10]]} gained from export per day by +1 (which is equal to ${f((2+t.strangeness[4][7])/(1+t.strangeness[4][7])*100-100)}% increase).
(${t.strangeness[5][10]>=1?"":"Can claim only full ones. "}Export base is increased by +${f(6.25)}% of highest Stage reset reward even without this Strangeness)`,()=>`Unspent Strange quarks will boost Interstellar by improving all Stars.
(Current effect: ${l.strangeInfo.stageBoost[4]!==null?f(l.strangeInfo.stageBoost[4],{padding:!0}):"none"})`,()=>"Current Vacuum state allows for another Interstellar Structure.",()=>"Improve Neutron Stars strength and improve scaling of '[12] Magnesium' effect."],cost:[],startCost:[1,3,5,5,6,24,3,4,36,20,1600],scaling:[1.8,2.8,2.4,4,8,250,2.22,2,1,1,1.4],max:[8,4,3,2,1,1,4,3,1,1,8],maxActive:9},{name:["Omnipresent reality","Strange gain","Auto Stage","Bigger Nebulas","Denser Clusters","Gravitational bound","Hypercompact stellar system","Auto Structures","New Milestones","Strange boost","Strange growth"],effectText:[()=>t.inflation.vacuum?`Unlock the Void. (Advanced subtab)
Also a new color theme and 20% global speed bonus outside of Void.`:`${l.stageInfo.word[t.strangeness[5][0]+1]} will now be permanent and removed from Stage reset cycle.
Permanent Stages do not affect timer.`,()=>`Gain ${f(1.5)} times more ${l.strangeInfo.name[t.strangeness[5][10]]} from ${t.inflation.vacuum?"":"Interstellar"} Stage resets.`,()=>"Allows to auto reset Stage, has some special settings. (Need to be enabled in Settings)",()=>"Bigger Nebulas, more matter for Accretion. 'Jeans instability' Upgrade is 2 times stronger.",()=>"'Super star cluster' is now even bigger. Effect increased by 3.",()=>t.inflation.vacuum?"Unlock Intergalactic Stage.":"Intergalactic is no longer affected by Collapse reset.",()=>`With this a new Intergalactic Structure can be created.${t.stage.true>=6?" (Can't be Created in current version)":" (Also will increase max level of 'Remnants of past' after creation of that Structure)"}
Second level will increase permanent level of auto Structures.`,()=>{let e=Math.min(t.strangeness[5][7]+(t.strangeness[5][6]>=2?2:1),3);return`Increase permanent level of auto Structures. Next auto is for ${t.buildings[5][e].highest[0]>0?l.buildingsInfo.name[5][e]:"(unknown)"}.`},()=>`Unlock ${t.inflation.vacuum?"Void":"Intergalactic"} Milestones.`,()=>`Unspent Strange quarks will boost Intergalactic by ${t.inflation.vacuum?"delaying Cosmic dust hardcap":"increasing Solar mass gain"}.
(Current effect: ${l.strangeInfo.stageBoost[5]!==null?t.inflation.vacuum||l.stageInfo.activeAll.includes(5)?f(l.strangeInfo.stageBoost[5],{padding:!0}):"awaiting Intergalactic Stage":"none"})`,()=>`Unlock a new Strange Structure that will replace current Stage reset reward, also convert all ${l.strangeInfo.name[Math.min(t.strangeness[5][10],l.strangenessInfo[5].max[10]-1)]} and then produce them, but hardcaps quickly.
(Hardcap delayed by quantity of a higher tier Structure, can be seen in Stats)`],cost:[],startCost:[4,16,2400,8,10,64,21600,40,1600,180,800],scaling:[1,5,1,1.8,1.8,1,3,2,1,1,1],max:[3,1,1,9,9,1,2,2,1,1,1],maxActive:10}],lastUpgrade:[[-1,"upgrades"],[-1,"upgrades"],[-1,"upgrades"],[-1,"upgrades"],[-1,"upgrades"],[-1,"researches"]],lastElement:-1,lastStrangeness:[-1,-1],lastMilestone:[-1,-1],lastChallenge:[-1,-1],milestonesInfo:[{},{name:["Fundamental Matter","Energized"],needText:[()=>`Have at least ${g(l.milestonesInfo[1].need[0]).format()} ${t.inflation.vacuum?"Preons":"Quarks"} at once.`,()=>`Have current Energy reach ${g(l.milestonesInfo[1].need[1]).format()}.`],rewardText:[()=>t.inflation.vacuum?`All Microworld Structures receive ${f(l.milestonesInfo[1].reward[0],{padding:!0})}x boost.`:`Unknown Structure, it doesn't belong to this Universe.
Vacuum instability increased.`,()=>t.inflation.vacuum?`Energy from creating Structures increased by ${f(l.milestonesInfo[1].reward[1])}%. (Rounds down)`:`Improve effect of '[24] Chromium' by +${f(.01)}.`],need:[[1,200],[4,4]],reward:[1,1],scalingOld:[[1e160,1e170,1e180,1e190,1e200,1e220],[24e3,26e3,28e3,3e4,32e3,34e3]]},{name:["A Nebula of Drops","Just a bigger Puddle"],needText:[()=>`Vaporize ${t.inflation.vacuum?"to at least":""} ${g(l.milestonesInfo[2].need[0]).format()} ${t.inflation.vacuum?"Clouds":"Drops at once"}.`,()=>`Have at least ${g(l.milestonesInfo[2].need[1]).format()} Puddles at same time.`],rewardText:[()=>t.inflation.vacuum?`Clouds gain increased by ${f(l.milestonesInfo[2].reward[0],{padding:!0})}.`:"A new Intergalactic Structure. (Nebula)",()=>t.inflation.vacuum?`Puddles are now stronger by ${f(l.milestonesInfo[2].reward[1],{padding:!0})}.`:`Unknown Structure, it doesn't belong to this Universe.
Vacuum instability increased.`],need:[[1,30],[1.5,3]],reward:[1,1],scalingOld:[[1e30,1e33,1e36,1e39,1e42,1e45],[1e3,2500,4e3,5500,7e3,9e3]]},{name:["Cluster of Mass","Satellites of Satellites"],needText:[()=>`Have at least ${g(l.milestonesInfo[3].need[0]).format()} Mass at once.`,()=>`Have more or equal to ${g(l.milestonesInfo[3].need[1]).format()} Satellites${t.inflation.vacuum?" and Subsatellites":""}.`],rewardText:[()=>t.inflation.vacuum?`Accretion speed increased by ${f(l.milestonesInfo[3].reward[0],{padding:!0})}.`:"A new Intergalactic Structure. (Star cluster)",()=>t.inflation.vacuum?`Improve effect of 'Planetary system' base by +${f(l.milestonesInfo[3].reward[1])}.`:`Unknown Structure, it doesn't belong to this Universe.
Vacuum instability increased.`],need:[[1,30],[2.5,1]],reward:[1,1],scalingOld:[[1e32,1e34,1e36,1e38,1e40,1e43,1e46],[20,25,30,35,40,45,50]]},{name:["Supermassive","Biggest of all"],needText:[()=>`Collapse ${t.inflation.vacuum?"":"to"} at least ${g(l.milestonesInfo[4].need[0]).format()} ${t.inflation.vacuum?"Elements":"Solar mass"}.`,()=>`Collapse to ${g(l.milestonesInfo[4].need[1]).format()} Black holes or more.`],rewardText:[()=>t.inflation.vacuum?`Stars produce ${f(l.milestonesInfo[4].reward[0],{padding:!0})} times more Elements.`:"New Intergalactic themed Strangeness.",()=>t.inflation.vacuum?`Preons hardcap delayed by ${f(l.milestonesInfo[4].reward[1],{padding:!0})}.`:`Unknown Structure, it doesn't belong to this Universe.
Vacuum instability increased.`],need:[[8,3],[1,2]],reward:[1,1],scalingOld:[[8e3,1e4,12e3,14e3,16e3,18e3,2e4,22e3],[100,120,140,160,180,200,220,240]]},{name:["Light in the dark","End of Greatness"],needText:[()=>`Have self-made Stars count reach at least ${g(l.milestonesInfo[5].need[0]).format()}.`,()=>`Have ${g(l.milestonesInfo[5].need[1]).format()} Galaxies or more.`],rewardText:[()=>t.inflation.vacuum?`Decrease cost for all Stars by ${f(l.milestonesInfo[5].reward[0],{padding:!0})}.`:"Intergalactic Stage is unlocked with Intestellar, Strange boost is always active now.",()=>t.inflation.vacuum?`Boost per Galaxy is now +${f(l.milestonesInfo[5].reward[1])} bigger.`:`Unknown Structure, it cannot exist in false Vacuum.
Vacuum instability increased.`],need:[[1.5,3],[2,0]],reward:[5,25],scalingOld:[[1500,1600,1700,1800,1900,2e3],[2,4,8,12,16,20]]}],challengesInfo:{name:["Void"],description:["Result of Vacuum Instabillity, investigate at your own will"],effectText:[()=>{let e=t.challenges.void;if(e[1]<1)return'<span class="orangeText">- Unknown, but maybe with more Energy</span>';let s=`<span class="orangeText">- Energy gain is decreased by 20%
- Discharge base reduced</span>`;return e[1]>=3&&(s+=`

<span class="blueText">- ${e[2]>=1?`Effective Drops softcap is stronger (^${f(.2)} > ^${f(.1)})
- Self-made Drops are no longer immune to effective Drops softcap
- Puddles are 200 times weaker
- 'Water spread' scales slower`:"Unknown, but maybe if deeper"}</span>`),e[1]>=2&&(s+=`

<span class="grayText">- ${e[3]>=1?`'Jovian planet' Rank softcap starts immediately (^${f(.92)})
- Softcap is stronger after reaching that Rank (^${f(.84)})`:"Unknown, but maybe if more Mass"}</span>`),e[3]>=5&&(s+=`

<span class="darkorchidText">- ${e[4]>=1?`Solar mass is 40 times weaker
- Solar mass effect scales slower (-^${f(.2)})
- 'Star system' is weaker`:"Unknown, but maybe if long enough"}</span>`),s}],needText:[[[],["Perform Discharge","Get first level of 'Accretion'","Get second level of 'Accretion'"],["Have more than 1 Cloud","Have more than 1e4 Clouds"],["Reach 'Meteoroid' Rank","Reach 'Asteroid' Rank","Reach 'Planet' Rank","Reach 'Jovian planet' Rank","Reach 'Protostar' Rank"],["Cause the Collapse","Get first Red giant","Get first Neutron star","Get first Black hole"],[]]],rewardText:[[[],["'Fundamental boost' (Microworld)","'Conservation of Mass' (Microworld)","'Massive Ranks' (Accretion)"],["'Ocean world' (Submerged)","'Mechanical spread' (Submerged)"],["Multiple max level increases","Multiple max level increases","Multiple max level increases","Multiple max level increases","'Strange growth' (Intergalactic)"],["'New Milestones' (Intergalactic)","'Conservation of Energy' (Microworld)","'Neutronium' (Interstellar)","'Mass shift' (Accretion)"],[]]],color:["darkviolet"]},historyStorage:{stage:[]}},qe=(e,s)=>Math.log(e)/Math.log(s),C=e=>e.slice(0),H=e=>{if(typeof e!="object"||e===null)return e;let s;if(Array.isArray(e)){s=[];for(let r=0;r<e.length;r++)s.push(H(e[r]))}else{s={};for(let r in e)s[r]=H(e[r])}return s},T=(e,s)=>{let r=[];for(let o=0;o<e;o++)r.push(s);return r};for(let e=0;e<l.buildingsInfo.startCost.length;e++){l.buildingsInfo.firstCost[e]=C(l.buildingsInfo.startCost[e]),l.buildingsInfo.producing[e]=[];for(let s=0;s<l.buildingsInfo.startCost[e].length;s++)l.buildingsInfo.producing[e].push([0,0])}for(let e of["researches","researchesExtra","strangeness"]){let s=l[`${e}Info`];for(let r=1;r<s.length;r++)s[r].cost=C(s[r].startCost)}Object.assign(t,{upgrades:[[],T(l.upgradesInfo[1].startCost.length,0),T(l.upgradesInfo[2].startCost.length,0),T(l.upgradesInfo[3].startCost.length,0),T(l.upgradesInfo[4].startCost.length,0),T(l.upgradesInfo[5].startCost.length,0)],researches:[[],T(l.researchesInfo[1].startCost.length,0),T(l.researchesInfo[2].startCost.length,0),T(l.researchesInfo[3].startCost.length,0),T(l.researchesInfo[4].startCost.length,0),T(l.researchesInfo[5].startCost.length,0)],researchesExtra:[[],T(l.researchesExtraInfo[1].startCost.length,0),T(l.researchesExtraInfo[2].startCost.length,0),T(l.researchesExtraInfo[3].startCost.length,0),T(l.researchesExtraInfo[4].startCost.length,0),T(l.researchesExtraInfo[5].startCost.length,0)],researchesAuto:T(l.researchesAutoInfo.costRange.length,0),ASR:T(l.ASRInfo.costRange.length,0),elements:T(l.elementsInfo.startCost.length,0),strangeness:[[],T(l.strangenessInfo[1].startCost.length,0),T(l.strangenessInfo[2].startCost.length,0),T(l.strangenessInfo[3].startCost.length,0),T(l.strangenessInfo[4].startCost.length,0),T(l.strangenessInfo[5].startCost.length,0)],milestones:[[],T(l.milestonesInfo[1].need.length,0),T(l.milestonesInfo[2].need.length,0),T(l.milestonesInfo[3].need.length,0),T(l.milestonesInfo[4].need.length,0),T(l.milestonesInfo[5].need.length,0)]});Object.assign(t.toggles,{normal:T(document.getElementsByClassName("toggleNormal").length,!1),confirm:T(document.getElementsByClassName("toggleConfirm").length,"All"),buildings:[[],T(t.buildings[1].length,!1),T(t.buildings[2].length,!1),T(t.buildings[3].length,!1),T(t.buildings[4].length,!1),T(t.buildings[5].length,!1)],hover:T(document.getElementsByClassName("toggleHover").length,!1),max:T(document.getElementsByClassName("toggleMax").length,!1),auto:T(document.getElementsByClassName("toggleAuto").length,!1)});var v=H(t),je=e=>{var i;if(e.player!==void 0&&(e=e.player),e.vaporization===void 0)throw new ReferenceError("This save file is not from this game or too old");e.version===void 0&&(e.version="0.0.0"),Se(!!((i=e.inflation)!=null&&i.vacuum));let s=e.version;if(s!==v.version){if(e.version==="0.0.0"&&(e.version="v0.0.1",e.researchesExtra=[]),e.version==="v0.0.1"&&(e.version="v0.0.2",e.stage.resets=e.stage.current-1),e.version==="v0.0.2"&&(e.version="v0.0.3",e.accretion=H(v.accretion)),e.version==="v0.0.3"&&(e.version="v0.0.4",delete e.energy,delete e.buyToggle),e.version==="v0.0.4"&&(e.version="v0.0.5",e.elements=C(v.elements),e.collapse=H(v.collapse)),(e.version==="v0.0.5"||e.version==="v0.0.6")&&(e.version="v0.0.7",e.fileName=v.fileName,e.separator=C(v.separator),e.strange=H(v.strange),e.strangeness=H(v.strangeness),e.vaporization.input=3,e.stage.input=20),e.version==="v0.0.7"||e.version==="v0.0.8"){e.version="v0.0.9",e.stage.export=86400,e.stage.active=Math.min(e.stage.current,4);let u=e.stage.active,a=e.buildings;e.buildings=H(v.buildings),e.buildings[u]=a;let c=e.upgrades;e.upgrades=H(v.upgrades),e.upgrades[u]=c;let d=e.researches;e.researches=H(v.researches),e.researches[u]=d;let p=e.researchesExtra;e.researchesExtra=H(v.researchesExtra),e.researchesExtra[u]=p,e.strangeness.length<5&&e.strangeness.unshift([]),e.ASR=C(v.ASR),e.milestones=H(v.milestones)}if((e.version==="v0.0.9"||e.version==="v0.1.0")&&(e.version="v0.1.1",e.discharge.energy=0,e.collapse.massMax=e.collapse.mass,delete e.discharge.energyCur),e.version==="v0.1.1"){e.version="v0.1.2";for(let u=1;u<e.buildings.length;u++){let a=e.buildings[u];for(let c=0;c<a.length;c++)a[c].current=g(a[c].current).toArray(),a[c].total=g(a[c].total).toArray(),a[c].trueTotal=g(a[c].total).toArray(),a[c].highest=[0,0]}e.vaporization.clouds=g(e.vaporization.clouds).toArray(),e.strange[0].true!==void 0&&(e.strange[0].current=e.strange[0].true),e.strange[0].total=e.strange[0].current,e.inflation=H(v.inflation),delete e.vaporization.current,delete e.strange[0].true,e.time.offline=0}if(e.version==="v0.1.2"&&(e.version="v0.1.3",e.stage.best=0,e.stage.time=0,e.inflation.age=0,e.discharge.energyMax=e.discharge.energy,e.vaporization.cloudsMax=C(e.vaporization.clouds)),e.version==="v0.1.3"&&(e.version="v0.1.4",delete e.collapse.disabled,delete e.collapse.inputM,delete e.collapse.inputS),(e.version==="v0.1.4"||e.version==="v0.1.5")&&(e.version="v0.1.6",e.collapse.show=0,e.collapse.input=2,e.history=H(v.history),e.challenges=H(v.challenges),delete e.time.disabled,delete e.discharge.unlock,e.toggles=H(v.toggles),e.inflation.vacuum&&(e.strangeness[3][9]>0&&(e.strange[0].current+=(4**e.strangeness[3][9]-1)*8,e.strangeness[3][9]=0),e.strangeness[5][2]>0&&(e.strange[0].current+=50,e.strangeness[5][2]=0))),e.version==="v0.1.6"&&(e.version="v0.1.7",e.intervals=H(v.intervals),e.buildings[5].length>4&&(e.buildings[5].length=4),e.saveUpdate016!==void 0&&(e.strangeness[2].splice(6,1),e.strangeness[4].splice(8,1)),delete e.saveUpdate016,delete e.accretion.input,delete e.collapse.elementsMax),e.version==="v0.1.7"&&(e.version="v0.1.8",e.event=!1,e.time.online=e.inflation.age,e.time.universe=e.inflation.age,e.time.stage=e.stage.time,delete e.events,e.inflation.vacuum&&(e.milestones[2][1]=0,e.milestones[4][1]=0)),e.version==="v0.1.8"&&(e.version="v0.1.9",e.toggles.normal=C(v.toggles.normal),e.toggles.hover=C(v.toggles.hover),e.toggles.max=C(v.toggles.max),e.researchesAuto=C(v.researchesAuto),delete e.discharge.bonus),e.version!==v.version)throw new ReferenceError("Save file version is higher than game version")}for(let u=1;u<v.buildings.length;u++){isNaN(e.toggles.shop.wait[u])&&(e.toggles.shop.wait[u]=2);for(let a=e.buildings[u].length;a<v.buildings[u].length;a++)e.buildings[u][a]=H(v.buildings[u][a])}for(let u=e.strange.length;u<v.strange.length;u++)e.strange[u]=H(v.strange[u]);for(let u=1;u<v.upgrades.length;u++)for(let a=e.upgrades[u].length;a<v.upgrades[u].length;a++)e.upgrades[u][a]=0;for(let u=1;u<v.researches.length;u++)for(let a=e.researches[u].length;a<v.researches[u].length;a++)e.researches[u][a]=0;for(let u=1;u<v.researchesExtra.length;u++)for(let a=e.researchesExtra[u].length;a<v.researchesExtra[u].length;a++)e.researchesExtra[u][a]=0;for(let u=e.researchesAuto.length;u<v.researchesAuto.length;u++)e.researchesAuto[u]=0;for(let u=e.ASR.length;u<v.ASR.length;u++)e.ASR[u]=0;for(let u=e.elements.length;u<v.elements.length;u++)e.elements[u]=0;for(let u=0;u<v.strangeness.length;u++)for(let a=e.strangeness[u].length;a<v.strangeness[u].length;a++)e.strangeness[u][a]=0;for(let u=0;u<v.milestones.length;u++)for(let a=e.milestones[u].length;a<v.milestones[u].length;a++)e.milestones[u][a]=0;for(let u=1;u<v.toggles.buildings.length;u++)for(let a=e.toggles.buildings[u].length;a<v.toggles.buildings[u].length;a++)e.toggles.buildings[u][a]=!1;for(let u=e.toggles.confirm.length;u<v.toggles.confirm.length;u++)e.toggles.confirm[u]="All";for(let u=e.toggles.normal.length;u<v.toggles.normal.length;u++)e.toggles.normal[u]=v.toggles.normal[u];for(let u=e.toggles.hover.length;u<v.toggles.hover.length;u++)e.toggles.hover[u]=!1;for(let u=e.toggles.max.length;u<v.toggles.max.length;u++)e.toggles.max[u]=!1;for(let u=e.toggles.auto.length;u<v.toggles.auto.length;u++)e.toggles.auto[u]=!1;e.accretion.rank>l.accretionInfo.rankCost.length-1&&(e.accretion.rank=l.accretionInfo.rankCost.length-1),e.intervals.main<20&&(e.intervals.main=20),Object.assign(t,e),l.debug.errorID=!0,l.debug.errorQuery=!0,l.debug.errorGain=!0,l.vaporizationInfo.research0=0,l.vaporizationInfo.research1=0,l.accretionInfo.rankCost[4]=t.stage.true>=4||t.stage.true===3&&t.event?5e29:0;let r=t.buildings[4];l.collapseInfo.trueStars=r[1].true+r[2].true+r[3].true+r[4].true+r[5].true,l.historyStorage.stage=t.history.stage.list,t.inflation.vacuum?(t.buildings[2][0].current=g(t.buildings[1][5].current).divide("6.02214076e23").toArray(),t.buildings[3][0].current=g(t.buildings[1][0].current).multiply("1.78266192e-33").toArray()):t.accretion.rank===0&&(t.buildings[3][0].current=[5.9722,27]);for(let u=1;u<v.milestones.length;u++)for(let a=0;a<v.milestones[u].length;a++)Me(a,u);for(let u=1;u<v.strangeness.length;u++){let a=t.strangeness[u],c=l.strangenessInfo[u].max;for(let d=0;d<l.strangenessInfo[u].maxActive;d++)A(d,u,"strangeness"),a[d]>c[d]&&(a[d]=c[d],V(d,u,"strangeness"))}if(t.researchesAuto[0]<t.strangeness[3][6]&&(t.researchesAuto[0]=t.strangeness[3][6]),t.researchesAuto[1]<1&&t.strangeness[1][7]>=1&&(t.researchesAuto[1]=1),t.inflation.vacuum)for(let u=0;u<v.researchesAuto.length;u++)A(u,0,"researchesAuto");for(let u=1;u<=5;u++){A(0,u,"ASR");let a=t.researchesExtra[u],c=l.researchesExtraInfo[u].max;for(let m=0;m<l.researchesExtraInfo[u].maxActive;m++)A(m,u,"researchesExtra"),a[m]>c[m]&&(a[m]=c[m]);let d=t.researches[u],p=l.researchesInfo[u].max;for(let m=0;m<l.researchesInfo[u].maxActive;m++)A(m,u,"researches"),d[m]>p[m]&&(d[m]=p[m])}Z(),$e(!0),re(),t.inflation.vacuum||lt();let o=localStorage.getItem("theme");Te(o===null?null:Number(o)),n("saveFileNameInput").value=t.fileName,n("mainInterval").value=`${t.intervals.main}`,n("numbersInterval").value=`${t.intervals.numbers}`,n("visualInterval").value=`${t.intervals.visual/1e3}`,n("autoSaveInterval").value=`${t.intervals.autoSave/1e3}`,n("thousandSeparator").value=t.separator[0],n("decimalPoint").value=t.separator[1],n("stageInput").value=f(t.stage.input,{type:"input"}),n("vaporizationInput").value=f(t.vaporization.input,{type:"input"}),n("collapseStarsInput").value=f(t.collapse.input,{type:"input"}),n("stageResetsSave").value=`${t.history.stage.input[0]}`,n("stageResetsKeep").value=`${t.history.stage.input[1]}`;for(let u=0;u<v.toggles.normal.length;u++)D(u,"normal");for(let u=0;u<v.toggles.confirm.length;u++)Ge(u);for(let u=0;u<v.toggles.hover.length;u++)D(u,"hover");for(let u=0;u<v.toggles.max.length;u++)D(u,"max");for(let u=0;u<v.toggles.auto.length;u++)D(u,"auto");return ue(),s},Tt=()=>{n("versionText",!1)===null&&(n("versionInfo").innerHTML=`<div style="display: flex; flex-direction: column; justify-content: space-between; align-items: center; width: clamp(42vw, 36em, 80vw); height: clamp(26vh, 36em, 90vh); background-color: var(--window-color); border: 3px solid var(--window-border); border-radius: 12px; padding: 1em 1em 0.8em; row-gap: 1em;">
        <div id="versionText" style="width: 100%; overflow-y: auto;">
            <label>v0.1.9</label><p>- More Stage 6 balance
- New stats for Stage 6
- Added automatization Researches
- Export reward is now weaker
- Updated time format and added new one
- Warp, Offline and related Strangeness reworked
- Max export and Offline time is smaller</p>
            <label>v0.1.8</label><p>- Stage 5 and 6 small balance changes
- Solar mass requirement is removed if own a Galaxy
- Upgrades and Researches merged (tab renamed)
- Strangeness auto update description
- Effects for all Upgrade types are expanded
- Some stats moved into Stage tab
- New stats for Stages 1, 3, 6
- Added new save options (copy to clipboard, load from string)
- Small visual changes
- Added option to keep mouse events for Mobile device support
- Support settings are now saved on page reload</p>
            <label>v0.1.7</label><p>- New content (Void)
- Further balance and quality of life changes
- Removed some Strangeness
- Max Offline is now based on Stage resets
- Offline storage no longer decreases
- Export base is now improved by best Stage reset
- Updated logic for entering and leaving Elements subtab
- Warp minimum value is smaller and calculated better
- Discharge now needs an actual reason
- Fixed import not working on some Mobile devices
- Art, themes and overall small visual updates
- Updated numbers to move less, also to use new format</p>
            <label>v0.1.6</label><p>- Massive rebalance and reworks for all Stages
- Auto Collapse reworked
- Small changes to auto Vaporization
- New stats for Stages 1, 2 and 3
- New notifications
- Removed almost all Automatization Researches
- Export reward now unlocked for free
- Elements will show effects after Stage reset
- Descriptions no longer reset when changing active Stage
- More quality of life improvements
- More work on Mobile device and Screen reader supports</p>
            <label>v0.1.5</label><p>- Stage 6 minor balance changes
- Images no longer unload when active Stage changes
- Elements subtab can be entered from any Stage now or turned into a tab
- Footer now affects page height
- Many small changes to improve quality of life
- 'Any' make toggle is now always strict, related button removed
- More stats for save files
- New hotkeys
- Screen reader support rework, related tab removed</p>
            <label>v0.1.4</label><p>- Warps now waste Offline
- Max Offline from Upgrades decreased
- Custom scrolls
- Notifications
- Fixed and updated Mobile device and Screen reader supports</p>
            <label>v0.1.3</label><p>- Stage 6 balance changes
- Stage 2 minor balance
- New stats for Stages 3, 4 and 5
- Replay event button

- History for Stage resets
- 2 new hotkeys for unlockable toggles

- Warp nerfed and now has a minimum value
- Automatically made Structures/Upgrades no longer visually update numbers</p>
            <label>v0.1.2</label><p>- New content (Vacuum)
- Offline time reworked
- Added version window (removed automatic change log)
- Removed option to remove text movement (always on now)

- New color theme
- Offline warp unlocked instantly now
- New stats for Stage 4

- Auto Structures correctly spends currency now</p>
            <label>v0.1.1</label><p>- More balance changes for Stage 5
- New stats for Stages 2 and 4
- New hotkeys to change active Stage</p>
            <label>v0.1.0</label><p>- New content and balance changes for the end of Stage 5
- New stats for Stage 5</p>
            <label>v0.0.9</label><p>- New content (Milestones)
- Stage 4 speed up
- Fixed export reward not being saved into exported file

- Fixed F1 - F12 buttons working as digits
- New event

- Max Offline is increased by 2 times

- Some quick balance changes for Stages 3 and 5</p>
            <label>v0.0.8</label><p>- Minor speed up to all Stages past first one</p>
            <label>v0.0.7</label><p>- New content (Stage 5)
- Stage 1 rework
- Self-made Structures stat moved into Stage tab
- Hotkeys for resets
- Keyboard no longer highlights anything
- New faster number format

- Numpad can now be used as hotkeys

- Save file name can display stats now</p>
            <label>v0.0.6</label><p>- Hotkeys can be seen now

- Option to remove text movement
- Ability to rename save file</p>
            <label>v0.0.5</label><p>- New content (Stage 4)
- Basic loading screen
- Full visual update
- New formula for multi creation of Structures
- Visual display to show how many Structures can be made

- Elements will still show effects after Collapse
- Improved transition when changing themes
- Fixed creating automatization Research when can't afford it

- Added hotkeys</p>
            <label>v0.0.4</label><p>- Buffed all Stages
- Added events for early Stages
- Visual update to stats
- Intervals have been reset

- Numbers are now formated

- New stat for Stage 3</p>
            <label>v0.0.3</label><p>- New content (Stage 3)
- Stage 2 extended
- Max Offline time is now 2 times longer
- Offline time calculated better
- Researches auto update description
- Some new stats</p>
            <label>v0.0.2</label><p>- Stats subtab
- Stage resets stat</p>
            <label>v0.0.1</label><p>- Stage 2 full rework
- Introduced automatic changelog
- Auto Structures no longer wait before making first one

- Mobile device support

- Upgrades auto update description</p>
        </div>
        <button type="button" id="closeVersionInfo" style="flex-shrink: 0; width: 6em; border-radius: 4px; font-size: 0.92em;">Close</button>
    </div>`,document.head.appendChild(document.createElement("style")).textContent="#versionText label { font-size: 1.18em; } #versionText p { line-height: 1.3em; white-space: pre-line; color: var(--white-text); margin-top: 0.2em; margin-bottom: 1.4em; } #versionText p:last-of-type { margin-bottom: 0; }",n("closeVersionInfo").addEventListener("click",()=>{n("versionInfo").style.display="none"}))};var It=e=>{if(e.code==="Tab"){document.body.classList.add("outlineOnFocus");return}else{let i=document.activeElement.type;if(i==="text"||i==="number")return;document.body.classList.remove("outlineOnFocus")}if(l.paused||e.ctrlKey||e.altKey)return;let{key:s,code:r}=e,o=Number(r.slice(-1));if(isNaN(o)){if(s.length===1){let i=(t.toggles.normal[0]?s:r.replace("Key","")).toLowerCase();e.shiftKey?i==="a"&&D(0,"buildings",!0):i==="w"?(e.preventDefault(),ft()):i==="s"?Ve():i==="d"?l.stageInfo.activeAll.includes(1)&&We():i==="v"?l.stageInfo.activeAll.includes(2)&&Qe():i==="r"?l.stageInfo.activeAll.includes(3)&&_e():i==="c"&&l.stageInfo.activeAll.includes(4)&&Ke()}else if(s==="ArrowLeft"||s==="ArrowRight"){if(e.repeat)return;if(e.shiftKey){let i=l.stageInfo.activeAll;if(i.length===1)return;let u=i.indexOf(t.stage.active);s==="ArrowLeft"?(u<=0?u=i.length-1:u--,ie(i[u])):(u>=i.length-1?u=0:u++,ie(i[u]))}else{let i=l.tabList.tabs,u=i.indexOf(l.tab);if(s==="ArrowLeft"){do u<=0?u=i.length-1:u--;while(!se(i[u]));q(i[u])}else{do u>=i.length-1?u=0:u++;while(!se(i[u]));q(i[u])}}}else if(s==="ArrowDown"||s==="ArrowUp"){let i=l.subtab[`${l.tab}Current`];if(e.shiftKey||e.repeat||i===void 0)return;let u=l.tabList[`${l.tab}Subtabs`],a=u.indexOf(i);if(s==="ArrowDown"){do a<=0?a=u.length-1:a--;while(!se(l.tab,u[a]));q(l.tab,u[a])}else{do a>=u.length-1?a=0:a++;while(!se(l.tab,u[a]));q(l.tab,u[a])}}}else{let i=e.shiftKey;if(isNaN(Number(s))){if(r===""||r[0]==="F")return;i||(i=!0,e.preventDefault())}if(i){if(e.repeat)return;D(o,"buildings",!0)}else pe(o)}};var n=(e,s=!0)=>{if(!s)return document.getElementById(e);let r=I.cache.idMap.get(e);if(r===void 0){let o=document.getElementById(e);if(o===null)throw l.debug.errorID&&(l.debug.errorID=!1,L(`Error encountered, ID - '${e}' doesn't exist`),setTimeout(()=>{l.debug.errorID=!0},6e4)),new ReferenceError(`ID - '${e}' doesn't exist`);return I.cache.idMap.set(e,o),o}return r},ke=e=>{let s=I.cache.classMap.get(e);if(s===void 0){let r=document.getElementsByClassName(e);return I.cache.classMap.set(e,r),r}return s},F=e=>{let s=I.cache.queryMap.get(e);if(s===void 0){let r=document.querySelector(e);if(r===null)throw l.debug.errorQuery&&(l.debug.errorQuery=!1,L(`Error encountered, Query - '${e}' failed to find anything`),setTimeout(()=>{l.debug.errorQuery=!0},6e4)),new ReferenceError(`Query - '${e}' failed`);return I.cache.queryMap.set(e,r),r}return s},Xe=()=>{let e=t.time,s=Date.now(),r=(s-e.updated)/1e3;return e.updated=s,e.offline=Math.min(e.offline+r,Ae()),t.stage.export=Math.min(t.stage.export+r,86400),r},J=()=>{let e=l.intervalsId,s=t.intervals,r=l.paused;clearInterval(e.main),clearInterval(e.numbers),clearInterval(e.visual),clearInterval(e.autoSave),e.main=r?void 0:setInterval(Pe,s.main),e.numbers=r?void 0:setInterval(W,s.numbers),e.visual=r?void 0:setInterval(te,s.visual),e.autoSave=r?void 0:setInterval(Ie,s.autoSave)},Ie=async(e=!1)=>{if(l.paused)return L("No saving while game is paused"),null;try{t.history.stage.list=l.historyStorage.stage.slice(0,t.history.stage.input[0]);let s=btoa(JSON.stringify(t));return e||(localStorage.setItem("save",s),clearInterval(l.intervalsId.autoSave),l.intervalsId.autoSave=setInterval(Ie,t.intervals.autoSave),n("isSaved").textContent="Saved",l.lastSave=0),s}catch(s){R(`Failed to save game
Full error: '${s}'`)}return null},Nt=e=>{if(l.paused)return L("No loading while game is paused");l.paused=!0,J();try{let s=je(JSON.parse(atob(e)));l.lastSave=Xe(),L(`This save is ${f(l.lastSave,{type:"time",padding:!1})} old. Save file version is ${s}`),G("reload")}catch(s){R(`Incorrect save file format
Full error: '${s}'`)}l.paused=!1,J()},Ht=async()=>{if(t.strange[0].total>0&&t.stage.export>0){let r=t.strangeness[5][10],o=Re(),i;r>=1?(i=t.stage.export*o/86400/1e12**r,t.stage.export=0):(i=Math.floor(t.stage.export*o/86400),t.stage.export-=i*86400/o),t.strange[r].current+=i,t.strange[r].total+=i,r===0&&Z()}let e=await Ie(!0);if(e===null)return;let s=document.createElement("a");s.href=`data:text/plain,${e}`,s.download=dt(),s.click()},Dt=async()=>{let e=await ut(`Available options:
'Copy' - copy save file to clipboard
'Delete' - delete your save file
'Clear' - clear all domain data
Or insert save file string here to load it`);if(e===null||e==="")return;let s=e.toLowerCase();if(s==="copy"){let r=await Ie(!0);r!==null&&navigator.clipboard.writeText(r)}else if(s==="delete"||s==="clear")l.paused=!0,J(),s==="delete"?localStorage.removeItem("save"):localStorage.clear(),window.location.reload(),R("Awaiting page refresh");else if(s==="achievement")L("Unlocked a new Achievement");else if(s==="slow"||s==="free")L("Game speed was increased by 1x");else if(s==="neutronium"||s==="element0")L(`${l.elementsInfo.effectText[0]().replace("this","Elements")}`);else{if(e.length<20)return void R(`Input '${e}' doesn't match anything`);if(!await O(`Press 'Confirm' to load input as a save file
(Input is too long to be displayed)`))return;Nt(e)}},zt=()=>{let e=n("saveFileNameInput"),s=e.value.length===0?v.fileName:e.value.replaceAll(/[\\/:*?"<>|]/g,"_");try{btoa(s),t.fileName=s,e.value=s}catch(r){R(`Save file name is not allowed
Full error: '${r}'`)}},dt=()=>{let e=t.fileName,s=["[stage]","[true]","[strange]","[matter]","[vacuum]","[date]","[time]"],r=[l.stageInfo.word[t.stage.active],l.stageInfo.word[t.stage.true],`${l.strangeInfo.gain(t.stage.active)}`,`${l.strangeInfo.name[t.strangeness[5][10]]}`,`${t.inflation.vacuum}`,kt("dateDMY"),kt("timeHMS")];for(let o=0;o<s.length;o++)e=e.replaceAll(s[o],r[o]);return`${e}.txt`},kt=e=>{let s=new Date;switch(e){case"dateDMY":{let r=`${s.getDate()}`.padStart(2,"0"),o=`${s.getMonth()+1}`.padStart(2,"0");return`${r}.${o}.${s.getFullYear()}`}case"timeHMS":{let r=`${s.getMinutes()}`.padStart(2,"0"),o=`${s.getSeconds()}`.padStart(2,"0");return`${s.getHours()}-${r}-${o}`}}},z=(e,s)=>{t.toggles.hover[0]&&t.strangeness[1][7]>=2&&_(e,t.stage.active,s),s==="elements"?l.lastElement=e:l.lastUpgrade[t.stage.active]=[e,s],xe(e,s)},ve=(e,s,r)=>{r==="strangeness"?l.lastStrangeness=[e,s]:l.lastMilestone=[e,s],Ee(e,s,r)},Ye=(e,s)=>{s==="challenge"?(l.lastChallenge[0]=e,me(e)):(l.lastChallenge[1]=e,Le(e))},ft=async()=>{if(l.paused)return L("No warping while game is paused");let e=t.strangeness[2][6]>=1;if(await O(`Do you wish to Warp ${f(t.time.offline,{type:"time",padding:!1})} forward?
(1 tick is ${e?"1 second":"10 seconds"})`)){if(t.time.offline<60)return void R("Need at least 1 minute in Offline storage");l.paused=!0,J(),n("alertMain").style.display="none",n("warpMain").style.display="",n("blocker").style.display="",Pt(t.time.offline,e?1:10)}},Pt=(e,s)=>{l.screenReader&&n("warpMain").setAttribute("aria-valuetext",`${f(100-e/t.time.offline*100)}% done`),n("warpRemains").textContent=f(e,{type:"time"}),n("warpPercentage").textContent=f(100-e/t.time.offline*100,{padding:!0});let r=Math.min(s*600,e);e-=r;try{Pe(r,s)}catch(o){return Rt(),void R(`Warp failed due to Error:
${o}`)}e>0?setTimeout(Pt,0,e,s):Rt()},Rt=()=>{t.time.offline=0,L(`Warp ended after ${f(Xe(),{type:"time",padding:!1})}`),l.paused=!1,J(),n("blocker").style.display="none",n("warpMain").style.display="none",n("alertMain").style.display=""},Ot=async()=>{if(l.paused)return L("Game is already paused");l.paused=!0,J(),await R("Game is currently paused. Press 'confirm' to unpause it. Time spent here will be moved into Offline storage");let e=Xe();L(`Game was paused for ${f(e,{type:"time",padding:!1})}`),l.lastSave+=e,l.paused=!1,J(),W(),te()};try{$t();let e=localStorage.getItem("support");if(e!==null){let a=(c,d,p=!1)=>{let m=!1;if(!p){let x=localStorage.getItem("support");m=x[c+1]==="F",localStorage.setItem("support",`${x.slice(0,c+1)}${m?"T":"F"}${x.slice(c+2,x.length)}`)}d==="SR"&&c===0&&(l.supportSettings[0]=m);let b=n(`${d}Toggle${c}`);return m?(b.style.color="",b.style.borderColor="",b.textContent="ON"):(b.style.color="var(--red-text)",b.style.borderColor="crimson",b.textContent="OFF"),m};if(e[0]==="M"){let c=n("MDMainToggle");c.textContent="ON",c.style.color="var(--red-text)",c.style.borderColor="crimson",l.mobileDevice=!0;let d='input[type = "image"], img { -webkit-touch-callout: none; }';n("MDMessage1",!1).remove(),n("file").accept="";let p=document.createElement("div");p.innerHTML='<button type="button" id="strangenessPage1" class="stage1borderImage hollowButton">1</button><button type="button" id="strangenessPage2" class="stage2borderImage hollowButton">2</button><button type="button" id="strangenessPage3" class="stage3borderImage hollowButton">3</button><button type="button" id="strangenessPage4" class="stage4borderImage hollowButton">4</button><button type="button" id="strangenessPage5" class="stage5borderImage hollowButton">5</button><button type="button" id="strangenessCreate" class="hollowButton" style="width: unset; padding: 0 0.4em;">Create</button>',n("strangenessResearch").append(p),document.head.appendChild(document.createElement("style")).textContent=d+"#strangenessResearch > div { display: flex; justify-content: center; column-gap: 0.3em; } #strangenessResearch > div > button { width: 2.08em; height: calc(2.08em - 2px); border-top: none; border-radius: 0 0 4px 4px; }";let m=document.createElement("li");m.innerHTML='<label>Remove mouse hover events<button type="button" id="MDToggle0" class="specialToggle">ON</button></label>',n("MDLi").after(m),n("MDToggle0").addEventListener("click",async()=>{await O(`Changing this setting will reload the page, confirm?
(Game will not autosave)`)&&(a(0,"MD"),window.location.reload())}),e[1]==="F"&&a(0,"MD",!0)}else if(e[0]==="S"){let c=n("SRMainToggle");c.textContent="ON",c.style.color="var(--red-text)",c.style.borderColor="crimson",l.screenReader=!0,n("SRMessage1",!1).remove();let d=document.createElement("article");d.innerHTML='<h3>Information for Screen reader</h3><p id="SRTab" aria-live="polite"></p><p id="SRStage" aria-live="polite"></p><p id="SRMain" aria-live="assertive"></p>',d.classList.add("reader"),n("fakeFooter").before(d);let p=document.createElement("li");p.innerHTML='<label>No tab index on created Upgrades<button type="button" id="SRToggle0" class="specialToggle">ON</button></label>';let m=document.createElement("li");m.innerHTML='<label>No tab index on primary buttons<button type="button" id="SRToggle1" class="specialToggle">ON</button></label>',n("SRLi").after(p,m),n("SRToggle0").addEventListener("click",()=>{a(0,"SR"),G("reload");for(let x=1;x<t.strangeness.length;x++)for(let w=0;w<l.strangenessInfo[x].maxActive;w++)V(w,x,"strangeness")}),e[1]==="F"&&a(0,"SR",!0);let b=(x=!1)=>{let w=a(1,"SR",x)?-1:0;n("stageReset").tabIndex=w,n("reset1Button").tabIndex=w;for(let M=1;M<I.longestBuilding;M++)n(`building${M}Btn`).tabIndex=w,n(`toggleBuilding${M}`).tabIndex=w;n("toggleBuilding0").tabIndex=w;for(let M of l.tabList.tabs){n(`${M}TabBtn`).tabIndex=w;let S=l.tabList[`${M}Subtabs`];if(S!==void 0)for(let E of S)n(`${M}SubtabBtn${E}`).tabIndex=w}for(let M=1;M<l.stageInfo.word.length;M++)n(`${l.stageInfo.word[M]}Switch`).tabIndex=w};n("SRToggle1").addEventListener("click",()=>{b()}),e[2]==="F"&&b(!0)}}let s,r=localStorage.getItem("save");if(r!==null){let a=JSON.parse(atob(r)),c=je(a);l.lastSave=Xe(),s=`Welcome back, you were away for ${f(l.lastSave,{type:"time",padding:!1})}
${c!==t.version?`Game have been updated from ${c} to ${t.version}`:`Current version is ${t.version}`}`}else Se(!1),je(H(v)),s=`Welcome to 'Fundamental' ${t.version}, a test-project created by awWhy
(This idle game is not meant to be fast)`;if(t.toggles.normal[1]){let a=n("upgradeSubtabElements",!1);a.id="ElementsTab",n("upgradeTab").after(a);let c=n("upgradeSubtabBtnElements",!1);c.id="ElementsTabBtn",c.classList.add("stage4Include"),n("upgradeTabBtn").after(c);let d=l.tabList;d.upgradeSubtabs.splice(d.upgradeSubtabs.indexOf("Elements"),1),d.tabs.splice(d.tabs.indexOf("upgrade")+1,0,"Elements")}ct();let{mobileDevice:o,screenReader:i}=l,u=!o||e[1]==="F";document.addEventListener("keydown",a=>It(a));for(let a=0;a<v.toggles.normal.length;a++)n(`toggleNormal${a}`).addEventListener("click",()=>{D(a,"normal",!0),a===1&&R(`Changes will come into effect after page reload
(Game will need to be saved first)`)});for(let a=0;a<v.toggles.confirm.length;a++)n(`toggleConfirm${a}`).addEventListener("click",()=>Ge(a,!0));for(let a=0;a<I.longestBuilding;a++)n(`toggleBuilding${a}`).addEventListener("click",()=>D(a,"buildings",!0));for(let a=0;a<v.toggles.hover.length;a++)n(`toggleHover${a}`).addEventListener("click",()=>D(a,"hover",!0));for(let a=0;a<v.toggles.max.length;a++)n(`toggleMax${a}`).addEventListener("click",()=>D(a,"max",!0));for(let a=0;a<v.toggles.auto.length;a++)n(`toggleAuto${a}`).addEventListener("click",()=>D(a,"auto",!0));for(let a=1;a<I.longestBuilding;a++)n(`building${a}Btn`).addEventListener("click",()=>pe(a));n("stageReset").addEventListener("click",()=>{Ve()}),n("reset1Button").addEventListener("click",()=>{let a=t.stage.active;a===1?We():a===2?Qe():a===3?_e():a===4&&Ke()}),n("buy1x").addEventListener("click",()=>ue("1")),n("buyAny").addEventListener("click",()=>ue("any")),n("buyMax").addEventListener("click",()=>ue("max")),n("buyAnyInput").addEventListener("change",()=>ue("any")),n("autoWaitInput").addEventListener("change",()=>{let a=n("autoWaitInput"),c=Math.max(Number(a.value),1);isNaN(c)&&(c=2),t.toggles.shop.wait[t.stage.active]=c,a.value=f(c,{type:"input"})});for(let a=-1;a<l.challengesInfo.name.length;a++){let c=n(`challenge${a+1}`);u&&c.addEventListener("mouseover",()=>Ye(a,"challenge")),o&&c.addEventListener("touchstart",()=>Ye(a,"challenge")),i&&c.addEventListener("focus",()=>Ye(a,"challenge")),c.addEventListener("click",a===-1?yt:()=>{Mt(a)})}for(let a=1;a<l.challengesInfo.rewardText[0].length;a++){if(a===5)continue;let c=n(`voidReward${l.stageInfo.word[a]}`);c.addEventListener("click",()=>Ye(a,"reward")),o&&c.addEventListener("click",()=>{n("voidRewardsDiv").style.display="block"})}o&&n("voidRewardsDiv").addEventListener("click",()=>{n("voidRewardsDiv").style.display=""});for(let a=0;a<I.longestUpgrade;a++){let c=n(`upgrade${a+1}`);u&&c.addEventListener("mouseover",()=>z(a,"upgrades")),o&&c.addEventListener("touchstart",()=>z(a,"upgrades")),i&&c.addEventListener("focus",()=>z(a,"upgrades")),c.addEventListener("click",()=>_(a,t.stage.active,"upgrades"))}for(let a=0;a<I.longestResearch;a++){let c=n(`research${a+1}Image`);u&&c.addEventListener("mouseover",()=>z(a,"researches")),o&&c.addEventListener("touchstart",()=>z(a,"researches")),i&&c.addEventListener("focus",()=>z(a,"researches")),c.addEventListener("click",()=>_(a,t.stage.active,"researches"))}for(let a=0;a<I.longestResearchExtra;a++){let c=n(`researchExtra${a+1}Image`);u&&c.addEventListener("mouseover",()=>z(a,"researchesExtra")),o&&c.addEventListener("touchstart",()=>z(a,"researchesExtra")),i&&c.addEventListener("focus",()=>z(a,"researchesExtra")),c.addEventListener("click",()=>_(a,t.stage.active,"researchesExtra"))}for(let a=0;a<l.researchesAutoInfo.costRange.length;a++){let c=n(`researchAuto${a+1}Image`);u&&c.addEventListener("mouseover",()=>z(a,"researchesAuto")),o&&c.addEventListener("touchstart",()=>z(a,"researchesAuto")),i&&c.addEventListener("focus",()=>z(a,"researchesAuto")),c.addEventListener("click",()=>_(a,t.stage.active,"researchesAuto"))}{let a=n("ASRImage");u&&a.addEventListener("mouseover",()=>z(0,"ASR")),o&&a.addEventListener("touchstart",()=>z(0,"ASR")),i&&a.addEventListener("focus",()=>z(0,"ASR")),a.addEventListener("click",()=>_(t.stage.active,t.stage.active,"ASR"))}u&&n("element0").addEventListener("dblclick",()=>xe(0,"elements"));for(let a=1;a<l.elementsInfo.startCost.length;a++){let c=n(`element${a}`);u&&c.addEventListener("mouseover",()=>z(a,"elements")),o&&c.addEventListener("touchstart",()=>z(a,"elements")),i&&c.addEventListener("focus",()=>z(a,"elements")),c.addEventListener("click",()=>_(a,4,"elements"))}for(let a=1;a<l.strangenessInfo.length;a++){o&&n(`strangenessPage${a}`).addEventListener("click",()=>Oe(a));for(let c=0;c<l.strangenessInfo[a].startCost.length;c++){let d=n(`strange${c+1}Stage${a}Image`);u&&d.addEventListener("mouseover",()=>ve(c,a,"strangeness")),o?d.addEventListener("touchstart",()=>ve(c,a,"strangeness")):d.addEventListener("click",()=>ot(c,a,"strangeness")),i&&d.addEventListener("focus",()=>ve(c,a,"strangeness"))}}o&&n("strangenessCreate").addEventListener("click",()=>ot(l.lastStrangeness[0],l.lastStrangeness[1],"strangeness"));for(let a=1;a<l.milestonesInfo.length;a++)for(let c=0;c<l.milestonesInfo[a].need.length;c++){let d=F(`#milestone${c+1}Stage${a}Div > img`);u&&d.addEventListener("mouseover",()=>ve(c,a,"milestones")),o&&d.addEventListener("touchstart",()=>ve(c,a,"milestones")),i&&d.addEventListener("focus",()=>ve(c,a,"milestones"))}n("vaporizationInput").addEventListener("change",()=>{let a=n("vaporizationInput");t.vaporization.input=Math.max(Number(a.value),0),a.value=f(t.vaporization.input,{type:"input"})}),n("collapseStarsInput").addEventListener("change",()=>{let a=n("collapseStarsInput");t.collapse.input=Math.max(Number(a.value),1),a.value=f(t.collapse.input,{type:"input"})}),n("stageInput").addEventListener("change",()=>{let a=n("stageInput");t.stage.input=Math.max(Number(a.value),0),a.value=f(t.stage.input,{type:"input"})}),n("versionButton").addEventListener("click",()=>{Tt(),n("versionInfo").style.display=""}),n("save").addEventListener("click",()=>{Ie()}),n("file").addEventListener("change",async()=>{let a=n("file");Nt(await a.files[0].text()),a.value=""}),n("export").addEventListener("click",()=>{Ht()}),n("saveConsole").addEventListener("click",()=>{Dt()}),n("switchTheme0").addEventListener("click",()=>Te(null));for(let a=1;a<l.stageInfo.word.length;a++)n(`switchTheme${a}`).addEventListener("click",()=>Te(a));n("toggleAuto8").addEventListener("click",()=>oe()),n("toggleAuto5").addEventListener("click",()=>ae("all")),n("toggleAuto6").addEventListener("click",()=>K("researches","all")),n("toggleAuto7").addEventListener("click",()=>K("researchesExtra","all")),n("saveFileNameInput").addEventListener("change",()=>zt());{let a=n("saveFileHoverButton");a.addEventListener("mouseover",()=>n("saveFileNamePreview").textContent=dt()),i&&a.addEventListener("focus",()=>n("saveFileNamePreview").textContent=dt())}n("mainInterval").addEventListener("change",()=>{let a=n("mainInterval");t.intervals.main=Math.min(Math.max(Math.trunc(Number(a.value)),20),100),a.value=`${t.intervals.main}`,J()}),n("numbersInterval").addEventListener("change",()=>{let a=n("numbersInterval");t.intervals.numbers=Math.min(Math.max(Math.trunc(Number(a.value)),40),200),a.value=`${t.intervals.numbers}`,J()}),n("visualInterval").addEventListener("change",()=>{let a=n("visualInterval");t.intervals.visual=Math.min(Math.max(Math.trunc(Number(a.value)*100),20),400)*10,a.value=`${t.intervals.visual/1e3}`,J()}),n("autoSaveInterval").addEventListener("change",()=>{let a=n("autoSaveInterval");t.intervals.autoSave=Math.min(Math.max(Math.trunc(Number(a.value)*100),400),18e4)*10,a.value=`${t.intervals.autoSave/1e3}`,J()}),n("thousandSeparator").addEventListener("change",()=>gt(!1)),n("decimalPoint").addEventListener("change",()=>gt(!0)),n("MDMainToggle").addEventListener("click",async()=>{if(!await O(`Changing this setting will reload the page, confirm?
(Game will not autosave)`))return;let a=localStorage.getItem("support");a!==null&&a[0]==="M"?localStorage.removeItem("support"):localStorage.setItem("support","MT"),window.location.reload()}),n("SRMainToggle").addEventListener("click",async()=>{if(!await O(`Changing this setting will reload the page, confirm?
(Game will not autosave)`))return;let a=localStorage.getItem("support");a!==null&&a[0]==="S"?localStorage.removeItem("support"):localStorage.setItem("support","STT"),window.location.reload()}),n("pauseGame").addEventListener("click",()=>{Ot()}),n("reviewEvents").addEventListener("click",()=>{Ct()}),n("offlineWarp").addEventListener("click",()=>{ft()}),n("customFontSize").addEventListener("change",()=>ct(!0)),n("stageResetsSave").addEventListener("change",()=>{let a=n("stageResetsSave"),c=t.history.stage.input;c[0]=Math.min(Math.max(Math.trunc(Number(a.value)),0),20),a.value=`${c[0]}`,c[1]<c[0]&&(n("stageResetsKeep").value=a.value,c[1]=c[0])}),n("stageResetsKeep").addEventListener("change",()=>{let a=n("stageResetsKeep");t.history.stage.input[1]=Math.min(Math.max(Math.trunc(Number(a.value)),t.history.stage.input[0],3),100),a.value=`${t.history.stage.input[1]}`}),n("hideToggle").addEventListener("click",Je);for(let a of l.tabList.tabs){n(`${a}TabBtn`).addEventListener("click",()=>q(a));let c=l.tabList[`${a}Subtabs`];if(c!==void 0)for(let d of c)n(`${a}SubtabBtn${d}`).addEventListener("click",()=>q(a,d))}for(let a=1;a<l.stageInfo.word.length;a++)n(`${l.stageInfo.word[a]}Switch`).addEventListener("click",()=>ie(a));G("reload"),n("body").style.display="",n("loading").style.display="none",l.paused=!1,J(),document.title=`Fundamental ${v.version}`,R(s+`
(Game loaded after ${f((Date.now()-v.time.started)/1e3,{type:"time",padding:!1})})`)}catch(e){R(`Game failed to load
Full error: '${e}'`);let s=document.createElement("div");s.innerHTML='<button type="button" id="exportError" style="width: 7em;">Export save</button><button type="button" id="deleteError" style="width: 7em;">Delete save</button>',s.style.cssText="display: flex; column-gap: 0.6em; margin-top: 0.4em;",n("loading").append(s);let r=!1;n("exportError").addEventListener("click",()=>{r=!0;let o=localStorage.getItem("save");if(o===null)return void R("No save file detected");let i=document.createElement("a");i.href=`data:text/plain,${o}`,i.download="Fundamental post error export",i.click()}),n("deleteError").addEventListener("click",async()=>{!r&&!await O(`Recommended to export save file first
Press 'Confirm' to confirm and delete your save file`)||(localStorage.removeItem("save"),window.location.reload(),R("Awaiting page refresh"))})}})();
//# sourceMappingURL=Code.js.map
